

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>A1. Minerva &mdash; SBASIC/SuperBASIC Reference Manual Online 4.0.1 documentation</title>
  

  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  

  

  
    <link rel="top" title="SBASIC/SuperBASIC Reference Manual Online 4.0.1 documentation" href="index.html"/>
        <link rel="next" title="A2 SMSQ/E" href="Appendix02.clean.html"/>
        <link rel="prev" title="Appendices Introduction" href="AppendicesIntro.clean.html"/> 

  
  <script src="_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="index.html" class="icon icon-home"> SBASIC/SuperBASIC Reference Manual Online
          

          
          </a>

          
            
            
              <div class="version">
                4.0
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
                <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="Foreword.clean.html">Foreword</a></li>
<li class="toctree-l1"><a class="reference internal" href="Introduction.clean.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="Credits.clean.html">Credits</a></li>
<li class="toctree-l1"><a class="reference internal" href="Structure.clean.html">Structure</a></li>
<li class="toctree-l1"><a class="reference internal" href="WritingPrograms.clean.html">Writing Programs</a></li>
<li class="toctree-l1"><a class="reference internal" href="AppendicesIntro.clean.html">Appendices Introduction</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">A1. Minerva</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#a1-1-introduction">A1.1 INTRODUCTION</a></li>
<li class="toctree-l2"><a class="reference internal" href="#a1-2-windows-and-closing-windows">A1.2 Windows and Closing Windows</a></li>
<li class="toctree-l2"><a class="reference internal" href="#a1-3-dual-screen-mode">A1.3 Dual Screen Mode</a></li>
<li class="toctree-l2"><a class="reference internal" href="#a1-4-border">A1.4 Border</a></li>
<li class="toctree-l2"><a class="reference internal" href="#a1-5-empty-brackets">A1.5 Empty Brackets</a></li>
<li class="toctree-l2"><a class="reference internal" href="#a1-7-multibasics">A1.7 MultiBASICs</a></li>
<li class="toctree-l2"><a class="reference internal" href="#a1-8-strings">A1.8 Strings</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="Appendix02.clean.html">A2. SMSQ/E</a></li>
<li class="toctree-l1"><a class="reference internal" href="Appendix03.clean.html">A3. Emulators</a></li>
<li class="toctree-l1"><a class="reference internal" href="Appendix04.clean.html">A4. Thor Computers</a></li>
<li class="toctree-l1"><a class="reference internal" href="Appendix05.clean.html">A5. Expansion Boards</a></li>
<li class="toctree-l1"><a class="reference internal" href="Appendix06.clean.html">A6. Compatibility</a></li>
<li class="toctree-l1"><a class="reference internal" href="Appendix07.clean.html">A7. Multiple Basics</a></li>
<li class="toctree-l1"><a class="reference internal" href="Appendix08.clean.html">A8 ERROR MESSAGES</a></li>
<li class="toctree-l1"><a class="reference internal" href="Appendix08.clean.html#a8-1-standard-english-error-messages">A8.1 STANDARD ENGLISH ERROR MESSAGES</a></li>
<li class="toctree-l1"><a class="reference internal" href="Appendix08.clean.html#a8-2-foreign-error-messages">A8.2 Foreign Error Messages</a></li>
<li class="toctree-l1"><a class="reference internal" href="Appendix08.clean.html#a8-3-dates">A8.3 Dates</a></li>
<li class="toctree-l1"><a class="reference internal" href="Appendix08.clean.html#a8-4-sms-messages">A8.4 SMS Messages</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="index.html">SBASIC/SuperBASIC Reference Manual Online</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          

 



<div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="index.html">Docs</a> &raquo;</li>
      
    <li>A1. Minerva</li>
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="_sources/Appendix01.clean.txt" rel="nofollow"> View page source</a>
          
        
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="a1-minerva">
<h1>A1. Minerva<a class="headerlink" href="#a1-minerva" title="Permalink to this headline">¶</a></h1>
<div class="section" id="a1-1-introduction">
<h2>A1.1 INTRODUCTION<a class="headerlink" href="#a1-1-introduction" title="Permalink to this headline">¶</a></h2>
<p>Minerva is a brand new operating system which has been designed for the
QL by QView, parts of which are already incorporated in QDOS emulators.</p>
<p>Based upon the existing QL Roms, it has now developed into a system
which does not rely upon any of the existing code and thereby side-steps
problems with copyright. However, due to the new coding, there are bound
to be one or two slightly grey areas where compatibility must meet with
compromise. From the SuperBASIC point of view, there are no real
problems with using programs written for earlier ROMs (possibly
excluding FB Roms which insisted on using AT y,x instead of AT x,y), and
Minerva merely enhances this superb programming language to provide the
SuperBASIC programmer with one of the most flexible and quickest
implementations of BASIC ever devised.</p>
<p>However, there are one or two enhancements made by Minerva which are
unavailable on earlier ROMs, which of course will limit the portability
of programs which use these advanced features (unless the SuperBASIC
program is compiled with QLiberator or Turbo).</p>
<p>The idea of this section is therefore just to point out some of the
possible pitfalls with which programmers will be faced when writing
SuperBASIC which is specifically designed to run on all versions of
Minerva.</p>
<p><strong>WARNING:</strong></p>
<p>v1.98 of Minerva caused more problems than it solved and you should
therefore obtain v1.97 if you have this version of the operating system.</p>
</div>
<div class="section" id="a1-2-windows-and-closing-windows">
<h2>A1.2 Windows and Closing Windows<a class="headerlink" href="#a1-2-windows-and-closing-windows" title="Permalink to this headline">¶</a></h2>
<p>A problem exists with some versions of Minerva and Lightning SE. The
problem appears to be that if Lightning is switched on, and then windows
are opened on screen, unless they are closed in the reverse order to
which they were opened, they will remain visible on screen despite NEW
or MODE commands until another window with the same channel number is
opened.</p>
<p>Example:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="mi">100</span> <span class="n">OPEN</span><span class="c1">#3,scr_448x200a32x16: PAPER#3,2: CLS#3</span>
<span class="mi">110</span> <span class="n">OPEN</span><span class="c1">#4,scr_448x200a32x56: PAPER#4,4: CLS#4</span>
<span class="mi">120</span> <span class="n">CLOSE</span><span class="c1">#3: CLOSE#4</span>
</pre></div>
</div>
<p>This program will cause the problem and you will be unable to remove
either #3 or #4 from the screen until they are re-opened!</p>
<p>To avoid the problem, alter line 120 to read:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="mi">120</span> <span class="n">CLOSE</span><span class="c1">#4: CLOSE#3</span>
</pre></div>
</div>
<p>QJump&#8217;s Pointer Environment prevents this problem occurring and this can
be regarded as a standard system addition.</p>
</div>
<div class="section" id="a1-3-dual-screen-mode">
<h2>A1.3 Dual Screen Mode<a class="headerlink" href="#a1-3-dual-screen-mode" title="Permalink to this headline">¶</a></h2>
<p>Perhaps the greatest problem with programs written on earlier ROMs is
that they (or machine code extensions used by them) tend to assume that
the screen display will always begin at 131072 ($20000) and that the
system variables will begin at 163840 ($28000). When Minerva is
started-up, the user can opt to run in Dual Screen Mode, which makes two
screens available to the programmer, the first of which is located at
the standard display address (131072 - $20000 in hexadecimal) and the
second of which is located on top of the old system variables address
(163840 - $28000 in hexadecimal) - the system variables are moved out of
the way. Programs can run on either of the screens and should be written
so that they make no assumptions about the start address of the screen.</p>
<p>Minerva allows the user to alter which screen a program will run on
before the program is actually loaded, by using the command MODE 96,-1,
and therefore the programmer has no control in general over which screen
will be used.</p>
<p>This problem can also exist with the THOR XVI which allows several
screens to be in operation at any one time.</p>
<p>Various functions exist to find the start address of the current screen
(eg. SCREEN) and also to find the start address of the system variables,
(eg. SYS_BASE). These functions should be used whenever possible.</p>
<p>The other main problem is that in current versions of Minerva, when a
window is opened on screen, Minerva attempts to open it in the MODE of
the currently displayed screen, rather than the mode of the screen on
which it will be open. This can lead to various problems, such as
illegible writing and flashing on screen. The answer to this is to
ensure that the current screen when the program is started is also the
displayed screen - see MODE.</p>
<p>Other problems exist when using the dual screen mode with both Lightning
and the Pointer Environment, which can make it extremely difficult to
change MODEs on only one screen in the dual screen mode. At the moment
there is no answer to this, other than to pester Digital Precision and
Qjump to produce compatible products. There may also be similar problems
with Speedscreen, but we have been unable to test this.</p>
<p>The other remaining problem is that current versions of Turbo and
Supercharge do not support Minerva&#8217;s dual screen mode, and programs
compiled with either of these packages will not run in the dual screen
mode.</p>
<p>A problem which users with printers may or may not have noticed, is that
Minerva tends to lose characters on their way to the printer when in
dual screen mode.</p>
</div>
<div class="section" id="a1-4-border">
<h2>A1.4 Border<a class="headerlink" href="#a1-4-border" title="Permalink to this headline">¶</a></h2>
<p>On some early Minerva ROMs (and on one or two of the THOR ROMs), the
BORDER command will not work correctly unless a parameter is supplied.</p>
<p>The original ROM accepted BORDER on its own to switch off the border on
#1 (although this was not pointed out by the QL Manual). It is therefore
essential that to retain compatibility BORDER 0 is used.</p>
</div>
<div class="section" id="a1-5-empty-brackets">
<h2>A1.5 Empty Brackets<a class="headerlink" href="#a1-5-empty-brackets" title="Permalink to this headline">¶</a></h2>
<p>An empty bracket is always regarded as a syntax error by original QL
ROMs whereas Minerva tolerates them, for example to indicate that a
function is called with a parameter, eg. DATE(). If a program should be
portable than you have to avoid this style because all ROMs other than
Minerva and SMS mark such lines with a MISTake:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="mi">100</span> <span class="n">MISTake</span> <span class="n">PRINT</span> <span class="n">DATE</span><span class="p">()</span>
</pre></div>
</div>
<p>Since DATE() and VER$() are effectively the same as DATE and VER$, it is
recommended to use the latter syntax.</p>
<p class="rubric" id="a1-6-integer-tokenisation">A1.6 INTEGER TOKENISATION</p>
<p>From v1.79 onwards, Minerva has tidied up the storage of numbers in
SuperBASIC programs, in that if integer tokenisation is enabled, any
numbers contained in a program are stored in as few bytes as possible.
Although programs which are LOADed are unaffected by this since the
interpreter converts the ASCII characters into the internal format as
the program is loaded, certain utilities are unable to cope with integer
tokenisation. In particular, the Supercharge compiler and early versions
of the Turbo (pre v4.3) and QLiberator (pre v3.32) compilers are unable
to compile such programs.</p>
<p>If you use the QLOAD utility from Liberation Software, this stores a
program in its internal format so that it can be loaded very quickly.
Unfortunately, this does mean that programs which are QSAVEd on Minerva
whilst integer tokenisation means that if when the program is QLOADed
with integer QSAVEd, you can end up with a mixture of integer tokens and
floating point tokens within the same program.</p>
<p>To convert a program under Minerva which has been written with Integer
Tokenisation enabled so that it may be compiled with Supercharge or
early versions of Turbo, or even QLOADed on a different ROM version, you
will need to use something along the lines of:-</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">SAVE</span> <span class="n">ram1_convert_bas</span>
<span class="n">POKE</span> \\<span class="mi">212</span><span class="p">,</span><span class="mi">128</span>
<span class="n">LOAD</span> <span class="n">ram1_convert_bas</span>
</pre></div>
</div>
<p>If you try to QLOAD a program which has been QSAVEd with Integer
Tokenisation enabled, on a different ROM, you will notice that various
numbers have disappeared from the listing.</p>
</div>
<div class="section" id="a1-7-multibasics">
<h2>A1.7 MultiBASICs<a class="headerlink" href="#a1-7-multibasics" title="Permalink to this headline">¶</a></h2>
<p>Minerva allows you to have several BASIC interpreters which can all
multitask. Essentially, you retain the original SuperBASIC interpreter
together with several copies of that interpreter, each of which is known
as a MultiBASIC.</p>
<p>A MultiBASIC will in fact operate in the same way as SuperBASIC, and you
can link different toolkits with each copy of the interpreter, knowing
that they will not be available to the other existing interpreters.</p>
<p>The only problem is that many toolkits have been written with only the
original SuperBASIC interpreter in mind, and some commands are therefore
unable to access the MultiBASIC&#8217;s variables. Fortunately, the majority
of commands and functions do in fact still work with MultiBASICs, unless
used from within a compiled program.</p>
</div>
<div class="section" id="a1-8-strings">
<h2>A1.8 Strings<a class="headerlink" href="#a1-8-strings" title="Permalink to this headline">¶</a></h2>
<p>Minerva has altered the way in which strings are handled, in much the
same way as SMSQ/E - please refer to DIM for an explanation of the way
in which dimensioned and undimensioned strings are dealt with on the
various QL implementations.</p>
<p>There was however a problem prior to v1.98 of Minerva in that if you
concatenated two strings together to make a string longer than 32764
characters, this could corrupt BASIC. An example of concatenation is:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span>a$ = &#39;Hello&#39; &amp; b$
</pre></div>
</div>
</div>
</div>


           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="Appendix02.clean.html" class="btn btn-neutral float-right" title="A2 SMSQ/E" accesskey="n">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="AppendicesIntro.clean.html" class="btn btn-neutral" title="Appendices Introduction" accesskey="p"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2016, Rich Mellor.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'./',
            VERSION:'4.0.1',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true
        };
    </script>
      <script type="text/javascript" src="_static/jquery.js"></script>
      <script type="text/javascript" src="_static/underscore.js"></script>
      <script type="text/javascript" src="_static/doctools.js"></script>

  

  
  
    <script type="text/javascript" src="_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>