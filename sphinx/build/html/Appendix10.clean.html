

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>A10 Designing New Character Sets (Fonts) &mdash; SBASIC/SuperBASIC Reference Manual Online 4.0.1 documentation</title>
  

  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  

  

  
    <link rel="top" title="SBASIC/SuperBASIC Reference Manual Online 4.0.1 documentation" href="index.html"/>
        <link rel="next" title="A11 MATHEMATICS" href="Appendix11.clean.html"/>
        <link rel="prev" title="A9 Character Set, Keyboard" href="Appendix09.clean.html"/> 

  
  <script src="_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="index.html" class="icon icon-home"> SBASIC/SuperBASIC Reference Manual Online
          

          
          </a>

          
            
            
              <div class="version">
                4.0
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
                <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="Foreword.clean.html">Foreword</a></li>
<li class="toctree-l1"><a class="reference internal" href="Introduction.clean.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="Credits.clean.html">Credits</a></li>
<li class="toctree-l1"><a class="reference internal" href="Structure.clean.html">Structure</a></li>
<li class="toctree-l1"><a class="reference internal" href="WritingPrograms.clean.html">Writing Programs</a></li>
<li class="toctree-l1"><a class="reference internal" href="AppendicesIntro.clean.html">Appendices Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="Appendix01.clean.html">A1. Minerva</a></li>
<li class="toctree-l1"><a class="reference internal" href="Appendix02.clean.html">A2. SMSQ/E</a></li>
<li class="toctree-l1"><a class="reference internal" href="Appendix03.clean.html">A3. Emulators</a></li>
<li class="toctree-l1"><a class="reference internal" href="Appendix04.clean.html">A4. Thor Computers</a></li>
<li class="toctree-l1"><a class="reference internal" href="Appendix05.clean.html">A5. Expansion Boards</a></li>
<li class="toctree-l1"><a class="reference internal" href="Appendix06.clean.html">A6. Compatibility</a></li>
<li class="toctree-l1"><a class="reference internal" href="Appendix07.clean.html">A7. Multiple Basics</a></li>
<li class="toctree-l1"><a class="reference internal" href="Appendix08.clean.html">A8. Error Messages</a></li>
<li class="toctree-l1"><a class="reference internal" href="Appendix09.clean.html">A9. Character Set, Keyboards</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="">A10. Designing New Character Sets (Fonts)</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#a10-1-fonts-on-the-ql">A10.1 Fonts on the QL</a></li>
<li class="toctree-l2"><a class="reference internal" href="#a10-2-changing-fonts-in-programs">A10.2 Changing Fonts in Programs</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="Appendix11.clean.html">A11. Mathematics</a></li>
<li class="toctree-l1"><a class="reference internal" href="Appendix12.clean.html">A12. Device Drivers</a></li>
<li class="toctree-l1"><a class="reference internal" href="Appendix13.clean.html">A13. Extended Pointer Environment</a></li>
<li class="toctree-l1"><a class="reference internal" href="Appendix14.clean.html">A14. Coercion</a></li>
<li class="toctree-l1"><a class="reference internal" href="Appendix15.clean.html">A15. Mouse Drivers</a></li>
<li class="toctree-l1"><a class="reference internal" href="Appendix16.clean.html">A16. The QL Display</a></li>
<li class="toctree-l1"><a class="reference internal" href="Appendix17.clean.html">A17. Networks</a></li>
<li class="toctree-l1"><a class="reference internal" href="Appendix18.clean.html">A18. Configuring Programs</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="index.html">SBASIC/SuperBASIC Reference Manual Online</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          

 



<div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="index.html">Docs</a> &raquo;</li>
      
    <li>A10 Designing New Character Sets (Fonts)</li>
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="_sources/Appendix10.clean.txt" rel="nofollow"> View page source</a>
          
        
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="a10-designing-new-character-sets-fonts">
<h1>A10 Designing New Character Sets (Fonts)<a class="headerlink" href="#a10-designing-new-character-sets-fonts" title="Permalink to this headline">¶</a></h1>
<p>A font is a character set used by the computer to display characters
(normally letters and numbers) on screen. A wide range of fonts can be
used, which allow you to make letters appear differently on screen for
different programs.</p>
<div class="section" id="a10-1-fonts-on-the-ql">
<h2>A10.1 Fonts on the QL<a class="headerlink" href="#a10-1-fonts-on-the-ql" title="Permalink to this headline">¶</a></h2>
<p>On the QL, each window can have two fonts attached. There are actually
two default fonts, the first of which defines the characters from 32 to
127 and the second of which defines the characters from 127 to 255.</p>
<p>The reason that CHR$(127) is defined twice is that the definition in the
first font is the definition used for the copyright symbol, whereas the
definition in the second font is that used if a character is undefined,
such as CHR$(2).</p>
<p>Normally this is not noticeable and when you open a new window (scr_ or
con_), the standard QL fonts are attached to that channel.</p>
<p>Minerva users can use the commands:</p>
<p>POKE_L !124!40, font1</p>
<p>and</p>
<p>POKE_L !124!44, font2</p>
<p>to alter these default fonts and thereby attach user-defined fonts to
every single window that is opened after this command.</p>
<p>SMSQ/E users can use the command CHAR_DEF to achieve a similar result.</p>
</div>
<div class="section" id="a10-2-changing-fonts-in-programs">
<h2>A10.2 Changing Fonts in Programs<a class="headerlink" href="#a10-2-changing-fonts-in-programs" title="Permalink to this headline">¶</a></h2>
<p>When a character is PRINTed, the QL looks up the code in the first font
to find the binary definition of the character (see below). If the code
is found in this first font then it is PRINTed, otherwise, the QL looks
for the code in the second font and if found PRINTs this out.</p>
<p>If however the character is still not found, then the first character of
the second font is printed out.</p>
<p>This therefore means that although substitute fonts need not have the
same range as the QL standard fonts, it is important that a font
contains all of the characters which will be used by a program!</p>
<p>On a QL, a font is stored in the following format:</p>
<table border="1" class="docutils">
<colgroup>
<col width="16%" />
<col width="84%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Offset</th>
<th class="head">Value</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>$0</td>
<td>Byte giving code of first character defined in the font</td>
</tr>
<tr class="row-odd"><td>$1</td>
<td>Byte giving the number of characters defined (minus 1)</td>
</tr>
<tr class="row-even"><td>$2...$A</td>
<td>Nine bytes defining the first character</td>
</tr>
<tr class="row-odd"><td>$B...</td>
<td>Nine bytes for each subsequent character...</td>
</tr>
</tbody>
</table>
<p>Each character contained in the font is designed on a grid 8 pixels wide
by 9 pixels high, and therefore the easiest way of calculating the nine
bytes which make up each character is to design the character on a sheet
of graph paper (if you do not have a font design program) and then each
row must be converted from binary to decimal.</p>
<p>Each square in the grid which contains a 1 will be shown as a pixel in
the current INK colour when PRINTed to the screen. For instance, this is
the binary representation of the character k:</p>
<div class="highlight-python"><div class="highlight"><pre>  |     BIT  7 6 5 4 3 2 1 0
--+-------------------------------
  |0         0 1 0 0 0 0 0 0 =  64
  |1         0 1 0 0 0 0 0 0 =  64
  |2         0 1 0 0 0 1 0 0 =  68
R |3         0 1 0 0 1 0 0 0 =  72
O |4         0 1 1 1 0 0 0 0 = 112
W |5         0 1 0 0 1 0 0 0 =  72
  |6         0 1 0 0 0 1 0 0 =  68
  |7         0 0 0 0 0 0 0 0 =   0
  |8         0 0 0 0 0 0 0 0 =   0
--+-------------------------------
</pre></div>
</div>
<p>Therefore a small program to set the character &#8216;a&#8217; to the same as the
character &#8216;k&#8217; in channel #1 would be:</p>
<div class="highlight-python"><div class="highlight"><pre>10 a=RESPR(11)
20 POKE a,97 : REMark 97=CODE(&#39;a&#39;) - first character in font
30 POKE a+1,0: REMark Only one character is being redefined
40 RESTORE
50 FOR i=0 TO 8:READ bit:POKE a+2+i,bit
60 DATA 64,64,68,72,112,72,68,0,0
70 CHAR_USE #1,a,0
</pre></div>
</div>
<p>Note that unfortunately no other characters will be printed correctly!
This is because, when re-designing a font, it needs to include all of
the characters which may be used in the window to which the font is
attached.</p>
<p>When designing fonts for use on the QL, it is important that certain
rules are followed to ensure that when characters are PRINTed on screen,
they have the desired appearance in all screen modes. The QL converts a
given character into the desired mode by doubling up various rows or
columns (depending on the size set using the CSIZE command). If you
intend to re-design letters, the rightmost two columns (bits 0 and 1)
should always be left empty as these are ignored in current versions of
the QL ROM.</p>
<p>The leftmost column (bit 7) is normally left blank to ensure a gap
between adjacent characters, however, should you want to use this column
also, you must be wary of the fact that pre-JS ROMs cannot display fonts
correctly which use this column (bit 7) and so this should always be
left blank unless you know that your font is going to be used
specifically on later ROMs (see CSIZE).</p>
<p>In fact, if you are clever, you can use this bit 7 to obtain interesting
effects on pre-JS ROMs, whilst still retaining the full 8 pixel wide
characters (the effects vary depending on the ROM version and cannot be
guaranteed!).</p>
<p>You should also be aware of the fact that an extra blank row is
generally left between each line of characters. Toolkit II users can
however prevent this by using CHAR_INC.</p>
</div>
</div>


           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="Appendix11.clean.html" class="btn btn-neutral float-right" title="A11 MATHEMATICS" accesskey="n">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="Appendix09.clean.html" class="btn btn-neutral" title="A9 Character Set, Keyboard" accesskey="p"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2016, Rich Mellor.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'./',
            VERSION:'4.0.1',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true
        };
    </script>
      <script type="text/javascript" src="_static/jquery.js"></script>
      <script type="text/javascript" src="_static/underscore.js"></script>
      <script type="text/javascript" src="_static/doctools.js"></script>

  

  
  
    <script type="text/javascript" src="_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>