<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html xmlns:v="urn:schemas-microsoft-com:vml">
  <head>
    <meta http-equiv="content-type" content="text/html;
      charset=ISO-8859-1">
    <link rel="stylesheet" type="text/css" href="css/QLManualStyle.css" media="all" />
    <title>Sinclair QL SuperBASIC/SBASIC Reference Manual - Keywords S</title>
</head>
<body>
<div id="header">
  SBASIC/SuperBASIC Reference Manual Online (c) RWAP Software
  <br />
  The Online Guide to programming the Sinclair QL Home Computer in SuperBASIC
</div>
<div id="sideBar">
    <ul>
        <li><a href="Foreword.html">Foreword</a></li>
        <li><a href="Introduction.html">Introduction</a></li>
        <li><a href="Credits.html">Credits</a></li>        
        <li><a href="Structure.html">Structure</a></li>
        <li><a href="WritingPrograms.html">Writing Programs</a></li>
        <hr></hr>
        <li><a href="KeywordsA.html">Keywords - A</a></li>
        <li><a href="KeywordsB.html">Keywords - B</a></li>
        <li><a href="KeywordsC.html">Keywords - C</a></li>
        <li><a href="KeywordsD.html">Keywords - D</a></li>
        <li><a href="KeywordsE.html">Keywords - E</a></li>
        <li><a href="KeywordsF.html">Keywords - F</a></li>
        <li><a href="KeywordsG.html">Keywords - G</a></li>
        <li><a href="KeywordsH.html">Keywords - H</a></li>
        <li><a href="KeywordsI.html">Keywords - I</a></li>
        <li><a href="KeywordsJ.html">Keywords - J</a></li>
        <li><a href="KeywordsK.html">Keywords - K</a></li>
        <li><a href="KeywordsL.html">Keywords - L</a></li>
        <li><a href="KeywordsM.html">Keywords - M</a></li>
        <li><a href="KeywordsN.html">Keywords - N</a></li>
        <li><a href="KeywordsO.html">Keywords - O</a></li>
        <li><a href="KeywordsP.html">Keywords - P</a></li>
        <li><a href="KeywordsQ.html">Keywords - Q</a></li>
        <li><a href="KeywordsR.html">Keywords - R</a></li>
        <li><a href="KeywordsS.html">Keywords - S</a></li>
        <li><a href="KeywordsT.html">Keywords - T</a></li>
        <li><a href="KeywordsU.html">Keywords - U</a></li>
        <li><a href="KeywordsV.html">Keywords - V</a></li>
        <li><a href="KeywordsW.html">Keywords - W</a></li>
        <li><a href="KeywordsX.html">Keywords - X</a></li>
        <li><a href="KeywordsY.html">Keywords - Y</a></li>
        <li><a href="KeywordsZ.html">Keywords - Z</a></li>
        <li><a href="Keywords_.html">Keywords - Other</a></li>
        <hr></hr>
        <li><a href="AppendicesIntro.html">Appendices Introduction</a></li>
        <li><a href="Appendix01.html">Appendix 1 - Minerva</a></li>
        <li><a href="Appendix02.html">Appendix 2 - SMSQE</a></li>
        <li><a href="Appendix03.html">Appendix 3 - Emulators</a></li>
        <li><a href="Appendix04.html">Appendix 4 - THOR Computers</a></li>
        <li><a href="Appendix05.html">Appendix 5 - Expansion Boards</a></li>
        <li><a href="Appendix06.html">Appendix 6 - Compatability</a></li>
        <li><a href="Appendix07.html">Appendix 7 - Multiple BASICs</a></li>
        <li><a href="Appendix08.html">Appendix 8 - Error Messages</a></li>
        <li><a href="Appendix09.html">Appendix 9 - Character Set / Keyboard</a></li>
        <li><a href="Appendix10.html">Appendix 10 - Fonts</a></li>
        <li><a href="Appendix11.html">Appendix 11 - Mathematics</a></li>
        <li><a href="Appendix12.html">Appendix 12 - Device Drivers</a></li>
        <li><a href="Appendix13.html">Appendix 13 - Extended Pointer Environment</a></li>
        <li><a href="Appendix14.html">Appendix 14 - Coercion</a></li>
        <li><a href="Appendix15.html">Appendix 15 - Mouse Drivers</a></li>
        <li><a href="Appendix16.html">Appendix 16 - The QL Display</a></li>
        <li><a href="Appendix17.html">Appendix 17 - Networks</a></li>
        <li><a href="Appendix18.html">Appendix 18 - Configuring Programs</a></li>
    </ul>
</div>
<div id="mainText">
<h1><a name="SAR"></a>SAR</h1><br>Syntax: <span style="font-style: italic;">SAR file, array
<br></span>Location: <span style="font-style: italic;">ARRAY
<br></span><br>The command <span style="font-style: italic;">SAR</span> allows you to save a given <span style="font-style: italic;">array</span> quickly (so
<br>that it can later be reloaded) as a whole to a specified file.
<br><br>The Toolkit II default data device for the file name is
<br>supported, although an existing file is not overwritten (use
<br><span style="font-style: italic;">SARO</span>) - the error 'Already exists' will be generated instead.
<br><br><span style="font-style: italic;">array</span> is stored in an internal coded but portable format,
<br>which makes it extremely fast to save and load arrays when
<br>compared to storage by writing and reading each individual
<br>element of an array. The file format is quite simple, it is
<br>basically the same as the way in which SuperBASIC itself would
<br>store the array.
<br><br>The first four bytes of the stored <span style="font-style: italic;">array</span> are the characters
<br>WLAF.
<br><br><span style="font-style: italic;">SAR</span> will identify dimensions and the type of array on its
<br>own and accordingly store it.  Sub-arrays are handled, but
<br>please note that, since stored data can only be reloaded into
<br>a readily dimensioned array (see <span style="font-style: italic;">LAR</span>), it is important to
<br>remember the dimensions and type of the array before loading.
<br><br><h3>Example:
<br></h3><br>Save and load an array:
<br><span style="font-style: italic;">100 DIM a%(1000)
<br>110 SAR file$, a%
<br>120 LAR file$, a%
<br></span><br><h3>NOTE:
<br></h3><br><span style="font-style: italic;">SAR</span>'s file format is not compatible with that used by
<br>Toolkit 3 (a commercial Toolkit which has nothing to do with
<br>the famous Toolkit II), produced with <span style="font-style: italic;">SARRAY</span>.
<br><br><h3>CROSS-REFERENCE:<br></h3><br><a style="font-style: italic;" href="KeywordsS.html#SARO">SARO</a> and <a style="font-style: italic;" href="KeywordsL.html#LAR">LAR</a>.
<br><br><a style="font-style: italic;" href="KeywordsD.html#DIM">DIM</a> sets-up an array while <a style="font-style: italic;" href="KeywordsD.html#DIMN">DIMN</a> and <a style="font-style: italic;" href="KeywordsN.html#NDIM">NDIM</a> read the dimensions.
<br><hr style="width: 100%; height: 2px;"><h1><a name="SARO"></a>SARO</h1><br>Syntax: <span style="font-style: italic;">SARO file, array
<br></span>Location: <span style="font-style: italic;">ARRAY
<br></span><br><span style="font-style: italic;">SARO</span> is almost the same as <span style="font-style: italic;">SAR</span> except that it overwrites an
<br>existing file without reporting an error.
<br><hr style="width: 100%; height: 2px;"><h1><a name="SAUTO"></a>SAUTO</h1><br>Syntax: <span style="font-style: italic;">SAUTO seconds
<br></span>Location: <span style="font-style: italic;">Ecran Manager
<br></span><br>This is yet another screen saver....
<br><br>It is activated by specifying how many seconds the computer
<br>should wait for a key to be pressed before it turns the screen
<br>blank. Once the screen is blank, any key will display the
<br>screen again.
<br><br>Negative  seconds  de-acticate  this  most  useful  of  all
<br>computer utilities.
<br><br><h3>Example:
<br></h3><span style="font-style: italic;">SAUTO 180
<br></span><br>blanks the display if no key is pressed for three minutes.
<br><br><h3>NOTE 1:
<br></h3><br><span style="font-style: italic;">seconds = 0</span> gives an annoying flashing screen, so avoid it.
<br><br><h3>NOTE 2:
<br></h3><br>See <span style="font-style: italic;">SSAVE</span>.
<br><br><h3>CROSS-REFERENCE:<br></h3><br><a style="font-style: italic;" href="KeywordsS.html#SCRON">SCRON</a>, <a style="font-style: italic;" href="KeywordsS.html#SCROFF">SCROFF</a>, <a style="font-style: italic;" href="KeywordsM.html#MODE
">MODE
</a><br><h3>
<br></h3><hr style="width: 100%; height: 2px;"><h1><a name="SAVE"></a>SAVE</h1><br>Syntax: <span style="font-style: italic;">SAVE device_filename </span><sup>*</sup>[<span style="font-style: italic;">,range</span>]<sup>*
<br></sup><br>or <span style="font-style: italic;">SAVE </span>[<span style="font-style: italic;">device_</span>] <span style="font-style: italic;">filename </span><sup>*</sup>[<span style="font-style: italic;">,range</span>]<sup>*</sup><span style="font-style: italic;">(Toolkit II only)
<br></span><br>or <span style="font-style: italic;">SAVE</span><span style="font-style: italic;">(SMS only)
<br></span>Location: <span style="font-style: italic;">QL ROM, Toolkit II
<br></span><br>If no line <span style="font-style: italic;">range</span> is given, this command saves the whole of
<br>the currently loaded SuperBASIC program to the given directory
<br>device, under the given filename. However, a <span style="font-style: italic;">range</span> of lines can
<br>be given (as with <span style="font-style: italic;">LIST</span>), in which case only the given lines will
<br>be saved.
<br><br>If the <span style="font-style: italic;">filename</span> already exists on that <span style="font-style: italic;">device</span>, the error
<br>'Already Exists' is reported, unless you have Toolkit II
<br>present, in which case, a prompt will be printed in #0 asking
<br>you whether it is okay to overwrite that file.
<br><br>If the <span style="font-style: italic;">device</span> is already full, the 'Device Full' error is
<br>reported, however, the effects should the drive become full
<br>during the actual <span style="font-style: italic;">SAVE</span> command, depends upon the implementation
<br>(see below).
<br><br>The file is saved in pure ASCII format, which means that it
<br>can be <span style="font-style: italic;">COPY</span>ed to the screen or a printer (using <span style="font-style: italic;">COPY_N</span>).
<br><br>The Toolkit II variant of the command will add the data
<br>default directory to the <span style="font-style: italic;">filename</span> if it cannot find the given
<br><span style="font-style: italic;">device</span>, or no <span style="font-style: italic;">device</span> is specified.
<br><br><h3>Examples:
<br></h3><br>Save the whole of the current program to microdrive 1 with
<br>the filename BOOT:
<br><span style="font-style: italic;">SAVE mdv1_BOOT
<br></span><br>Save the whole of the current program to the current data
<br>default directory with the filename prog_bas:
<br><span style="font-style: italic;">SAVE prog_bas
<br></span><br>Save lines 1, 100 to 150 (inclusive) and 300 to the end of
<br>the program to the current data default directory with the
<br>filename cut_bas:
<br><span style="font-style: italic;">SAVE cut_bas,1,100 TO 150,300 TO
<br></span><br><h3>NOTE 1:
<br></h3><br><span style="font-style: italic;">SAVE</span> can lead to incomplete files if the Break key is
<br>pressed or the device fills up during access, although Toolkit
<br>II (v2.13+) will report any file errors during output (other
<br>than the Break key being pressed), leaving the incomplete file
<br>on the device.
<br><br><h3>NOTE 2:
<br></h3><br>Minerva (pre v1.80) deleted the file if <span style="font-style: italic;">SAVE</span> was aborted for
<br>any reason.
<br><br><h3>NOTE 3:
<br></h3><br>If you try to <span style="font-style: italic;">SAVE</span> a file on top of a sub-directory name,
<br>Toolkit II will repeatedly ask if it is OK to overwrite that
<br>file until you answer &lt;N&gt; (for No).
<br><br><h3>SMS NOTES:
<br></h3><br>The third variant of the command will allow you to <span style="font-style: italic;">SAVE</span> the
<br>program in memory under the same filename as when <span style="font-style: italic;">LOAD</span> or <span style="font-style: italic;">QLOAD
<br></span>was last used (with the <span style="font-style: italic;">_BAS</span> suffix appended if necessary).  If
<br>the original filename used when the program was <span style="font-style: italic;">LOAD</span>ed ended in
<br><span style="font-style: italic;">_SAV</span>, then <span style="font-style: italic;">SAVE</span> will alter this to be the <span style="font-style: italic;">_BAS</span> suffix.  This
<br>variant will also take the version number of the file when it
<br>was <span style="font-style: italic;">LOAD</span>ed (or <span style="font-style: italic;">QLOAD</span>ed) and then increase this by one.
<br><br>If you <span style="font-style: italic;">SAVE</span> a file on a disk, then use <span style="font-style: italic;">DELETE</span> to remove that
<br>file, and then change the disk before issuing the <span style="font-style: italic;">SAVE</span> command
<br>without a filename being specified, SMSQ/E fails to recognise
<br>that the disk has been swapped and repeatedly tries to write
<br>out the file using the old directory map.
<br><br>Further, if you enter <span style="font-style: italic;">SAVE</span> without a parameter and no disk
<br>is in the drive - SMSQ/E asks if it is OK to overwrite the
<br>file!!
<br><br><h3>CROSS-REFERENCE:<br></h3><br><a style="font-style: italic;" href="KeywordsL.html#LOAD">LOAD</a> loads a saved file from the given device into memory.
<br><br><a style="font-style: italic;" href="KeywordsS.html#SAVE_O">SAVE_O</a> is another variant of this command.
<br><br>See also <a style="font-style: italic;" href="KeywordsQ.html#QSAVE">QSAVE</a> for a different means of <a style="font-style: italic;" href="KeywordsS.html#SAVE">SAVE</a>ing a SuperBASIC
<br>program.
<br><hr style="width: 100%; height: 2px;"><h1><a name="SAVE_O"></a>SAVE_O</h1><br>Syntax: <span style="font-style: italic;">SAVE_O device_filename </span>*[<span style="font-style: italic;">,range</span>]*<span style="font-style: italic;">(THOR XVI)
<br></span><br>or <span style="font-style: italic;">SAVE_O </span>[<span style="font-style: italic;">device_</span>]<span style="font-style: italic;"> filename </span>*[<span style="font-style: italic;">,range</span>]*<span style="font-style: italic;">(Toolkit II)
<br></span><br>or <span style="font-style: italic;">SAVE_O</span><br><span style="font-style: italic;">(SMS only)
<br></span>Location: <span style="font-style: italic;">THOR XVI, Toolkit II
<br></span><br>This command operates in exactly the same manner as <span style="font-style: italic;">SAVE</span>,
<br>except that  the  file  is automatically  overwritten  if  it
<br>already exists.
<br><br><h3>NOTE:
<br></h3><br>This will not overwrite a sub-directory file and will
<br>create the same problem as <span style="font-style: italic;">SAVE</span>.
<br><br><h3>CROSS-REFERENCE:<br></h3><br>See <a style="font-style: italic;" href="KeywordsS.html#SAVE">SAVE</a>!
<br><hr style="width: 100%; height: 2px;"><h1><a name="SAVEPIC"></a>SAVEPIC</h1><br>Syntax: <span style="font-style: italic;">SAVEPIC file$
<br></span>Location: <span style="font-style: italic;">PICEXT
<br></span><br>This command saves the screen contents (from $20000) to the
<br>specified <span style="font-style: italic;">file</span>, which has to be given as a string and must
<br>include the full filename. The file which will be created is
<br>32K long.
<br><br><span style="font-style: italic;">SBYTES file$,SCREEN,32768
<br></span><br>does exactly the same.
<br><br><h3>NOTE:
<br></h3><br><span style="font-style: italic;">SAVEPIC</span> makes the same assumptions and suffers from the same
<br>compatibility problems as <span style="font-style: italic;">LOADPIC</span>.
<br><br><h3>CROSS-REFERENCE:<br></h3><br><a style="font-style: italic;" href="KeywordsL.html#LOADPIC">LOADPIC</a> displays the saved screen file.
<br><hr style="width: 100%; height: 2px;"><h1><a name="SB_THING"></a>SB_THING</h1><br>Syntax: <span style="font-style: italic;">SB_THING
<br></span>Location: <span style="font-style: italic;">SMSQ
<br></span><br>This command is found in versions of <span style="font-style: italic;">SMSQ</span> which do not have
<br>the Hotkey System II built in (most QXL versions of <span style="font-style: italic;">SMSQ</span>).
<br><br>It is used to create the SBASIC Executable Thing so that
<br>you can start <span style="font-style: italic;">SBASIC</span> up from a Hotkey or by using the <span style="font-style: italic;">EXEC</span> set of
<br>commands.
<br><br><h3>NOTE:
<br></h3><br>You must only use this command after the file HOT_REXT has
<br>been loaded, for example with <span style="font-style: italic;">LRESPR flp1_HOT_REXT</span>.
<br><br><h3>CROSS-REFERENCE:<br></h3><br>Please refer to <a style="font-style: italic;" href="KeywordsE.html#EW">EW</a> and <a style="font-style: italic;" href="KeywordsS.html#SBASIC">SBASIC</a>.
<br><br>Also see the Appendix on Mutliple BASICs.
<br><hr style="width: 100%; height: 2px;"><h1><a name="SBASIC"></a>SBASIC</h1><br>Syntax: <span style="font-style: italic;">SBASIC </span>[<span style="font-style: italic;">pos</span>]
<br><br>or <span style="font-style: italic;">SBASIC pos$
<br></span>Location: <span style="font-style: italic;">SMS
<br></span><br>This  command  is  used  to  start  up  a  Multiple  SBASIC
<br>interpreter, which  is  nearly  an exact  copy  of  the  main
<br>interpreter (Job 0) and will contain a copy of all of the
<br>toolkit commands used by the parent Job when this command is
<br>invoked.  Any toolkits subsequently loaded into the new SBASIC
<br>interpreter cannot be used by its parent and vice versa.
<br><br>In its simplest form:
<br><br><span style="font-style: italic;">SBASIC
<br></span><br>a new Interpreter will be started up which has windows
<br>#0,#1 and #2 open as per Job 0.
<br><br>You can however pass either a one or two digit number
<br>(either as a numeric <span style="font-style: italic;">pos</span> or a string <span style="font-style: italic;">pos$</span>), in which case only #0
<br>will be opened and its position will depend upon the number
<br>which has been passed as a parameter.  This enables you to
<br>start  up  a  new  SBASIC  Interpreter  without  its  windows
<br>overlapping existing programs.
<br><br>If only one digit is passed, this is taken to be the SBASIC
<br>row number.  Row 0 is at the top of the screen, Row 1 is 64
<br>pixels from the top, Row 2 128 pixels from the top and so
<br>on...
<br><br>If two digits are passed, the first digit is taken to be
<br>the SBASIC column number, the second becomes the SBASIC row
<br>number (see above).  The column number is calculated as,
<br>Column 0 being the left hand side of the screen, Column 1 is
<br>256 pixels from the left, Column 2 512 pixels from the left
<br>and so on....
<br><br><h3>CROSS-REFERENCE:<br></h3><br>See <a style="font-style: italic;" href="KeywordsM.html#MB">MB</a> and <a style="font-style: italic;" href="KeywordsE.html#EW">EW</a> for other ways of starting up additional
<br>interpreters.
<br><br>In addition SMS users can use <a style="font-style: italic;" href="KeywordsE.html#EXEP SBASIC">EXEP SBASIC</a> or even use the Exec
<br>button from QPAC II and Minerva users can use <a style="font-style: italic;" href="KeywordsE.html#EX PIPEP">EX PIPEP</a>.
<br><br><a style="font-style: italic;" href="KeywordsW.html#WMON">WMON</a> and <a style="font-style: italic;" href="KeywordsW.html#WTV">WTV</a> can be used to reposition the SBASIC windows.
<br><br>Also see the appendix on Multiple BASICs.
<br><br><a style="font-style: italic;" href="KeywordsJ.html#JOB_NAME">JOB_NAME</a> can be used to alter the name of a SBASIC Job.
<br><hr style="width: 100%; height: 2px;"><h1><a name="SBYTES"></a>SBYTES</h1><br>Syntax: <span style="font-style: italic;">SBYTES device_file,start,length
<br></span><br>or         <span style="font-style: italic;">SBYTES         device_file,start</span>[<span style="font-style: italic;">,length</span>[<span style="font-style: italic;">,data</span>[<span style="font-style: italic;">,extra</span>[<span style="font-style: italic;">,type</span>]]]
<br><span style="font-style: italic;">(Minerva v1.80+)
<br></span><br>or <span style="font-style: italic;">SBYTES </span>[<span style="font-style: italic;">device_</span>]<span style="font-style: italic;">file,start,length</span><span style="font-style: italic;">(Toolkit II)
<br></span><br>or <span style="font-style: italic;">SBYTES #channel,start,length</span><span style="font-style: italic;">(SMS only)
<br></span>Location: <span style="font-style: italic;">QL ROM, Toolkit II
<br></span><br>It can sometimes be useful to save part of the QL's memory
<br>to a file so that it can be loaded back into the computer at a
<br>later date. The area of memory saved may for example, contain
<br>a program, some machine code or some data.
<br><br>The command <span style="font-style: italic;">SBYTES</span> allows you to save <span style="font-style: italic;">length</span> number of bytes
<br>from the QL's memory, starting from the specified <span style="font-style: italic;">start</span> address.
<br>The area of memory is saved to the specified <span style="font-style: italic;">file</span> which must
<br>include the name of the <span style="font-style: italic;">device</span> to be used, unless Toolkit II is
<br>present, in which case the default data device is supported.
<br><br>The Toolkit II variant will also provide you with the
<br>option of overwriting the file if it already exists.
<br><br><h3>Example:
<br></h3><br>(1) To save the currently displayed screen on a standard
<br>QL, use the command:
<br><span style="font-style: italic;">SBYTES flp1_Example_scr,SCREEN,32768
<br></span><br>Or under SMS, you can save any size screen using:
<br><span style="font-style: italic;">SBYTES flp1_Example_scr,SCR_BASE,SCR_LLEN*SCR_YLIM
<br></span><br>(2) The start of a program which was protected by a
<br>password could be written along the lines of this:-
<br><span style="font-style: italic;">100 a=ALCHP(100)
<br>110 IF FTEST(flp1_pass)=0
<br>120   LBYTES flp1_pass,a
<br>130 END IF
<br>140 pass$=''
<br>150 PAPER#0,0:CLS#0:INK#0,7
<br>160 PRINT #0,'Enter Password :';
<br>170 FOR letter=1 TO 4
<br>180   pass$=pass$&INKEY$(-1)
<br>190   PRINT#0,'*';
<br>200 END FOR letter
<br>210 PRINT #0
<br>220 IF PEEK(a)=0
<br>230   offset=RND(1 TO 50)
<br>240   POKE a,offset
<br>250   FOR i=1 TO 4
<br>260     POKE a+i,CODE(pass$(i))+i+offset
<br>270   END FOR i
<br>280   FOR i=5 TO 100:POKE a+i,RND(100)
<br>290   SBYTES flp1_pass,a,100
<br>300 ELSE
<br>310   offset=PEEK(a)
<br>320   FOR i=1 TO 4
<br></span><br><h3>
<br></h3><span style="font-style: italic;">330    IF CODE(pass$(i))&lt;&gt;PEEK(a+i)-i-offset
<br>340      PRINT 'Access Denied':RECHP a:STOP
<br>350    END IF
<br>360   END FOR i
<br>370 END IF
<br>380 PRINT 'Access Granted'
<br>390 RECHP a
<br></span><br><h3>NOTE 1:
<br></h3><br>On Minerva ROMs (pre v1.80), if <span style="font-style: italic;">SBYTES</span> was aborted for some
<br>reason whilst writing to a file, the file would be deleted. On
<br>later  versions  of  Minerva  and  all  other  QL  ROMs,  the
<br>incomplete file is kept and on Toolkit II, the error 'Medium
<br>Full' is reported.
<br><br><h3>NOTE 2:
<br></h3><br>On Minerva ROMs (pre v1.83) <span style="font-style: italic;">SBYTES</span> set the wrong file type.
<br><br><h3>NOTE 3:
<br></h3><br>The Minerva variant is unfortunately overwritten by the
<br>Toolkit II version of this command.
<br><br><h3>MINERVA NOTES:
<br></h3><br>On Minerva v1.80 (or later) the commands <span style="font-style: italic;">SBYTES</span> and <span style="font-style: italic;">SEXEC</span> have
<br>practically become interchangeable, as both support exactly
<br>the same parameters. All of the parameters except for the
<br><span style="font-style: italic;">start</span> address and <span style="font-style: italic;">device_file</span> where the data is to be stored, are
<br>optional and will default to 0 if not specified.
<br><br>These additional parameters have the following uses:
<br><br><span style="font-style: italic;">extra</span>This sets the value which is normally returned
<br>with  <span style="font-style: italic;">FXTRA</span>  (which  would  normally  have  to  be
<br>altered with <span style="font-style: italic;">SetHEAD</span>).
<br><br><span style="font-style: italic;">type</span>This allows you to set two file attributes:
<br><br>(a) the file type - this is normally 0 for data,
<br>or 1 for executable programs. This is calculated
<br>by <span style="font-style: italic;">PRINT type && 255</span>.
<br><br>(b) the file access key - it is generally used by
<br>Toolkits such as QL-System to store various file
<br>attributes (such as whether a file is read-only).
<br>This is calculated by <span style="font-style: italic;">PRINT type DIV 256</span>.
<br><br>The only problem with using this extended version of <span style="font-style: italic;">SBYTES
<br></span>instead of using <span style="font-style: italic;">SEXEC</span> is that you  must remember to specify a
<br>file type of 1 if the file is later to be <span style="font-style: italic;">EXEC</span>uted (as this
<br>defaults to 0 in the case of <span style="font-style: italic;">SBYTES</span>!).
<br><br>For example, both of these are the same:-
<br><span style="font-style: italic;">SBYTES ram1_test_exe,code_start,20000,500,0,1
<br></span><span style="font-style: italic;">SEXEC ram1_test_exe,code_start,20000,500
<br></span><br><h3>SMS NOTE:
<br></h3><br>The fourth variant of the command allows you to save the
<br>bytes to an existing channel which is already <span style="font-style: italic;">OPEN</span> to a file,
<br>thus allowing you to work more efficiently.  You can use the
<br>following to error trap the saving routine:
<br><span style="font-style: italic;">100 REPeat loop
<br>110   ch=FOP_NEW (ram1_test_bin)
<br>120   IF ch<0
<br>130     REPORT ch
<br>140     PRINT "Press &lt;y&gt; to retry, &lt;n&gt; to stop"
<br>150     REPeat kLoop
<br>160       key$=INKEY$(-1)
<br>170       IF key$ INSTR 'yn':EXIT kLoop
<br>180     END REPeat kLoop
<br>190     IF key$=='y':NEXT loop
<br>200     STOP
<br>210   END IF
<br>220   SBYTES #ch,131072,32768
<br>230   EXIT loop
<br>240 END REPeat loop
<br>250 CLOSE #ch
<br></span><br><h3>CROSS-REFERENCE:<br></h3><br><a style="font-style: italic;" href="KeywordsS.html#SBYTES_O">SBYTES_O</a> and <a style="font-style: italic;" href="KeywordsS.html#SEXEC">SEXEC</a> are very similar.
<br><br><a style="font-style: italic;" href="KeywordsD.html#DATA_USE">DATA_USE</a> allows you to alter the current default data device.
<br><br><a style="font-style: italic;" href="KeywordsL.html#LBYTES">LBYTES</a> allows you to load in a block of code which has been
<br>saved with <a style="font-style: italic;" href="KeywordsS.html#SBYTES">SBYTES</a> or <a style="font-style: italic;" href="KeywordsS.html#SEXEC">SEXEC</a>.
<br><hr style="width: 100%; height: 2px;"><h1><a name="SBYTES_O"></a>SBYTES_O</h1><br>Syntax: <span style="font-style: italic;">SBYTES_O </span>[<span style="font-style: italic;">device_</span>]<span style="font-style: italic;">file,start,length</span><span style="font-style: italic;">(Toolkit II only)
<br></span><br>or <span style="font-style: italic;">SBYTES_O device_file,start,length   </span><br><span style="font-style: italic;">(THOR XVI)
<br></span><br>or <span style="font-style: italic;">SBYTES_O #channel,start,length   </span><br><span style="font-style: italic;">(SMS only)
<br></span>Location: <span style="font-style: italic;">Toolkit II, THOR XVI
<br></span><br>This command is exactly the same as <span style="font-style: italic;">SBYTES</span> except that it
<br>will automatically overwrite an existing file of the same
<br>name.
<br><br><h3>NOTE:
<br></h3><br>The Toolkit II version of the command supports the default
<br>data device.
<br><br><h3>CROSS-REFERENCE:<br></h3><br>See <a style="font-style: italic;" href="KeywordsS.html#SBYTES">SBYTES</a>.
<br><hr style="width: 100%; height: 2px;"><h1><a name="SCALE"></a>SCALE</h1><br>Syntax: <span style="font-style: italic;">SCALE </span>[<span style="font-style: italic;">#ch,</span>]<span style="font-style: italic;"> size,x,y
<br></span><br>or <span style="font-style: italic;">SCALE </span>[<span style="font-style: italic;">#ch,</span>]<span style="font-style: italic;"> -size,x,y</span> <span style="font-style: italic;">(Minerva v1.76+)
<br></span>Location: <span style="font-style: italic;">QL ROM
<br></span><br>Many of the QL's graphics commands rely upon the graphics
<br>co-ordinate system to dictate whereabouts in a window they
<br>should appear.
<br><br>The command <span style="font-style: italic;">SCALE</span> allows you to set the graphics scale in a
<br>specified window (default #1). <span style="font-style: italic;">size</span> dictates the graphics scale
<br>for that window by representing the length of a line which
<br>would be drawn from the bottom left hand corner of a window to
<br>the top left hand corner, hence the larger the <span style="font-style: italic;">size</span>, the more
<br>information which can appear on screen (although this is
<br>somewhat limited by the actual resolution of the screen!). The
<br>default size is 100.
<br><br>The co-ordinates x,y specify the co-ordinate which appears
<br>in the bottom left hand corner of the screen.
<br><br>When a window is opened, the scale is reset with the
<br>equivalent of <span style="font-style: italic;">SCALE #ch,100,0,0</span>.
<br><br>Although a line drawn up the side of a window will be <span style="font-style: italic;">size
<br></span>units long, the length required to draw a line along the whole
<br>of the bottom of the window, not only depends on the value of
<br><span style="font-style: italic;">size</span>, but also on the screen resolution and the shape of the
<br>given window.
<br><br>    <span style="font-style: italic;">          size</span>|
<br><br>           y|
<br><br> |
<br><br>|
<br><br>|
<br><br>|
<br><br>|__________________________________
<br>(0,0) <span style="font-style: italic;">size*factor
<br></span><br>                              x
<br><br><h3>Example:
<br></h3><br>The following short program will draw a diagonal cross
<br>through the middle of any given size of window, on any given
<br>screen resolution:-
<br><span style="font-style: italic;">100 INPUT 'Screen Resolution Width :'!ScreenX
<br>110 INPUT 'Screen Resolution Height :'!ScreenY
<br>120 INPUT 'Window Width : ';wid
<br>130 INPUT 'Window Height : ';hi
<br>140 INPUT 'Scale : ';size
<br>150 WINDOW wid,hi,32,16
<br>160 PAPER 2:INK 7:CLS
<br>170 SCALE size,0,0
<br>180 Xratio=ScreenX/512:Yratio=ScreenY/256
<br>190 line_diff=(101*Yratio/hi)*wid/('135.5041505'*Xratio)
<br>200 LINE 0,0 TO size*line_diff,size
<br>210 LINE 0,size TO size*line_diff,0
<br></span><br><h3>
<br></h3><br><h3>NOTE 1:
<br></h3><br>Graphics drawn using the QL graphics co-ordinate system
<br>will appear in the same place on screen in any screen <span style="font-style: italic;">MODE</span>.
<br><br><h3>NOTE 2:
<br></h3><br>Due to the QL's arithmetic routines, the maximum length of
<br>a line which can be drawn upwards in a window is slightly
<br>larger than <span style="font-style: italic;">size</span>.
<br><br><h3>NOTE 3:
<br></h3><br>On JSU ROMs, the screen ratio is different to other ROMs,
<br>presumably due to the different number of lines on American
<br>TVs - you would need to change line 190 in the above example
<br>to read:
<br><span style="font-style: italic;">190 line_diff=(101*Yratio/hi)*wid/('159.593001'*Xratio)
<br></span><br><h3>MINERVA NOTES:
<br></h3><br>Minerva ROMs (v1.76 or later) allow you to use a negative
<br><span style="font-style: italic;">SCALE</span>, so that you may easily draw a picture upside down without
<br>altering all  of  the  different drawing  commands.  This  is
<br>achieved by using the second syntax of the <span style="font-style: italic;">SCALE</span> command.
<br><br>Before trying to use this new variant of the command, you
<br>will have to give your drawing some careful thought. For
<br>instance, when designing a screen, it is best to draw this
<br>using the normal <span style="font-style: italic;">SCALE</span> command, and then to use Minerva's new
<br>syntax at that stage. For example, take the following short
<br>demonstration drawing:
<br><span style="font-style: italic;">100 MODE 8
<br>110 WINDOW 448,200,32,16
<br>120 SCALE 100,0,0:PAPER 0:CLS
<br>130 INK 2:FILL 1
<br>140 LINE 0,0 TO 0,10
<br>150 LINE 0,10 TO 40,30 TO 60,27
<br>160 LINE 60,27 TO 40,24 TO 10,0 TO 0,0
<br>170 FILL 1
<br>180 LINE 166,0 TO 166,10
<br>190 LINE 166,10 TO 126,30 TO 106,27
<br>200 LINE 106,27 TO 126,24 TO 156,0 TO 166,0
<br>210 INK 4,3
<br>220 FILL 1:CIRCLE 83,50,32:FILL 0
<br></span><br>Now, to turn it upside down on Minerva, try changing line
<br>120 to read:
<br><span style="font-style: italic;">120 SCALE -100,0,0:PAPER 0:CLS
<br></span><br>If you now try running the program, you will find that your
<br>picture no longer appears! This is because instead of Minerva
<br>moving the graphics origin to the top right hand corner of the
<br>window (as you might have expected), Minerva has in effect
<br>turned the graphics output around by 180 degrees about the
<br>graphics origin (ie. the bottom left hand corner of the
<br>window). This means that to get your picture to re-appear on
<br>screen, you will need to redefine the graphics origin so that
<br>it has the same values as you would expect to be in the top
<br>right hand corner of the screen before it was turned around.
<br><br>Thus, the following diagram will explain the current layout
<br>of the screen:-
<br><br>    <span style="font-style: italic;">         -size</span>|
<br><br>           y|
<br><br> |
<br><br>|
<br><br>|
<br><br>|
<br><br>|_____________________________
<br>(0,0) <span style="font-style: italic;">-size*factor
<br></span><br>                              -x
<br><br>In other words, in the above example, you will need to
<br>alter line 120 to read:
<br><span style="font-style: italic;">120 SCALE -100,166,100:PAPER 0:CLS
<br></span><br>The program will now display the picture upside down,
<br>having now altered the orientation of the display to the
<br>following diagram:-
<br>                x
<br>    ______________________________________(0,0)
<br>   <span style="font-style: italic;">       size</span>|                    |
<br>|  |
<br>||
<br>| |
<br>||
<br>|| y
<br>      |______________________________________|
<br>        (166,100)           <span style="font-style: italic;">        size*factor
<br></span><br><h3>CROSS-REFERENCE:<br></h3><br><a style="font-style: italic;" href="KeywordsC.html#CIRCLE">CIRCLE</a>, <a style="font-style: italic;" href="KeywordsA.html#ARC">ARC</a>, <a style="font-style: italic;" href="KeywordsL.html#LINE">LINE</a> and <a style="font-style: italic;" href="KeywordsP.html#POINT">POINT</a> all rely on the current <a style="font-style: italic;" href="KeywordsS.html#SCALE">SCALE</a>.
<br><hr style="width: 100%; height: 2px;"><h1><a name="SCLR"></a>SCLR</h1><br>Syntax: <span style="font-style: italic;">SCLR colour
<br></span>Location: <span style="font-style: italic;">Fast PLOT/DRAW Toolkit
<br></span><br>This command causes the screen (pointed to by <span style="font-style: italic;">SCRBASE</span>) to be
<br>cleared with the given <span style="font-style: italic;">colour</span>. This <span style="font-style: italic;">colour</span> ranges from 0 (black)
<br>to 7 (white). There is no default.
<br><br><h3>Example:
<br></h3><br>Run this small program and watch how your screen seems to
<br>change size. The greater the difference in apparent size, the
<br>worse your monitor (there are more intelligent criteria as to
<br>the capability of your monitor, for example radiance):
<br><span style="font-style: italic;">100 MODE 4:SCRBASE
<br>110 REPeat screen_test
<br>120   FOR n=0,2,4,6: SCLR n
<br>130 END REPeat screen_test
<br></span><br><h3>NOTE:
<br></h3><br>See <span style="font-style: italic;">REFRESH</span> !
<br><br><h3>WARNING:
<br></h3><br>Never use <span style="font-style: italic;">SCLR</span> without a parameter!
<br><br>The system will crash!
<br><br><h3>CROSS-REFERENCE:<br></h3><br><a style="font-style: italic;" href="KeywordsP.html#PLOT">PLOT</a>, <a style="font-style: italic;" href="KeywordsD.html#DRAW">DRAW</a>, <a style="font-style: italic;" href="KeywordsR.html#REFRESH">REFRESH</a> and <a style="font-style: italic;" href="KeywordsS.html#SCRBASE">SCRBASE</a> are the other commands connected
<br>with this one.
<br><hr style="width: 100%; height: 2px;"><h1><a name="SCRBASE"></a>SCRBASE</h1><br>Syntax: <span style="font-style: italic;">SCRBASE </span>[<span style="font-style: italic;">adress</span>]
Location: <span style="font-style: italic;">Fast PLOT/DRAW Toolkit
<br></span><br>All commands belonging to the fast graphics Toolkit use the
<br>specified parameter set with this command as the base address
<br>for their operations: <span style="font-style: italic;">SCLR</span>, <span style="font-style: italic;">PLOT</span>, <span style="font-style: italic;">DRAW</span> and <span style="font-style: italic;">REFRESH</span>. This is intended
<br>to allow  background  drawing.  The default  address  is  the
<br>address of the visible screen, <span style="font-style: italic;">SCREEN</span>.
<br><br><h3>Example 1:
<br></h3><br>A simple demonstration and an animated version.
<br><span style="font-style: italic;">100 SCRBASE ALCHP(32768): SCLR 0
<br>110 FOR t=0 TO 2*PI STEP PI/32
<br>120   x1=188*SIN(t)+255: y1=127*COS(t)+127
<br>130   x2=188*SIN(t+PI)+255: y2=127*SIN(t+PI)+127
<br>140   DRAW x1,y1 TO x2,y2 ,7
<br>150 END FOR t
<br>160 REFRESH: CLCHP
<br>100 Pics=INT((FREE_MEM-4096)/32768)
<br>110 DIM base(Pics)
<br>120 FOR c=2*PI/Pics TO 2*PI STEP 2*PI/Pics
<br>130   base(c/2/PI*Pics)=ALCHP(32768)
<br>140   SCRBASE base(c/2/PI*Pics): SCLR 0
<br>150   FOR t=0 TO 2*PI STEP PI/4
<br>160     x1=188*SIN(t)+255: y1=127*COS(t)+127
<br>170     x2=188*SIN(t+c)+255: y2=127*SIN(t+c)+127
<br>180     DRAW x1,y1 TO x2,y2 ,7
<br>190   END FOR t
<br>200 END FOR c
<br>210 :
<br>220 REPeat Animation
<br>230   FOR c=1 TO Pics: SCRBASE base(c): REFRESH
<br>240   IF KEYROW(1)=8 THEN EXIT Animation
<br>250 END REPeat Animation
<br>260 CLCHP
<br></span><br><h3>Example 2:
<br></h3><br>Varying the base address by steps equal to the value of
<br><br><span style="font-style: italic;">SCRINC</span> (normally 128) simulates vertical scrolling. The first
<br><br>program views memory, the other one loads an uncompressed
<br><br>32K screen and then 'scrolls it in'.
<br><span style="font-style: italic;">100 FOR A=0 TO 786432 STEP 128
<br>110   SCRBASE A
<br>120   REFRESH
<br>130 END FOR A
<br></span>The second program appears on the next page.
<br><span style="font-style: italic;">100 SCRFILE$="MDV1_SCREEN_SCR"
<br>110 SCROLLSPEED=4
<br>120 :
<br>130 ADR=ALCHP(65536)
<br>140 LBYTES SCRFILE$,ADR+32768
<br>150 POKE$ ADR,FILL$(CHR$(0),32767): POKE SCREEN+32766,0
<br>160 FOR A=ADR TO ADR+32768 STEP SCROLLSPEED*SCRINC
<br>170   SCRBASE A
<br>180   REFRESH
<br>190 END FOR A
<br>200 RECHP ADR
<br></span><br><h3>CROSS-REFERENCE:<br></h3><br>See <a style="font-style: italic;" href="KeywordsS.html#SCLR">SCLR</a>, <a style="font-style: italic;" href="KeywordsP.html#PLOT">PLOT</a>, <a style="font-style: italic;" href="KeywordsD.html#DRAW">DRAW</a> and <a style="font-style: italic;" href="KeywordsR.html#REFRESH">REFRESH</a> for fast background drawing.
<br><br><a style="font-style: italic;" href="KeywordsS.html#SCR_STORE">SCR_STORE</a>  and  <a style="font-style: italic;" href="KeywordsS.html#SCR_REFRESH">SCR_REFRESH</a>  are  ideal  to  create  and  display
<br>animated displays.
<br><br>Compare <a style="font-style: italic;" href="KeywordsS.html#SCR_BASE">SCR_BASE</a>!
<br><hr style="width: 100%; height: 2px;"><h1><a name="SCREEN"></a>SCREEN</h1><br>Syntax: <span style="font-style: italic;">SCREEN
<br></span><br>or <span style="font-style: italic;">SCREEN </span>[<span style="font-style: italic;">(#ch)</span>]   <span style="font-style: italic;">(FN Toolkit only)
<br></span>Location: <span style="font-style: italic;">Beuletools, Fn
<br></span><br>The visible screen on a standard QL is actually 32K of
<br>memory. The start address of the screen is normally 131072,
<br>but   can   change   on   Minerva   and   higher   resolution
<br>implementations of the QL, so the start address should be
<br>determined before accessing the screen directly.
<br><br>The function <span style="font-style: italic;">SCREEN</span> returns that start address.
<br><br><h3>NOTE:
<br></h3><br>The FN Toolkit version allows you to specify a channel - if
<br>the channel is specified, then the start address for the
<br>screen on which that channel is open is returned. This is
<br>mainly only of use to Minerva and Amiga QDOS users who can
<br>have windows open on either the Default Screen or the Other
<br>Screen (provided their dual screen mode is active). Thus
<br><span style="font-style: italic;">SCREEN(#3)</span> can be used to find the start address of the second
<br>screen if that is where #3 is located.
<br><br><h3>CROSS-REFERENCE:<br></h3><br>See <a style="font-style: italic;" href="KeywordsS.html#SCR_BASE">SCR_BASE</a>.
<br><hr style="width: 100%; height: 2px;"><h1><a name="SCRINC"></a>SCRINC</h1><br>Syntax: <span style="font-style: italic;">SCRINC </span>[<span style="font-style: italic;">(#ch)</span>]
Location: <span style="font-style: italic;">Fn
<br></span><br>The screen width is not fixed on QDOS computers, QL
<br>Emulators and future hardware expansions (graphic cards) offer
<br>different  screen  modes  with  different  resolutions.    The
<br>function <span style="font-style: italic;">SCRINC</span> returns the screen width relating to the screen
<br>upon which the given channel (default #0) is located.
<br><br>The width is returned as the number of bytes needed to
<br>store a line of pixels: the standard QL mode 4 and mode 8
<br>therefore always return 128 = 512/4.
<br><br>However, it is not always true that the number of bytes
<br>required to store a line of pixels is equal to the number of
<br>pixels <span style="font-style: italic;">DIV 4</span> and you should therefore use this function or
<br>similar.
<br><br><h3>Example:
<br></h3><br>See the second listing at the second example for <span style="font-style: italic;">SCRBASE</span>.
<br><br><h3>CROSS-REFERENCE:<br></h3><br><a style="font-style: italic;" href="KeywordsS.html#SCREEN">SCREEN</a> returns the start address of the screen.
<br><br>See also <a style="font-style: italic;" href="KeywordsS.html#SCR_LLEN
">SCR_LLEN
</a><hr style="width: 100%; height: 2px;"><h1><a name="SCROLL"></a>SCROLL</h1><br>Syntax: <span style="font-style: italic;">SCROLL </span>[<span style="font-style: italic;">#ch,</span>]<span style="font-style: italic;"> distance </span>[<span style="font-style: italic;">,area</span>]
Location: <span style="font-style: italic;">QL ROM
<br></span><br>This command allows you to move the contents of a given
<br>window (default #1) up or down by a specified number of pixels
<br>(<span style="font-style: italic;">distance</span>). A positive value for <span style="font-style: italic;">distance</span> will move the contents of
<br>the window downwards, whereas a negative <span style="font-style: italic;">distance</span> will move them
<br>upwards.
<br><br>As the contents are moved, if they move outside of the
<br>limits of the window, they will be lost. The space left by the
<br>movement of the window's contents, will be filled with the
<br>current <span style="font-style: italic;">PAPER</span> colour.
<br><br>If you use the third parameter (<span style="font-style: italic;">area</span>), you can specify that
<br>only part of the window is to be moved, by using the following
<br>values:-
<br><br>0       This is the default - move whole window.
<br><br>1       Move the area above the text cursor line.
<br><br>2       Move the area below the text cursor line.
<br><br>If you wish to move other areas of a window, the easiest
<br>method is to open another window over that part of the window
<br>which you want to move, and then use <span style="font-style: italic;">SCROLL</span> and/or <span style="font-style: italic;">PAN</span> on that
<br>new window (see example below).
<br><br><h3>Example:
<br></h3><br>A short demonstration routine of <span style="font-style: italic;">SCROLL</span> and <span style="font-style: italic;">PAN</span>:
<br><span style="font-style: italic;">100 MODE 4
<br>110 WINDOW 440,200,32,16:PAPER 2:CLS
<br>120 INK 7:CSIZE 3,1
<br>130 AT 0,6:PRINT 'QL KEYWORD MANUAL'
<br>140 OPEN #3,scr_448x200a32x16:PAPER#3,2
<br>150 AT 5,6:PRINT 'QL KEYWORD MANUAL'
<br>160 FOR i=1 TO 37
<br>170   WINDOW #3,40,200,432,16
<br>180   SCROLL #3,20
<br>190   PAUSE 5
<br>200   WINDOW #3,440,20,32,16
<br>210   PAN #3,40
<br>220   PAUSE 5
<br>230   WINDOW #3,40,200,32,16
<br>240   SCROLL #3,-20
<br>250   PAUSE 5
<br>260   WINDOW #3,440,20,32,196
<br>270   PAN #3,-40
<br>280   PAUSE 5
<br>290 END FOR i
<br>300 CSIZE 0,0
<br></span><br><h3>NOTE:
<br></h3><br>QL ROMs (other than v6.41 of THOR XVI, SMS and v1.63/v1.64
<br>of Minerva) allow <span style="font-style: italic;">SCROLL</span> to be used to access various direct
<br>TRAP #3 calls to the operating system (as with <span style="font-style: italic;">PAN</span> and <span style="font-style: italic;">CLS</span>).
<br><br>The first parameter to be supplied represents the D1
<br>parameter  in  machine  code,  whereas  the  second  parameter
<br>represents D0. In any case, both parameters must be integers
<br>(ie. in the range -32768..32767).
<br><br>Normally to find out number to give D0, take the routine's
<br>D0 value and subtract 24 (eg. IOG.DOT=48, 48-24=24). However,
<br>if the routine's value is 24 or less, subtract 24 and then add
<br>this negative value to 128.
<br><br>Some useful routines which can be accessed are:
<br><span style="font-style: italic;">SCROLL #3,0,121</span> moves the cursor to column 0 in #3
<br>       (IOW.SCOL, D0=$11)
<br><span style="font-style: italic;">SCROLL 0,24</span>     has the same effect as <span style="font-style: italic;">CLS 16</span>, ie. it calls
<br>(IOG.DOT - D0=$30), which effectively
<br>carries out the command POINT 0,0.
<br><span style="font-style: italic;">SCROLL x,17</span>      sets the ink colour to <span style="font-style: italic;">x
<br></span>(IOW.SINK,D0=$29)
<br><span style="font-style: italic;">SCROLL #3,n%,42</span>  sets the file pointer in #3 to <span style="font-style: italic;">n%
<br></span>(IOF.POSA,D0=$42)
<br><span style="font-style: italic;">SCROLL #3,n%,43</span>  should move the file pointer in #3 on <span style="font-style: italic;">n%
<br></span>places (IOF.POSR,D0=$43)
<br><br>Unfortunately, not all values for both parameters will work
<br>on all ROMs and this is a hit and miss way of programming the
<br>QL. Luckily, the wealth of Toolkits available should mean that
<br>there is a legal means of accessing these routines, using
<br>Toolkit keywords, including <span style="font-style: italic;">MTRAP</span> and <span style="font-style: italic;">QTRAP</span>.
<br><br><h3>CROSS-REFERENCE:<br></h3><br><a style="font-style: italic;" href="KeywordsP.html#PAN">PAN</a> allows you to move the contents of a window sideways.
<br><a style="font-style: italic;" href="KeywordsW.html#WINDOW">WINDOW</a> allows you to specify the area of the screen which a
<br>window covers.
<br><br><a style="font-style: italic;" href="KeywordsI.html#IO_TRAP">IO_TRAP</a> allows you to access machine code routines directly.
<br><br>See also <a style="font-style: italic;" href="KeywordsQ.html#QTRAP">QTRAP</a>, <a style="font-style: italic;" href="KeywordsB.html#BTRAP">BTRAP</a> and <a style="font-style: italic;" href="KeywordsM.html#MTRAP">MTRAP</a>.
<br><hr style="width: 100%; height: 2px;"><h1><a name="SCROF"></a>SCROF</h1><br>Syntax: <span style="font-style: italic;">SCROF
<br></span>Location: <span style="font-style: italic;">Ecran Manager
<br></span><br>This command forces the current screen to become invisible
<br>- the effect of <span style="font-style: italic;">SCROF</span> lasts until the next task switch under the
<br>Pointer Environment or until one of the standard <span style="font-style: italic;">MODE</span> commands
<br>(ie. not dealing with dual screen mode) or <span style="font-style: italic;">NEW</span> are issued.
<br><br><h3>Example:
<br></h3><span style="font-style: italic;">SCROF
<br></span><br><h3>NOTE:
<br></h3><br>See <span style="font-style: italic;">SSAVE</span>.
<br><br><h3>CROSS-REFERENCE:<br></h3><br><a style="font-style: italic;" href="KeywordsS.html#SCRON">SCRON</a> switches the screen to visible.
<br><hr style="width: 100%; height: 2px;"><h1><a name="SCRON"></a>SCRON</h1><br>Syntax: <span style="font-style: italic;">SCRON
<br></span>Location: <span style="font-style: italic;">Ecran Manager
<br></span><br>The <span style="font-style: italic;">SCRON</span> command makes the screen visible once again after
<br>it has been disabled with <span style="font-style: italic;">SCROF</span>.
<br><br><h3>Example:
<br></h3><br><span style="font-style: italic;">SCRON
<br></span><br><h3>NOTE:
<br></h3><br>See <span style="font-style: italic;">SSAVE</span>.
<br><br><h3>CROSS-REFERENCE:<br></h3><br><a style="font-style: italic;" href="KeywordsS.html#SCROF">SCROF</a>.
<br><hr style="width: 100%; height: 2px;"><h1><a name="SCR2DIS"></a>SCR2DIS</h1><br>Syntax: <span style="font-style: italic;">SCR2DIS
<br></span>Location: <span style="font-style: italic;">Super Gold Card
<br></span><br>Some programs make use of the QL's ability to support a
<br>second screen (on a standard QL this is normally stored at
<br>$28000 (hex) - it overwrites the system variables which are
<br>moved to another area in memory).  You can therefore see why
<br>it is important never to make assumptions about the location
<br>of the screen or system variables in memory (use <span style="font-style: italic;">SCREEN</span> or
<br><span style="font-style: italic;">SYS_BASE</span> instead).
<br><br>Minerva extends this second screen even further, allowing
<br>you to operate the computer in two-screen mode, with programs
<br>being started up on one of two screens (thus allowing you to
<br>have completely different displays on each screen)  see <span style="font-style: italic;">MODE</span>.
<br><br>The main problem with this second screen is that it slows
<br>down the operation of the computer and therefore if you do not
<br>intend to use the second screen, you may wish to disable it.
<br><br>You can disable the second screen with the command <span style="font-style: italic;">SCR2DIS</span> -
<br>this setting will be stored in memory by the Gold Card and the
<br>second screen will henceforth always be disabled.
<br><br><h3>WARNING:
<br></h3><br>Some programs (mainly games) will not work properly with
<br>the second screen disabled.
<br><br><h3>CROSS-REFERENCE:<br></h3><br><a style="font-style: italic;" href="KeywordsS.html#SCR2EN">SCR2EN</a> re-enables the second screen again.
<br><hr style="width: 100%; height: 2px;"><h1><a name="SCR2EN"></a>SCR2EN</h1><br>Syntax: <span style="font-style: italic;">SCR2EN
<br></span>Location: <span style="font-style: italic;">Super Gold Card
<br></span><br>This command is the complementary command to <span style="font-style: italic;">SCR2DIS</span> - it
<br>enables the QL's second screen and is also memorised by the
<br>Super Gold Card so that the second screen will always be
<br>available for use by programs.
<br><br><h3>NOTE:
<br></h3><br>In order to make proper use of the second screen, you will
<br>still need to startup Minerva in dual screen mode and use the
<br>appropriate <span style="font-style: italic;">MODE</span> commands.
<br><br>Non-Minerva QLs can still use the second screen by using
<br>various machine code techniques.
<br><br><h3>CROSS-REFERENCE:<br></h3><br>See <a style="font-style: italic;" href="KeywordsS.html#SCR2DIS">SCR2DIS</a> for more information.
<br><hr style="width: 100%; height: 2px;"><h1><a name="SCR_BASE"></a>SCR_BASE</h1><br>Syntax: <span style="font-style: italic;">SCR_BASE </span>[<span style="font-style: italic;">(#ch)</span>]
Location: <span style="font-style: italic;">ATARI_REXT (v2.25+), SMSQ/E
<br></span><br>This function returns the base address of the screen linked
<br>to the specified channel (default #0), this is normally 131072
<br>on standard QLs but can alter on other resolutions or if dual
<br>screen mode is supported.
<br><br>On machines which support higher resolutions, the screen
<br>base will only be at the standard address of 131072 if you
<br>configure the machine to start up in 512x256 and even here
<br>there  is  no  guarantee  -  see  the  documentation  for  the
<br>particular QL resolution you are using.
<br><br><h3>NOTE:
<br></h3><br>If the specified channel is not open then Invalid Channel
<br>ID will be reported.  However, if no channel is specified and
<br>#0 is not open, then a special window will be opened for #0 on
<br>screen, which may destroy what is already on screen.
<br><br><h3>CROSS-REFERENCE:<br></h3><br><a style="font-style: italic;" href="KeywordsS.html#SCREEN">SCREEN</a> is similar.
<br><br>See also <a style="font-style: italic;" href="KeywordsS.html#SCR_XLIM">SCR_XLIM</a>, <a style="font-style: italic;" href="KeywordsS.html#SCR_YLIM">SCR_YLIM</a> and <a style="font-style: italic;" href="KeywordsS.html#SCR_LLEN">SCR_LLEN</a>.
<br><br><a style="font-style: italic;" href="KeywordsA.html#A_OLDSCR">A_OLDSCR</a> can help some older software to work.
<br><br>You can also use <a style="font-style: italic;" href="KeywordsP.html#PRINT CHAN_L(#1,50)">PRINT CHAN_L(#1,50)</a> instead of <a style="font-style: italic;" href="KeywordsS.html#SCR_BASE">SCR_BASE</a>.
<br><hr style="width: 100%; height: 2px;"><h1><a name="SCR_LLEN"></a>SCR_LLEN</h1><br>Syntax: <span style="font-style: italic;">SCR_LLEN </span>[<span style="font-style: italic;">(#ch)</span>]
Location: <span style="font-style: italic;">ATARI_REXT (v2.25+), SMSQ/E
<br></span><br>This function returns the number of bytes required to hold
<br>one line of pixels on the current screen resolution attached
<br>to the specified channel (default #0).  On a standard QL
<br>512x256 resolution, this is normally 128 bytes but can alter
<br>on other resolutions.
<br><br><h3>NOTE:
<br></h3><br>As with <span style="font-style: italic;">SCR_BASE</span>, if the specified channel is not open then
<br>Invalid Channel ID will be reported.  However, if no channel
<br>is specified and #0 is not open, then a special window will be
<br>opened for #0 on screen, which may destroy what is already on
<br>screen.
<br><br><h3>WARNING:
<br></h3><br>You should never assume that the number of bytes required
<br>to store a line is the number of pixels <span style="font-style: italic;">DIV 4</span> - always use this
<br>function instead.
<br><br><h3>CROSS-REFERENCE:<br></h3><br><a style="font-style: italic;" href="KeywordsS.html#SCRINC">SCRINC</a> is similar.
<br><br>See also <a style="font-style: italic;" href="KeywordsS.html#SCR_XLIM">SCR_XLIM</a>, <a style="font-style: italic;" href="KeywordsS.html#SCR_YLIM">SCR_YLIM</a> and <a style="font-style: italic;" href="KeywordsS.html#SCR_BASE">SCR_BASE</a>.
<br><br>On QL ROMs after JM, you can also use <a style="font-style: italic;" href="KeywordsP.html#PRINT CHAN_B%(#1,104)">PRINT CHAN_B%(#1,104)</a>.
<br><br><h3><br><hr style="width: 100%; height: 2px;">SCR_REFRESH<br></h3><br>Syntax: <span style="font-style: italic;">SCR_REFRESH address
<br></span>Location: <span style="font-style: italic;">SuperWindow Toolkit
<br></span><br>This command copies a screen (or a portion of a screen)
<br>which has been saved in memory at the specified address using
<br><span style="font-style: italic;">SCR_STORE</span> back to the same position on the visible display
<br>screen.
<br><br><h3>NOTE:
<br></h3><br>It is unknown at present whether these commands check for
<br>the start  address  of  the screen  and  its  dimensions  and
<br>therefore they  may  not  work on  some  higher  resolutions.
<br>Unfortunately, we  do  not  have access  to  the  toolkit  at
<br>present.
<br><br><h3>CROSS-REFERENCE:<br></h3><br><a style="font-style: italic;" href="KeywordsS.html#SCR_STORE">SCR_STORE</a> stores a window or rectangle taken from the display.
<br><br>See also <a style="font-style: italic;" href="KeywordsW.html#W_SHOW">W_SHOW</a> and <a style="font-style: italic;" href="KeywordsR.html#REFRESH">REFRESH</a>.
<br><hr style="width: 100%; height: 2px;"><h1><a name="SCR_SAVE"></a>SCR_SAVE</h1><br>Syntax: <span style="font-style: italic;">SCR_SAVE flag
<br></span>Location: <span style="font-style: italic;">MutiBASIC v4.0+ (DIY Toolkit - Vol M)
<br></span><br>This command is used to specify whether the current screen
<br>display and mode should be stored along with the program when
<br>the <span style="font-style: italic;">UNLOAD</span> or <span style="font-style: italic;">RESAVE</span> commands are used.
<br><br>The setting depends on the value of <span style="font-style: italic;">flag</span>:
<br>0 Do not store the screen display and mode.
<br>1 (This is the default).  Store the screen display and
<br>mode so that it is redisplayed when <span style="font-style: italic;">RELOAD</span> is used.
<br>-1This tells <span style="font-style: italic;">RELOAD</span> to ignore the screen details (if any)
<br>stored with the program - use <span style="font-style: italic;">SCR_SAVE 1</span> if you want to
<br>see them.
<br><br><h3>NOTE:
<br></h3><br>Beware that this toolkit only supports 512x256 resolution
<br>and expects the screen base to be at 131072.
<br><br><h3>CROSS-REFERENCE:<br></h3><br><a style="font-style: italic;" href="KeywordsU.html#UNLOAD">UNLOAD</a> contains more details about this toolkit.
<br><hr style="width: 100%; height: 2px;"><h1><a name="SCR_SIZE"></a>SCR_SIZE</h1><br>Syntax: <span style="font-style: italic;">SCR_SIZE </span>[<span style="font-style: italic;">(#channel)</span>]
<br><br>or <span style="font-style: italic;">SCR_SIZE (width_x,width_y </span>[[<span style="font-style: italic;">,pos_x</span>]<span style="font-style: italic;">,pos_y</span>]<span style="font-style: italic;"> )
<br></span>Location: <span style="font-style: italic;">SuperWindow Toolkit
<br></span><br>This function will return the space in bytes, a window
<br>(default #1) or rectangle on the screen, needs to be stored
<br>with <span style="font-style: italic;">SCR_STORE</span>.
<br><br>Windows are specified just by reference to their channel
<br>number,  whereas  rectangles  by  their  width  and  height.
<br>Naturally, the size of any shape is independent from its
<br>position but the co-ordinates may be also added as parameters
<br>without invoking an error message - or influencing the result
<br>of <span style="font-style: italic;">SCR_SIZE</span>.
<br><br><h3>WARNING:
<br></h3><br><span style="font-style: italic;">SCR_SIZE</span> with a channel number will not work correctly if the
<br>Window Manager is present because of the different window
<br>definition blocks. Use either the second syntax or on a
<br>standard QL calculate the size yourself:
<br><br><span style="font-style: italic;">size=8+width_x*width_y/4
<br></span><br><h3>CROSS-REFERENCE:<br></h3><br><a style="font-style: italic;" href="KeywordsS.html#SCR_STORE">SCR_STORE</a> stores a part of the screen in RAM and <a style="font-style: italic;" href="KeywordsS.html#SCR_REFRESH
">SCR_REFRESH
</a>copies it back.
<br><br>See also <a style="font-style: italic;" href="KeywordsW.html#WMAN$">WMAN$</a>.
<br><br><a style="font-style: italic;" href="KeywordsC.html#CHAN_W%">CHAN_W%</a> is much more flexible.
<br><hr style="width: 100%; height: 2px;"><h1><a name="SCR_STORE"></a>SCR_STORE</h1><br>Syntax: <span style="font-style: italic;">SCR_STORE </span>[<span style="font-style: italic;">#channel,</span>]<span style="font-style: italic;"> address
<br></span><br>or <span style="font-style: italic;">SCR_STORE width,height,x,y TO address
<br></span>Location: <span style="font-style: italic;">SuperWindow Toolkit
<br></span><br>This command allows you to store a part of the screen at
<br>the given <span style="font-style: italic;">address</span> in RAM. The section of the screen to be stored
<br>can be either a window channel number (default #1) or the
<br>dimensions of a rectangle. The amount of memory <span style="font-style: italic;">SCR_STORE</span> needs
<br>is returned by <span style="font-style: italic;">SCR_SIZE</span>.
<br><br><span style="font-style: italic;">SCR_STORE</span> needs eight bytes plus the actual amount of space
<br>taken up by the section of the screen. These four words (one
<br>word consists of two bytes) are kept at the start of the
<br>storage area and contain the size and position of the screen
<br>part as passed by the second syntax above. They can easily be
<br>read like this:
<br><br><span style="font-style: italic;">width = PEEK_W (adress)
<br><br>height = PEEK_W (adress+2)
<br><br>x = PEEK_W (adress+4)
<br><br>y = PEEK_W (adress+6)
<br></span><br><h3>Example:
<br></h3><br>The <span style="font-style: italic;">SCR_STORE</span> and <span style="font-style: italic;">SCR_REFRESH</span> commands are ideal tools to create
<br><br>and show animations. The actual speed of <span style="font-style: italic;">SCR_REFRESH</span> is
<br><br>independent from the contents of the screen, so it does not
<br><br>matter how long it took to create the pictures... Enjoy it.
<br><span style="font-style: italic;">100 wx=70: wy=70: px=100: py=100
<br>110 OPEN#3,"scr_"&wx&"x"&wy&"a"&px&"x"&py: CLS#3
<br>120 size=SCR_SIZE(wx,wy): DIM adr(20)
<br>130 bx=2: by=2: pmax=10
<br>140 :
<br>150 FOR p=1 TO pmax
<br>160   adr(p)=ALCHP(size)
<br>170   FOR x=0 TO wx-bx STEP bx
<br>180     a=2*SQRT(p)*x/wx-SQRT(p)
<br>190     FOR y=0 TO wy-by STEP by
<br>200       b=2*SQRT(p)*y/wy-SQRT(p)
<br>210       z=((a*a+b*b)^^(a*b-b*b)) MOD 7
<br>220       BLOCK#3,bx,by,x,y,z
<br>230     END FOR y
<br>240   END FOR x
<br>250   SCR_STORE wx,wy,px,py TO adr(p)
<br>260 END FOR p
<br>270 :
<br>280 REPeat Animation
<br>290   FOR p=1 TO pmax: SCR_REFRESH adr(p)
<br>300   FOR p=pmax-1 TO 2 STEP -1: SCR_REFRESH adr(p)
<br>310   IF KEYROW(1)=8 THEN EXIT Animation
<br>320 END REPeat Animation
<br>330 CLCHP
<br></span><br><h3>CROSS-REFERENCE:<br></h3><br>See <a style="font-style: italic;" href="KeywordsS.html#SCR_REFRESH">SCR_REFRESH</a> and <a style="font-style: italic;" href="KeywordsS.html#SCR_SIZE">SCR_SIZE</a>. See also <a style="font-style: italic;" href="KeywordsW.html#W_STORE">W_STORE</a> and <a style="font-style: italic;" href="KeywordsW.html#W_CRUNCH">W_CRUNCH</a>.
<br><br>Use <a style="font-style: italic;" href="KeywordsA.html#ALCHP">ALCHP</a> to set aside some memory to hold the copy of the
<br>window.  Use <a style="font-style: italic;" href="KeywordsR.html#RECHP">RECHP</a> to remove that memory definition.
<br><hr style="width: 100%; height: 2px;"><h1><a name="SCR_XLIM"></a>SCR_XLIM</h1><br>Syntax: <span style="font-style: italic;">SCR_XLIM </span>[<span style="font-style: italic;">(#ch)</span>]
Location: <span style="font-style: italic;">SMSQ/E
<br></span><br>This function is the same as <span style="font-style: italic;">QFLIM(#ch,0)</span> except that the
<br>channel parameter is optional (it defaults to #0).
<br><br><h3>NOTE:
<br></h3><br>As with <span style="font-style: italic;">SCR_BASE</span>, if the specified channel is not open then
<br>Invalid Channel ID will be reported.  However, if no channel
<br>is specified and #0 is not open, then a special window will be
<br>opened for #0 on screen, which may destroy what is already on
<br>screen.
<br><br><h3>CROSS-REFERENCE:<br></h3><br><a style="font-style: italic;" href="KeywordsQ.html#QFLIM">QFLIM</a> and <a style="font-style: italic;" href="KeywordsX.html#XLIM">XLIM</a> are similar.
<br><br>See also <a style="font-style: italic;" href="KeywordsD.html#DISP_SIZE">DISP_SIZE</a> and <a style="font-style: italic;" href="KeywordsS.html#SCR_YLIM
">SCR_YLIM
</a><hr style="width: 100%; height: 2px;"><h1><a name="SCR_YLIM"></a>SCR_YLIM</h1><br>Syntax: <span style="font-style: italic;">SCR_YLIM </span>[<span style="font-style: italic;">(#ch)</span>]
Location: <span style="font-style: italic;">SMSQ/E
<br></span><br>This function is the same as <span style="font-style: italic;">QFLIM(#ch,1)</span> except that the
<br>channel parameter is optional (it defaults to #0).
<br><br><h3>NOTE:
<br></h3><br>As with <span style="font-style: italic;">SCR_BASE</span>, if the specified channel is not open then
<br>Invalid Channel ID will be reported.  However, if no channel
<br>is specified and #0 is not open, then a special window will be
<br>opened for #0 on screen, which may destroy what is already on
<br>screen.
<br><br><h3>CROSS-REFERENCE:<br></h3><br><a style="font-style: italic;" href="KeywordsQ.html#QFLIM">QFLIM</a> and <a style="font-style: italic;" href="KeywordsY.html#YLIM">YLIM</a> are similar.
<br><br>See also <a style="font-style: italic;" href="KeywordsS.html#SCR_XLIM">SCR_XLIM</a>, <a style="font-style: italic;" href="KeywordsS.html#SCR_BASE">SCR_BASE</a> and <a style="font-style: italic;" href="KeywordsS.html#SCR_LLEN">SCR_LLEN</a>.
<br><hr style="width: 100%; height: 2px;"><h1><a name="SDATE"></a>SDATE</h1><br>Syntax: <span style="font-style: italic;">SDATE year,month,day,hours,minutes,seconds
<br></span><br>or <span style="font-style: italic;">SDATE year,month,day,hours,minutes</span>  <span style="font-style: italic;">(SMS v2.57+)
<br></span><br>or <span style="font-style: italic;">SDATE time </span>      <span style="font-style: italic;">(Minerva, SMS)
<br><br>   </span>or <span style="font-style: italic;">SDATE TO time</span>    <span style="font-style: italic;">(THOR XVI)
<br></span>Location: <span style="font-style: italic;">QL ROM
<br></span><br>The QL has an internal clock which contains the current
<br>date and time. Unfortunately, this clock is corrupted every
<br>time that the QL is switched on and off (and even in some
<br>cases when the QL is reset).  This means that the clock has to
<br>be set manually every time that the system is re-booted.
<br>Because of this, various battery-backed clocks have appeared
<br>on the market which retain the time whilst the QL is turned
<br>off and then the QL clock is generally reset to the same time
<br>as the battery backed clock when it is switched back on.
<br><br>This command allows you to set the internal QL clock to a
<br>specified date and time. Each parameter in the first syntax
<br>must be a numeric value.
<br><br>The second syntax is similar to the first, but is only
<br>supported on later versions of SMS.  This variant accepts just
<br>five parameters and assumes that the seconds is to be set to
<br>zero.
<br><br>The third and fourth syntaxes allow you to set the time and
<br>date by the number of seconds since Midnight on 1st January
<br>1961. This thus allows you to copy the date from one QL to
<br>another very simply over the Network:
<br><span style="font-style: italic;">100 temp_file$='n1_ram1_temp'
<br>110 er=FOP_NEW(temp_file$)
<br>120 IF er>0
<br>130  CLOSE #er:SDATE TO FUPDT(\temp_file$)
<br>140  DELETE temp_file$
<br>150 END IF
<br></span><br><h3>Example:
<br></h3><span style="font-style: italic;">SDATE 1993,1,1,0,0,0
<br></span><br>sets the internal clock to the start of 1993.
<br><br><h3>NOTE 1:
<br></h3><br>This may also affect battery backed clocks - see their
<br>instructions. In particular on the THOR XVI the battery backed
<br>clock is automatically reset, whereas on earlier THORs the
<br>command <span style="font-style: italic;">SET_CLOCK</span> was needed.
<br><br><h3>NOTE 2:
<br></h3><br>Unfortunately, current versions of Minerva and SMS will not
<br>accept the THOR's syntax, nor vice versa.
<br><br><h3>NOTE 3:
<br></h3><br>On the QXL, before v2.57 of SMS the time would not be set
<br>correctly if <span style="font-style: italic;">seconds=0</span> or <span style="font-style: italic;">seconds=1</span>.
<br><br>The clock could still be wrong by 1 second until v2.73
<br>which fixed this problem on MOST PCs.
<br><br><h3>CROSS-REFERENCE:<br></h3><br><a style="font-style: italic;" href="KeywordsP.html#PROT_DATE">PROT_DATE</a> allows you to prevent <a style="font-style: italic;" href="KeywordsS.html#SDATE">SDATE</a> from altering a battery
<br>backed clock.
<br><br href="KeywordsA.html#ADATE">ADATE</a> allows you to alter the time by a specified number of
<br>seconds.
<br><br href="KeywordsD.html#DATE">DATE</a> lets you read the current date and time as a single
<br>figure.
<br><br><a style="font-style: italic;" href="KeywordsD.html#DATE$">DATE$</a> and <a style="font-style: italic;" href="KeywordsD.html#DAY$">DAY$</a> return various details about the current date
<br>and time. These functions can also be used to find out details
<br>concerning a given date without having to use <a style="font-style: italic;" href="KeywordsS.html#SDATE ">SDATE </a>beforehand
<br>to change the system date.
<br><br href="KeywordsA.html#A_SDATE">A_SDATE</a> and <a style="font-style: italic;" href="KeywordsS.html#SET_CLOCK">SET_CLOCK</a> alter the battery backed clocks on the
<br>ST/QL Emulator and THOR respectively.
<br><hr style="width: 100%; height: 2px;"><h1><a name="SDP_DEV"></a>SDP_DEV</h1><br>Syntax: <span style="font-style: italic;">SDP_DEV device
<br></span>Location: <span style="font-style: italic;">Gold Card, Trump Card, SDUMP_REXT, ST/QL
<br></span><br>The command <span style="font-style: italic;">SDP_DEV</span> allows you to dictate where output from
<br>the <span style="font-style: italic;">SDUMP</span> device should be sent. Initially, all output is sent
<br>to ser, however you may wish to alter this.
<br><br>Under SMS, you will need to <span style="font-style: italic;">LRESPR SDUMP_REXT</span> provided on the
<br>distribution disk.
<br><br><h3>Example:
<br></h3><br><span style="font-style: italic;">SDP_DEV n1_flp1_Dump
<br></span><br>will cause all future output from the SDUMP device to be
<br>sent to a file flp1_Dump on the machine with <span style="font-style: italic;">NetID=1</span> in the
<br>Network.
<br><br><h3>CROSS-REFERENCE:<br></h3><br><a style="font-style: italic;" href="KeywordsS.html#SDUMP">SDUMP</a> allows you to send output to the specified device from
<br>SuperBASIC.
<br><hr style="width: 100%; height: 2px;"><h1><a name="SDP_KEY"></a>SDP_KEY</h1><br>Syntax: <span style="font-style: italic;">SDP_KEY </span>[<span style="font-style: italic;">key$</span>]
Location: <span style="font-style: italic;">Gold Card, Trump Card, SDUMP_REXT, ST/QL
<br></span><br>In order to facilitate easy screen dumps, the command
<br><span style="font-style: italic;">SDP_KEY</span> will set up a hotkey which when pressed together with
<br>&lt;ALT&gt; will cause the whole of the screen starting at $20000 to
<br>be sent to the SDUMP device.
<br><br>Under SMS, you will first need to <span style="font-style: italic;">LRESPR SDUMP_REXT</span> provided on
<br>the distribution disk to use this command.
<br><br>As with <span style="font-style: italic;">ALTKEY</span>, if the specified key$ is in upper case, you
<br>will need to press &lt;ALT&gt;&lt;SHIFT&gt; together with the key, or
<br>&lt;ALT&gt; with the key if capslock is on.
<br><br><span style="font-style: italic;">SDP_KEY</span> without any parameters inhibits the hotkey.
<br><br><h3>Example:
<br></h3><br><span style="font-style: italic;">SDP_KEY p
<br></span><br>will cause the screen to be dumped each time that &lt;ALT&gt;&lt;P&gt;
<br>is pressed.
<br><br><h3>CROSS-REFERENCE:<br></h3><br><a style="font-style: italic;" href="KeywordsS.html#SDP_DEV">SDP_DEV</a> allows you to alter where the output is to go.
<br><br>See <a style="font-style: italic;" href="KeywordsS.html#SDP_SET">SDP_SET</a> and <a style="font-style: italic;" href="KeywordsS.html#SDUMP">SDUMP</a>.
<br><hr style="width: 100%; height: 2px;"><h1><a name="SDP_SET"></a>SDP_SET</h1><br>Syntax: <span style="font-style: italic;">SDP_SET printer </span>[<span style="font-style: italic;">,scale </span>[<span style="font-style: italic;">,inverse </span>[<span style="font-style: italic;">,random</span>]]]
Location: <span style="font-style: italic;">Gold Card, Trump Card, SDUMP_REXT, ST/QL
<br></span><br><span style="font-style: italic;">SDP_SET</span> allows you to choose the type of printer attached to
<br>the output device, together with how the output is to appear.
<br>Under SMS, you will first need to <span style="font-style: italic;">LRESPR SDUMP_REXT</span> provided on the
<br>distribution disk to use this command.
<br><br>There are currently 23 types of <span style="font-style: italic;">printer</span> supported, numbered
<br>1...23. You can also specify the print <span style="font-style: italic;">scale</span> to be used and
<br>whether or not the screen is to be printed in <span style="font-style: italic;">inverse</span> colours (by
<br>setting the <span style="font-style: italic;">inverse</span> parameter to 1).
<br><br>You can even specify that a <span style="font-style: italic;">random</span> element is to be taken
<br>into account in converting the colours to gray shades on the
<br>printer (again by setting the <span style="font-style: italic;">random</span> parameter to 1).
<br><br>The effects of these different parameters all depend upon
<br>the printer attached to the output port and the size and shape
<br>of the area being dumped.
<br><br>The <span style="font-style: italic;">scale</span> will affect the density of the dots on the printed
<br>page. Unfortunately, this does mean that at some of the lower
<br>densities, not all of the screen can be printed on an 80
<br>column printer (See the columns headed Max Width in the table
<br>below).
<br><br>If any one of the parameters is not specified, that
<br>particular setting will remain unchanged.
<br><br>If you do not have one of the printers currently supported,
<br>try out the various dump routines to see which one best suits
<br>your needs.  For example, users of the Epson Inkjet range of
<br>printers will find that the Epson LQ2500 24 pin colour driver
<br>is very effective.
<br><br>The range of <span style="font-style: italic;">printer</span>s and <span style="font-style: italic;">scale</span>s currently supported is as
<br>follows:
<br><span style="font-style: italic;"><h3>    MODE 4 SCREENS    MODE 8 SCREENS
<br>PrinterScaleDotsLines|DotMax<hr style="width: 100%; height: 2px;">Ratio|DotMax<hr style="width: 100%; height: 2px;">Ratio<br>Per InPer In|RatioWidth|RatioWidth
<br></h3>1 Epson MX80112072|1x1512<hr style="width: 100%; height: 2px;">1.23|<br> or similar16072||1x1256<hr style="width: 100%; height: 2px;">1.23
<br>26072|1x2480<hr style="width: 100%; height: 2px;">1.23|2x2240<hr style="width: 100%; height: 2px;">1.23<br>312072|2x2480<hr style="width: 100%; height: 2px;">1.23|4x2240<hr style="width: 100%; height: 2px;">1.23
<br>||
<br>2 Epson FX8019072|1x1512<hr style="width: 100%; height: 2px;">0.92|<br> additional16072||1x1256<hr style="width: 100%; height: 2px;">1.23
<br> formats29072|1x1512<hr style="width: 100%; height: 2px;">0.92|2x1256<hr style="width: 100%; height: 2px;">0.92<br>39072|2x2360<hr style="width: 100%; height: 2px;">0.92|4x2180<hr style="width: 100%; height: 2px;">0.92
<br>||
<br>3 Epson FX10019072|1x1512<hr style="width: 100%; height: 2px;">0.92|<br> wide16072||1x1256<hr style="width: 100%; height: 2px;">1.23
<br> carriage290    72  | 1x1512  0.92 | 2x1  256<hr style="width: 100%; height: 2px;">0.92<br>390    72  | 2x2512<hr style="width: 100%; height: 2px;">0.92| 4x2  256<hr style="width: 100%; height: 2px;">0.92
<br></span><br><h3>
<br></h3><span style="font-style: italic;"><h3>    MODE 4 SCREENS    MODE 8 SCREENS
<br>PrinterScaleDotsLines|DotMax<hr style="width: 100%; height: 2px;">Ratio|DotMax<hr style="width: 100%; height: 2px;">Ratio<br>Per InPer In|RatioWidth|RatioWidth
<br></h3>4 Epson JX80190    72  | 1x1512  0.92 |
<br>160    72  |                 |1x1256<hr style="width: 100%; height: 2px;">1.23<br>290    72  | 1x1512<hr style="width: 100%; height: 2px;">0.92| 2x1256<hr style="width: 100%; height: 2px;">0.92
<br>39072  | 2x2360<hr style="width: 100%; height: 2px;">0.92 | 4x2  180<hr style="width: 100%; height: 2px;">0.92<br>||
<br>5 Epson LQ250018060 | 1x1512<hr style="width: 100%; height: 2px;">0.99 |<br> 8 pin160    60  |                 | 1x1  256<hr style="width: 100%; height: 2px;">1.48
<br>2120    60  | 2x1512<hr style="width: 100%; height: 2px;">0.74 |<br>||
<br>5 Epson LQ250028060  |                 | 2x1  256<hr style="width: 100%; height: 2px;">0.99<br> 8 pin380    60  | 2x2512<hr style="width: 100%; height: 2px;">0.99 | 4x2  256<hr style="width: 100%; height: 2px;">0.99
<br>||
<br>6 Epson LQ25001120180  | 1x2512<hr style="width: 100%; height: 2px;">0.99 | 1x1  256<hr style="width: 100%; height: 2px;">0.99<br> 24 pin2180   180  | 2x3512<hr style="width: 100%; height: 2px;">1.11 | 3x2  256<hr style="width: 100%; height: 2px;">0.99
<br>3180   180  | 3x4512<hr style="width: 100%; height: 2px;">0.99 | 6x4  256<hr style="width: 100%; height: 2px;">0.99<br>||
<br>7 Epson LQ2500180    60  | 1x1512<hr style="width: 100%; height: 2px;">0.99 |<br> 8 pin       160   60  |                 | 1x1256<hr style="width: 100%; height: 2px;">1.48
<br> colour     2120    60  | 2x1512<hr style="width: 100%; height: 2px;">0.74 |<br>28060  |                 | 2x1256<hr style="width: 100%; height: 2px;">0.99
<br>380    60  | 2x2512<hr style="width: 100%; height: 2px;">0.99 | 4x2 256 0.99<br>||
<br>8 Epson LQ25001120   180  | 1x2512  0.99 | 1x1  256 0.99
<br> 24 pin     2180180  | 2x3 512  1.11 | 3x2  256<hr style="width: 100%; height: 2px;">0.99<br> colour      3180   180  | 3x4512  0.99 | 6x4  256<hr style="width: 100%; height: 2px;">0.99
<br>||
<br>9 Brother HR4112072  | 1x1512<hr style="width: 100%; height: 2px;">1.23 |<br>16072  |                 | 1x1  256<hr style="width: 100%; height: 2px;">1.23
<br>26072  | 1x2480<hr style="width: 100%; height: 2px;">1.23 | 2x2  240 1.23<br>3120    72  | 2x2480<hr style="width: 100%; height: 2px;">1.23 | 4x2 240 1.23
<br>||
<br>10 Olivetti 1110    72  | 1x1512<hr style="width: 100%; height: 2px;">1.13 |<br> JP101 1110   108|                 |1x1256<hr style="width: 100%; height: 2px;">0.75
<br>2110   108  | 1x1 512<hr style="width: 100%; height: 2px;">0.75 | 3x2  256<hr style="width: 100%; height: 2px;">1.00<br>3110    72  | 2x2 440  1.13|4x2  220 1.13
<br>||
<br>11 Seikosha 16063  | 1x1480<hr style="width: 100%; height: 2px;">0.70 | 1x1  256<hr style="width: 100%; height: 2px;">1.41<br> GP-100A 260    63  | 1x2 480  1.41 | 2x2  240  1.41
<br>||
<br>12 Seikosha 160    72  | 1x1 480  0.61 | 1x1256<hr style="width: 100%; height: 2px;">1.23<br> GP-250X 260    72  | 1x2 480  1.23 | 2x2  240 1.23
<br>||
<br>13 Seikosha 180    80  | 1x1 512  0.74 | 1x1256 1.48
<br> GP-700A 280    80  | 1x2 512  1.48 | 2x2  256  1.48
<br>380    80  | 1x2512  1.48 | 3x2  212  0.99
<br>||
<br>14 Canon180    80  | 1x1 512  0.74 | 1x1 256 1.48
<br> PJ1080A 280    80  | 1x2 512  1.48 | 2x2  256<hr style="width: 100%; height: 2px;">1.48<br>38080  | 1x2 512  1.48 | 3x2  212 0.99
<br>||
<br>15 Centronics 17572  | 1x1 512  0.77 | 1x1  256 1.42
<br> 739 275    72  | 1x1 512  0.77 | 2x1  256 0.77
<br>375    72  | 2x2 300<hr style="width: 100%; height: 2px;">0.77 | 3x2  200 1.03<br>||
<br></span><br><h3>
<br></h3><span style="font-style: italic;"><h3> MODE 4 SCREENS      MODE 8 SCREENS
<br>PrinterScaleDotsLines|DotMax<hr style="width: 100%; height: 2px;">Ratio|DotMax<hr style="width: 100%; height: 2px;">Ratio<br>Per InPer In|RatioWidth|RatioWidth
<br></h3>16 C.Itoh 7500112072  | 1x1 512  1.23 |
<br>160    72  |                 | 1x1  256 1.23
<br>2160    72  | 2x1512  0.82 |
<br>2120    72 |                 | 2x1  256 1.23
<br>3120    72  |2x2 480  1.23 | 4x2  240 1.23
<br>||
<br>17 Toshiba  1180   180 | 1x2 512<hr style="width: 100%; height: 2px;">1.48 | 2x2  256 1.48<br> TH 2100H2180   180  | 2x3  512  1.11 | 3x2  256  0.72
<br> 24 pin  3180   180 | 3x4 512  0.99 | 6x4  256 0.99
<br>||
<br>18 Brother170    72  | 1x1 512  0.72 | 1x1  256 1.44
<br> 8056270    72  | 1x1  512  0.72 | 2x1  256  0.72
<br> 370    72  | 2x2 280  0.72 | 3x2  186 0.96
<br>||
<br>19 Epson MX1001120    72  | 1x1 512  1.23 |
<br> or similar  160    72  |                 | 1x1  256 1.23
<br> 260    72  | 1x2512  1.23 | 2x2  256  1.23
<br> 3120    72  | 2x2 512  1.23 | 4x2  256 1.23
<br>||
<br>20 Tandy   1100    72  | 1x1 512  1.03|
<br> DMP 105 160    72  |                 | 1x1  256  1.23
<br>260    72  | 1x2 512  1.23|
<br>2100    72  |                 | 2x1  256<hr style="width: 100%; height: 2px;">1.03<br>3100    72  | 2x2 400  1.03 | 4x2  200  1.03
<br>||
<br>21 OKI     1100    66  | 1x1  512  1.12 |
<br> Microline  160    66  |                 | 1x1256<hr style="width: 100%; height: 2px;">1.35<br> 82 /84  2100    66  | 1x1  512  1.12 | 2x1  256  1.12
<br> OK Writer3100    66  | 2x2 400  1.12 | 4x2  200 1.12
<br>||
<br>22 Fastext 80 172    72  | 1x1512  0.74 |
<br>160    72  |                 | 1x1  256 1.23
<br>  260    72  | 1x2 480  1.23 | 2x2  240  1.23
<br> 372    72  | 2x3 288  1.11 | 3x2  192  0.99
<br>||
<br>23 MT-80185    82  | 1x1  512  0.77 | 1x1  256 1.53
<br>      2170    82  | 2x1  512  0.77 | 3x1  256  1.02
<br>   3170    82  | 3x2  425  1.02 | 6x2  212  1.02
<br></span><br>The resultant dump will depend both on the current screen
<br>mode and the chosen <span style="font-style: italic;">scale</span>. The <span style="font-style: italic;">dot ratio</span> column shown above
<br>represents the size of the resultant picture as a ratio of the
<br>original. For example, if the <span style="font-style: italic;">Dot ratio</span> is 1x1 and you are
<br>outputting a screen of 512x256 pixels at 120 dots per inch and
<br>72 lines per inch, you can expect the resultant picture to be
<br>512/120 inches across by 256/72 inches down. If however, the
<br><span style="font-style: italic;">Dot ratio</span> was 1x2 (with the same number of dots per inch and
<br>lines per inch as above), then the resultant picture will be
<br>512/120 inches across by 2*256/72 inches down.
<br><br>The <span style="font-style: italic;">ratio</span> column in the above table shows the resultant
<br>ratio between the vertical size/horizontal size. The nearer
<br>that this ratio is to 1.00, the more circular your screen
<br>circles will appear on paper.
<br><br>The default is <span style="font-style: italic;">printer</span> 1, <span style="font-style: italic;">scale</span> 1, <span style="font-style: italic;">inverse</span> 1, <span style="font-style: italic;">random</span> 0.
<br><br><h3>NOTE:
<br></h3><br>There is no check on the parameters, other than to ensure
<br>that there are the correct number of parameters.
<br><br><h3>CROSS-REFERENCE:<br></h3><br><a style="font-style: italic;" href="KeywordsS.html#SDUMP">SDUMP</a> actually prints the screen using the chosen format.
<br><hr style="width: 100%; height: 2px;"><h1><a name="SDUMP"></a>SDUMP</h1><br>Syntax: <span style="font-style: italic;">SDUMP #ch
<br></span><br>or <span style="font-style: italic;">SDUMP </span>[<span style="font-style: italic;">width,height,xpos,ypos</span>]
<br><br>or <span style="font-style: italic;">SDUMP </span>[{<span style="font-style: italic;">address</span> |<span style="font-style: italic;"> address,width,height,xpos,ypos</span>}]
Location: <span style="font-style: italic;">Gold Card, Trump Card, SDUMP_REXT, ST/QL
<br></span><br>The command <span style="font-style: italic;">SDUMP</span> allows you to dump a screen (or part of a
<br>screen) to a printer (or a file), using one of the in-built
<br>formats (one of which will hopefully work on your printer!) -
<br>see <span style="font-style: italic;">SDP_SET</span>.
<br><br>Under SMS, you will first need to <span style="font-style: italic;">LRESPR SDUMP_REXT</span> provided on
<br>the distribution disk to use this command.
<br><br>The first variant is the simplest, it will dump the whole
<br>of the contents of the specified window #ch to the printer.
<br><br>If the second variant is used, <span style="font-style: italic;">SDUMP</span> will dump the whole of
<br>the screen defined by <span style="font-style: italic;">width</span>X<span style="font-style: italic;">height</span>A<span style="font-style: italic;">xpos</span>X<span style="font-style: italic;">ypos</span> (using absolute pixel
<br>co-ordinates). If no parameters are supplied, <span style="font-style: italic;">SDUMP</span> will dump
<br>the whole screen.
<br><br>The third variant of the command is intended to dump a
<br>screen which has been stored under the Pointer Environment's
<br><span style="font-style: italic;">PSAVE</span> function. The address returned by <span style="font-style: italic;">PSAVE</span> should be used as
<br>the  first  parameter  of  the  <span style="font-style: italic;">SDUMP</span>  command.  If  no  further
<br>parameters  are  specified,  the  whole  area  stored  at  the
<br>specified address will be dumped, otherwise you can specify
<br>the area of that buffer to be dumped in much the same way that
<br>you can specify an area of the screen to be dumped.
<br><br><h3>Example:
<br></h3><span style="font-style: italic;">OPEN #3,scr_448x200a32x16:SDUMP #3:CLOSE #3
<br></span><br>and
<br><span style="font-style: italic;">SDUMP 448,200,32,16
<br></span><br>are the same.
<br><br><h3>NOTE 1:
<br></h3><br>Some early versions of <span style="font-style: italic;">SDUMP</span> expect the screen to start at
<br>131072 and be 512x256 pixels in size and can therefore get
<br>very confused in dual screen mode on Minerva and Amiga QDOS.
<br>However, later versions supplied with SMS check the screen
<br>size and base when the toolkit is linked into memory and
<br>expect it to remain the same afterwards!
<br><br><h3>NOTE 2:
<br></h3><br><span style="font-style: italic;">SDUMP</span> does not work on Minerva, unless you have v2.23 (or
<br>later) of the Trump Card / Gold Card. If you have an earlier
<br>version of Toolkit II and want to use <span style="font-style: italic;">SDUMP</span>, you have to ensure
<br>that another Job (such as <span style="font-style: italic;">FSERVE</span>) is running when <span style="font-style: italic;">SDUMP</span> is issued.
<br><br><h3>NOTE 3:
<br></h3><br>Once <span style="font-style: italic;">SDUMP</span> has started its work, it is not easy to abort it
<br>early - any further attempt to use the serial port will result
<br>in the error 'In Use'.
<br><br><h3>NOTE 4:
<br></h3><br>If you have directed the output to a file, the file will be
<br>automatically overwritten if necessary.
<br><br><h3>CROSS-REFERENCE:<br></h3><br><a style="font-style: italic;" href="KeywordsS.html#SDP_SET">SDP_SET</a> allows you to alter the printer format.
<br><br href="KeywordsS.html#SDP_KEY">SDP_KEY</a> allows you to set up a hotkey to dump the screen.
<br><br href="KeywordsS.html#SDP_DEV">SDP_DEV</a> allows you to alter the device where the dump is to
<br>be sent.
<br><hr style="width: 100%; height: 2px;"><h1><a name="SEARCH"></a>SEARCH</h1><br>Syntax: <span style="font-style: italic;">SEARCH (add1 TO add2, tofind$)
<br></span><br>or <span style="font-style: italic;">SEARCH (add1 TO add2, tofind$ </span>[<span style="font-style: italic;">!</span>]<span style="font-style: italic;"> )</span><span style="font-style: italic;">(BTool only)
<br></span>Location: <span style="font-style: italic;">TinyToolkit, BTool
<br></span><br>This function scans RAM memory from address <span style="font-style: italic;">add1</span> to <span style="font-style: italic;">add2</span> for
<br>the given string <span style="font-style: italic;">tofind$</span> and returns the address of its first
<br>occurrence or zero if it was not found.
<br><br>The search is not case-dependent in the TinyToolkit version
<br>whilst BTool introduces an optional switch: a '<span style="font-style: italic;">!</span>' after <span style="font-style: italic;">tofind$
<br></span>disables case-sensitivity and reduces speed.
<br><br><h3>Example:
<br></h3><br>The following small program will scan the whole memory, ROM
<br>included, from <span style="font-style: italic;">adr</span> onwards for <span style="font-style: italic;">string$</span>. Tiny-Toolkit <span style="font-style: italic;">SEARCH</span> is
<br>assumed, <span style="font-style: italic;">PHYSTOP</span> is also necessary:
<br><span style="font-style: italic;">100 string$="dev  v" : REMark what we are looking for
<br>110 add=0            : REMark start address
<br>120 MODE 4: CSIZE 0,0: PAPER 0: INK 5: CLS
<br>130 REPeat searching
<br>140   add=SEARCH(add+1,PHYSTOP-add,string$)
<br>150   IF NOT add THEN EXIT searching
<br>160   PRINT \"Address ="!add
<br>170   PRINT PEEK$(add-20,19);
<br>180   INK 7: PRINT PEEK$(add,LEN(string$));
<br>190   INK 5: PRINT PEEK$(add+LEN(string$),20)
<br>200 END REPeat searching
<br>210 PRINT "That's all."
<br></span><br><h3>NOTE:
<br></h3><br>The search string <span style="font-style: italic;">tofind$</span> will always be found at least twice
<br>in memory because <span style="font-style: italic;">tofind$</span> itself needs to be stored somewhere.
<br><br><h3>CROSS-REFERENCE:<br></h3><br><a style="font-style: italic;" href="KeywordsP.html#PEEK$">PEEK$</a>, <a style="font-style: italic;" href="KeywordsD.html#DEV_USE">DEV_USE</a>.
<br><br>See other implementation of <a style="font-style: italic;" href="KeywordsS.html#SEARCH">SEARCH</a>.
<br><br>See <a style="font-style: italic;" href="KeywordsM.html#MSEARCH">MSEARCH</a>, <a style="font-style: italic;" href="KeywordsS.html#SEARCH_MEM">SEARCH_MEM</a> and <a style="font-style: italic;" href="KeywordsT.html#TTFINDM">TTFINDM</a> also.
<br><hr style="width: 100%; height: 2px;"><h1><a name="SEARCH"></a>SEARCH</h1><br>Syntax: <span style="font-style: italic;">SEARCH (array$, tofind$, start, compare </span>[<span style="font-style: italic;">,row</span>]<span style="font-style: italic;"> )
<br></span>Location: <span style="font-style: italic;">ARRAY
<br></span><br>The function <span style="font-style: italic;">SEARCH</span> searches in a two or three-dimensional
<br>string array <span style="font-style: italic;">array$</span> for the string <span style="font-style: italic;">tofind$</span>. The search is not
<br>case-sensitive but nevertheless very fast (as the example
<br>shows).
<br><br><span style="font-style: italic;">SEARCH</span> will always look at one row only - there is just one
<br>if the array is two-dimensional but for three-dimensional
<br>string arrays (where there are in fact two-dimensions of
<br>strings because the third dimension is the maximum string
<br>length) the optional row parameter which defaults to the first
<br>row can be used to select a certain row.
<br><br>The <span style="font-style: italic;">start</span> parameter allows you to tell <span style="font-style: italic;">SEARCH</span> from which
<br>element in the <span style="font-style: italic;">row</span> onwards it should look (remember that the
<br>first element is indexed with 0). <span style="font-style: italic;">compare</span> specifies the number of
<br>characters at the start of each entry to ignore, so 0 will
<br>search the whole entry for <span style="font-style: italic;">tofind$</span>.
<br><br>The search stops if <span style="font-style: italic;">tofind$</span> was found  in an entry but not if
<br>the entry and <span style="font-style: italic;">tofind$</span> are identical.
<br><br><span style="font-style: italic;">SEARCH</span> returns the entry index or -1 if no suitable entry was
<br>found.
<br><br><h3>Example:
<br></h3><br>Lines 100 to 170 of the following example initialise the
<br><span style="font-style: italic;">name$</span> array with <span style="font-style: italic;">n</span> (here 1000) random strings of varying length,
<br>from four to 10 characters; this can take a while. After that,
<br>the  whole  array  is  scanned  for  the  string  QL  and  all
<br>occurrences  are  listed.  If  you  want  to  check  out  the
<br>tremendous speed of <span style="font-style: italic;">SEARCH</span>, amend line 100, set n to 10000 and
<br>assure that at least 100K of memory is free for the huge
<br>array: you will be surprised, even the 10000 entries are
<br>searched in next to no time!
<br><span style="font-style: italic;">100 n = 1000: DIM name$(n,10)
<br>110 FOR i = 1 TO n
<br>120   name$(i) = ""
<br>130   FOR j = 1 TO 10
<br>140     name$(i) = name$(i) & CHR$(RND(65 TO 90))
<br>150     IF j > 3 AND NOT RND(5) THEN EXIT j
<br>160   END FOR j
<br>170 END FOR i
<br>180 :
<br>190 first = 1
<br>200 REPeat loop
<br>210   found = SEARCH(name$, "QL", first, 0)
<br>220   IF found < 0 THEN EXIT loop
<br>230   PRINT name$(found)
<br>240   IF found = n THEN EXIT loop: ELSE first = found + 1
<br>250 END REPeat loop
<br></span><br><h3>
<br></h3><br>Minerva and SMS users  can use integers for <span style="font-style: italic;">n</span>, <span style="font-style: italic;">i</span>, <span style="font-style: italic;">j</span>, <span style="font-style: italic;">first
<br></span>and <span style="font-style: italic;">found</span> to speed up things, so replace them by <span style="font-style: italic;">n%</span>, <span style="font-style: italic;">i%</span>, <span style="font-style: italic;">j%</span>,
<br><span style="font-style: italic;">first%</span> and <span style="font-style: italic;">found%</span>.
<br><br><h3>CROSS-REFERENCE:<br></h3><br>Use <a style="font-style: italic;" href="KeywordsI.html#INSTR">INSTR</a> to locate a sub-string in a string.
<br><br><a style="font-style: italic;" href="KeywordsI.html#INARRAY%">INARRAY%</a> is similar.
<br><br>See the other implementation of <a style="font-style: italic;" href="KeywordsS.html#SEARCH">SEARCH</a>.
<br><hr style="width: 100%; height: 2px;"><h1><a name="SEARCH_MEM"></a>SEARCH_MEM</h1><br>Syntax: <span style="font-style: italic;">SEARCH_MEM (add1 TO add2, tofind$)
<br></span>Location: <span style="font-style: italic;">MSEARCH (DIY Toolkit - Vol X)
<br></span><br>This function is very similar to the main <span style="font-style: italic;">MSEARCH</span> function
<br>provided by this toolkit.  It is however limited to case-
<br>dependent searches and therefore is even quicker than <span style="font-style: italic;">MSEARCH</span>.
<br><br><h3>CROSS-REFERENCE:<br></h3><br>See <a style="font-style: italic;" href="KeywordsS.html#SEARCH">SEARCH</a> and <a style="font-style: italic;" href="KeywordsT.html#TTFINDM">TTFINDM</a> also.
<br><br><a style="font-style: italic;" href="KeywordsM.html#MSEARCH">MSEARCH</a> is a variant on this version.
<br><hr style="width: 100%; height: 2px;"><h1><a name="SELect"></a>SELect</h1><br>Syntax: <span style="font-style: italic;">SELect
<br></span>Location: <span style="font-style: italic;">QL ROM
<br></span><br>This keyword forms an integral part of the <span style="font-style: italic;">SELect ON</span> structure
<br>identifier and has no use on its own. If you try to enter it
<br>on its own, the error 'Bad Name' will be generated.
<br><br><h3>CROSS-REFERENCE:<br></h3><br>Please see <a style="font-style: italic;" href="KeywordsS.html#SELect ON">SELect ON</a>!
<br><hr style="width: 100%; height: 2px;"><h1><a name="SELect ON"></a>SELect ON</h1><br>Syntax: <span style="font-style: italic;">SELect ON var
<br></span>Location: <span style="font-style: italic;">QL ROM
<br></span><br>This command is used to mark the start of a SuperBASIC
<br>structure which is an extremely quick means of testing for
<br>various values of a variable and taking a different course of
<br>action in a program according to those values. Unfortunately,
<br>the standard form of this command only allows you to test for
<br>different values of a numeric variable (eg. <span style="font-style: italic;">SELect ON a$</span> is not
<br>allowed).
<br><br>There are actually two forms of the SuperBASIC structure:
<br><br><span style="font-style: italic;">SELect ON var=range: statement </span><sup>*</sup>[<span style="font-style: italic;">:statement</span>]<sup>**</sup>[<span style="font-style: italic;">:=range:statement</span> <sup>*</sup>[<span style="font-style: italic;">:statement</span>]<sup>*</sup>]<sup>*
<br></sup><br>or
<br><br><span style="font-style: italic;">SELect ON var
<br></span><br><sup>*</sup>[[<span style="font-style: italic;">ON var</span>]<span style="font-style: italic;"> = range:statement </span><sup>*</sup>[<span style="font-style: italic;">:statement</span>]<sup>*</sup> ]<sup>*
<br></sup><br>..
<br><br><span style="font-style: italic;">END SELect
<br></span><br><span style="font-style: italic;">range</span> can be any one, or mixtures of, the following:
<br><br><span style="font-style: italic;">expression
<br></span><br><span style="font-style: italic;">expression TO expression
<br></span><br><span style="font-style: italic;">REMAINDER
<br></span><br>The first of these variants (in this and all SuperBASIC
<br>structures) is known as an in-line structure, as the entire
<br>structure appears on the same program line. This does not need
<br><span style="font-style: italic;">END SELect</span> to mark the end of the structure.
<br><br>After the main <span style="font-style: italic;">SELect ON var</span> statement, the interpreter looks
<br>for a list of possible values, and then if the value of the
<br>given variable falls within the range of possible values, the
<br>program takes action according to the statements which follow
<br>that value in the list. The interpreter will use the first
<br>range of values into which it can fit the variable and once
<br>found, all statements up until (but excluding) the next range
<br>in the list will be treated as applying to that range (whether
<br>they appear on the same line or not).
<br><br>Once all of the statements applying to that range have been
<br>executed, control passes to the statement following the <span style="font-style: italic;">END SELect
<br></span>statement (or if the in-line form of the structure is used,
<br>and <span style="font-style: italic;">END SELect</span> does not appear on that line, then control passes
<br>to the next line).
<br><br>The way in which matches are made when checking whether a
<br>value falls within a range depends on whether range is a
<br>single number (eg. <span style="font-style: italic;">ON var=10</span>) or various values (eg. <span style="font-style: italic;">ON var=10 to 20</span>).
<br><br>If the former, the value need only be approximately equal
<br>to  range  (ie.  to  within  1  part  in  10<sup>7</sup>,  for  instance:
<br>100.0000045==100!). However, if the latter format is used (eg.
<br><span style="font-style: italic;">SELect ON a=90 TO 100</span>), a match will only be found if the given value
<br>is within the absolute range (eg. in the above example,
<br>100.0000045 would not be matched!).
<br><br>If the long form of the structure is used, and <span style="font-style: italic;">ON var</span> is used
<br>within the body of the structure, this must be the same
<br>variable as that used in the initial <span style="font-style: italic;">SELect ON</span> statement.
<br><br><h3>Example 1:
<br></h3><span style="font-style: italic;">10 SELect ON x=1,10 TO 100,500:PRINT 'x'
<br></span><br><h3>Example 2:
<br></h3><span style="font-style: italic;">100 SELect ON test
<br>110   =0,2,4,6,8,10:PRINT 'Even Number'
<br>120   =REMAINDER:PRINT 'Odd Number'
<br>130 END SELect
<br></span><br><h3>Example 3:
<br></h3><br>A re-write of the example given for <span style="font-style: italic;">ON...GO SUB</span>:
<br><span style="font-style: italic;">100 no_of_locations=3
<br>110 start=0
<br>120 PRINT_LOC 2
<br>130 DEFine PROCedure PRINT_LOC(xa)
<br>135   xa=xa+start
<br>140   SELect ON xa
<br>150     =1:PRINT 'This is location 1'
<br>160     =2
<br>165        PRINT 'This is location 2'
<br>170     =3:PRINT 'This is location 3'
<br>180     =REMAINDER:PRINT 'Undefined Location'
<br>185                 RETurn
<br>190   END SELect
<br>200   PRINT 'What now?:RETurn
<br>210 END DEFine
<br></span><br><h3>NOTE 1:
<br></h3><br>Pre JS ROMs and SMS allow you to enter string and integer
<br>variables into the <span style="font-style: italic;">SELect</span> statement, but they will not work
<br>unless you used a SuperBASIC compiler. Later ROMs, report a
<br>'bad line' error unless you have Minerva.
<br><br><h3>NOTE 2:
<br></h3><br>On JS ROMs, you cannot use a parameter passed to a
<br><span style="font-style: italic;">PROCedure</span> or <span style="font-style: italic;">FuNction</span> as the variable in a <span style="font-style: italic;">SELect ON</span> statement unless
<br>it appears as the last parameter in the list in the definition
<br>line. If you do try to break this rule, you will end up with a
<br>'bad name' error. The answer is to copy the parameter to a
<br>temporary variable.
<br><br><h3>NOTE 3:
<br></h3><br>As you may have noticed, unlike other SuperBASIC structures
<br>which will expand a command typed into the full structure name
<br>if you type just the capital letters (eg. <span style="font-style: italic;">DEFPROC</span> becomes <span style="font-style: italic;">DEFine
<br>PROCedure</span>), <span style="font-style: italic;">SELON</span> will not be expanded to <span style="font-style: italic;">SELect ON</span>. You will need to
<br>type <span style="font-style: italic;">SEL ON</span> instead.
<br><br><h3>NOTE 4:
<br></h3><br>To maximise the speed of the <span style="font-style: italic;">SELect ON</span> command, ensure that
<br>the most common matches appear at the start of the definition
<br>block.
<br><br><h3>NOTE 5:
<br></h3><br>Except  under  SMS,  <span style="font-style: italic;">SELect  ON</span>  can  only  cope  with  simple
<br>variables, for example:
<br><span style="font-style: italic;">SELect ON a
<br></span><br>is acceptable. Compare:
<br><span style="font-style: italic;">SELect ON a(2)
<br>SELect ON s*10
<br></span><br>or
<br><span style="font-style: italic;">SELect ON CODE(a$)
<br></span><br>All of these are acceptable on SMS but cannot currently be
<br>compiled.
<br><br>Although lines such as:
<br><br><span style="font-style: italic;">SELect ON CODE</span>   and
<br><br><span style="font-style: italic;">SELect ON INKEY$
<br></span><br>might be accepted by the interpreter, the lines contained
<br>within the block will be ignored (other than <span style="font-style: italic;">=REMAINDER</span> matches).
<br>On SMS both of these give an 'error in expression' when <span style="font-style: italic;">RUN</span>.
<br><br><h3>MINERVA NOTES:
<br></h3><br>Minerva supports string and variables in <span style="font-style: italic;">SELect ON</span> statements.
<br>The check for characters is normally case independent. For
<br>example:
<br><span style="font-style: italic;">SELect ON a$:='hello'
<br></span><br>will find both <span style="font-style: italic;">a$='HeLLo'</span> and <span style="font-style: italic;">a$='hello'</span>. If however, you want
<br>the match to be exact (case dependent), then something along
<br>the lines of:
<br><br><span style="font-style: italic;">SELect ON a$:='hello' TO 'hello'
<br></span><br>must be used.
<br><br>Unfortunately,  you  still  cannot  <span style="font-style: italic;">SELect  ON</span>  machine  code
<br>functions (for example, <span style="font-style: italic;">INKEY$</span>), which will have no effect, or
<br>slice the string, which will cause a 'bad line' error.
<br><br>A short example of the additional flexibility is a check
<br>for a response to a simple question {eg. Overwrite (y/n)?}:
<br><span style="font-style: italic;">100 REPeat loop
<br>110   A$=INKEY$(-1)
<br>120   SELect ON A$
<br>130     ='yn'&chr$(27):EXIT loop
<br>140   END SELect
<br>150 END REPeat loop
<br></span><br>is the same as:
<br><span style="font-style: italic;">100 REPeat loop
<br></span><span style="font-style: italic;">110   A=CODE(INKEY$(-1))
<br>120   SELect ON A:
<br>130     =89,121,78,110,27:EXIT loop
<br>140   END SELect
<br>150 END REPeat loop
<br></span><br>Minerva also supports integer variables, such as: <span style="font-style: italic;">SELect ON a%</span>.
<br>This is an extremely fast means of testing a condition.
<br>However, due to the nature of integers, tests will only match
<br>the integer part of range.
<br><br><h3>SMS NOTE:
<br></h3><br>This has greatly extended the flexibility of <span style="font-style: italic;">SELect ON</span> - see
<br>in particular Note 5 above.
<br><br>It will also allow integer variables as the <span style="font-style: italic;">SELect</span>, but
<br>unfortunately not string <span style="font-style: italic;">SELect</span> variables at present.  If you
<br>try to do so, the error 'Incorrectly structured SELect clause'
<br>will be reported.
<br><br>It will however, even support things like:
<br><span style="font-style: italic;">SELect ON CODE(INKEY$(#1))
<br></span><br>Unfortunately, SMS pre v2.90 had problems in dealing with
<br>in-line <span style="font-style: italic;">SELect ON</span> statements.  Prior to v2.89 an error would be
<br>generated if an <span style="font-style: italic;">END SELect</span> statement did not appear in an in-line
<br>definition, and v2.89 reported an error if <span style="font-style: italic;">END SELect</span> did appear!!
<br><br><h3>CROSS-REFERENCE:<br></h3><br>A slower means of testing for values is the structure
<br><a style="font-style: italic;" href="KeywordsI.html#IF...END IF">IF...END IF</a>.
<br><br><a style="font-style: italic;" href="KeywordsE.html#END SELect">END SELect</a> ends a <a style="font-style: italic;" href="KeywordsS.html#SELect ON">SELect ON</a> structure.
<br><hr style="width: 100%; height: 2px;"><h1><a name="SEND_EVENT"></a>SEND_EVENT</h1><br>Syntax: <span style="font-style: italic;">SEND_EVENT </span>{<span style="font-style: italic;">jobname$</span> | <span style="font-style: italic;">jobID</span> | <span style="font-style: italic;">jobnr,tag</span> }<span style="font-style: italic;">, event
<br></span>Location: <span style="font-style: italic;">SMSQ/E v2.71+
<br></span><br>With v1.51 of the Window Manager (and v2.71 of SMSQ/E), the
<br>possibilty of Job Events was introduced.  This is basically a
<br>simple way of making one program wait until it receives
<br>notification from another Job that up to eight different
<br>events has occured.
<br><br>The events are undefined and simply represented by the
<br>eight numbers : 1, 2, 4, 8, 16, 32, 64, 128.
<br><br>This command allows you to tell a specified job that those
<br>events have occured - several events may be notified by adding
<br>together the various values of event.
<br><br>The job to be notified can be represented by either its:
<br><br>(1) Jobname (eg. 'SBASIC')
<br><br>(2) Job ID number (returned by <span style="font-style: italic;">OJOB</span> for example).
<br><br>(3) Job number and Job Tag (returned by <span style="font-style: italic;">JOBS</span>).
<br><br><h3>Example:
<br></h3><span style="font-style: italic;">SEND_EVENT OJOB(1),2+8
<br></span><br>Notifies the current job's owner that events 2 and 8 have
<br>occured.
<br><br><h3>CROSS-REFERENCE:<br></h3><br>A job can test to see if an event has occured with
<br><a style="font-style: italic;" href="KeywordsW.html#WAIT_EVENT">WAIT_EVENT</a>.
<br><hr style="width: 100%; height: 2px;"><h1><a name="SERMAWS"></a>SERMAWS</h1><br>Syntax: <span style="font-style: italic;">SERMAWS acc%, wup%
<br></span>Location: <span style="font-style: italic;">SERMouse
<br></span><br>This command is used to set two parameters which control
<br>the effect that moving the serial mouse has on the on-screen
<br>pointer under the Pointer Environment.
<br><br>The first parameter sets the speed at which the pointer
<br>will accelerate across the screen (this can be any value in
<br>the range 0...9).  A standard value is 6.
<br><br>The second parameter sets the initial speed of the pointer.
<br>A standard value is 3.
<br><br>The values can also be set by configuring the SERMouse
<br>file.
<br><br><h3>CROSS-REFERENCE:<br></h3><br><a style="font-style: italic;" href="KeywordsS.html#SERMPTR">SERMPTR</a> makes the mouse driver affect the Pointer only.
<br><br>Qpac 2 allows you to set the same parameters from the
<br>Sysdef menu.
<br><br>Also refer to<a style="font-style: italic;" href="KeywordsS.html#SERMSPEED">SERMSPEED</a> and <a style="font-style: italic;" href="KeywordsS.html#SERMON">SERMON</a>.
<br><br>See the appendix on Mouse Drivers for more information.
<br><hr style="width: 100%; height: 2px;"><h1><a name="SERMCUR"></a>SERMCUR</h1><br>Syntax: <span style="font-style: italic;">SERMCUR
<br></span>Location: <span style="font-style: italic;">SERMouse
<br></span><br>The SERMouse driver allows you to use a Mouse to control
<br>either the Pointer (under the Pointer Environment) or the
<br>Basic cursor (used in <span style="font-style: italic;">INPUT</span> commands or similar).
<br><br>This command forces the mouse to control the Basic cursor
<br>provided that the following condition is met:
<br><br>There is a channel currently open which is awaiting for
<br>screen input with a visible cursor.
<br><br>If you switch to a program which is reading the pointer
<br>(ie. a program which uses the pointer interface) then the
<br>command <span style="font-style: italic;">SERMPTR</span> is automatically called.
<br><br><h3>CROSS-REFERENCE:<br></h3><br><a style="font-style: italic;" href="KeywordsS.html#SERMPTR">SERMPTR</a> switches to Pointer Mode.
<br><br>See also <a style="font-style: italic;" href="KeywordsS.html#SERMSPEED">SERMSPEED</a>.
<br><br>You can also switch to cursor mode by hitting the left hand
<br>mouse button twice in quick succession.
<br><hr style="width: 100%; height: 2px;"><h1><a name="SERMOFF"></a>SERMOFF</h1><br>Syntax: <span style="font-style: italic;">SERMOFF
<br></span>Location: <span style="font-style: italic;">SERMouse
<br></span><br>This command removes the Serial Mouse Driver.
<br><br><h3>CROSS-REFERENCE:<br></h3><br><a style="font-style: italic;" href="KeywordsS.html#SERMON">SERMON</a> will reactivate the Driver.
<br><br>Compare <a style="font-style: italic;" href="KeywordsS.html#SERMWAIT
">SERMWAIT
</a><hr style="width: 100%; height: 2px;"><h1><a name="SERMON"></a>SERMON</h1><br>Syntax: <span style="font-style: italic;">SERMON
<br></span>Location: <span style="font-style: italic;">SERMouse
<br></span><br>The serial mouse driver must always be loaded into Resident
<br>Procedure Space (for example with <span style="font-style: italic;">RESPR</span> or <span style="font-style: italic;">LRESPR</span>) before any Jobs
<br>are <span style="font-style: italic;">EXEC</span>uted.  However, if you have Hermes or SuperHermes
<br>fitted, you can configure the Serial Mouse driver so that it
<br>does not automatically start up after being linked into BASIC.
<br><br>This command can be used to initialise and startup the
<br>driver  either  following  a  <span style="font-style: italic;">SERMOFF</span>  command  or  if  you  have
<br>configured the driver not to automatically start up after
<br>being linked into BASIC.
<br><br><span style="font-style: italic;">SERMON</span> should also be used to reactivate the driver following
<br>a <span style="font-style: italic;">SERMWAIT</span> command.
<br><br><h3>CROSS-REFERENCE:<br></h3><br><a style="font-style: italic;" href="KeywordsS.html#SERMOFF">SERMOFF</a> and <a style="font-style: italic;" href="KeywordsS.html#SERMWAIT">SERMWAIT</a> are complementary functions.
<br><br>See the Appendix on Mouse Drivers for further details.
<br><hr style="width: 100%; height: 2px;"><h1><a name="SERMPTR"></a>SERMPTR</h1><br>Syntax: <span style="font-style: italic;">SERMPTR
<br></span>Location: <span style="font-style: italic;">SERMouse
<br></span><br>This command switches the Serial Mouse Driver into Pointer
<br>Mode, so that the movements of the Serial Mouse affect the
<br>Pointer on screen, allowing you to control programs which make
<br>use of the Pointer Environment.
<br><br>This is the default mode following loading the driver or a
<br><span style="font-style: italic;">SERMON</span> command.
<br><br><h3>CROSS-REFERENCE:<br></h3><br>See also <a style="font-style: italic;" href="KeywordsS.html#SERMCUR">SERMCUR</a>.
<br><hr style="width: 100%; height: 2px;"><h1><a name="SERMRESET"></a>SERMRESET</h1><br>Syntax: <span style="font-style: italic;">SERMRESET
<br></span>Location: <span style="font-style: italic;">SERMouse
<br></span><br>This command should never really be needed, particularly if
<br>you are using the Serial Mouse with Hermes or SuperHermes.
<br><br>This command resets the chip which controls the serial
<br>ports and should only be necessary if you notice the Pointer
<br>or Cursor moving on screen uncontrollably.
<br><br><h3>CROSS-REFERENCE:<br></h3><br>Other causes of this problem may be the wrong speed
<br>settings - see <a style="font-style: italic;" href="KeywordsS.html#SERMAWS">SERMAWS</a>, <a style="font-style: italic;" href="KeywordsS.html#SERMSPEED">SERMSPEED</a> and <a style="font-style: italic;" href="KeywordsB.html#BAUD">BAUD</a>.
<br><hr style="width: 100%; height: 2px;"><h1><a name="SERMSPEED"></a>SERMSPEED</h1><br>Syntax: <span style="font-style: italic;">SERMSPEED mul%, div%, acc% </span>[<span style="font-style: italic;">,cursormul%, cursordiv%</span>]
Location: <span style="font-style: italic;">SERMouse
<br></span><br>This command allows you to set various parameters to
<br>dictate the speed and resolution of the mouse.
<br><br>As a mouse moves, it sends a stream of data to the computer
<br>containing details of the direction moved and the distance
<br>moved.  These details are sent every few microseconds and
<br>converted by the driver to x,y coordinates on screen.  The
<br>speed at  which  these  details  are sent  is  known  as  the
<br>resolution of the mouse.
<br><br>This command allows you to alter the resolution of the
<br>mouse so that you do not have to move the mouse as far to get
<br>the pointer (or cursor) on screen to move across the whole
<br>screen.
<br><br>The <span style="font-style: italic;">mul%</span> and <span style="font-style: italic;">div%</span> parameters can be in the range 0..127 (with
<br>0 disabling this feature - the default).  The distance sent by
<br>the mouse is multiplied by the <span style="font-style: italic;">mul%</span> factor and divided by the
<br><span style="font-style: italic;">div%</span> factor - with these both set to 0, only two-thirds of the
<br>distance moved by the mouse is passed to the Pointer Interface
<br>to be translated into movements of the Pointer.
<br><br>The <span style="font-style: italic;">acc%</span> parameter can be in the range (0...8) and defaults
<br>to 4 - this is used to calculate an acceleration factor, so
<br>that the faster that the mouse is moved the quicker the
<br>details sent by the mouse are passed on to the Pointer
<br>Interface (thus making the Pointer move in bigger and bigger
<br>steps).
<br><br>The last two parameters are optional and are only relevant
<br>when the Mouse Driver is used in Cursor Mode (see <span style="font-style: italic;">SERMCUR</span>).
<br>These two parameters affect the resolution of the mouse when
<br>being used to move the Basic Cursor - the standard values are
<br>both 1.
<br><br><h3>CROSS-REFERENCE:<br></h3><br><a style="font-style: italic;" href="KeywordsS.html#SERMAWS">SERMAWS</a> works in conjunction with this command.
<br><br>All of these parameters can be configured in the SERMouse
<br>file.
<br><br>See also <a style="font-style: italic;" href="KeywordsS.html#SERMCUR">SERMCUR</a> and <a style="font-style: italic;" href="KeywordsS.html#SERMPTR">SERMPTR</a>.
<br><hr style="width: 100%; height: 2px;"><h1><a name="SERMWAIT"></a>SERMWAIT</h1><br>Syntax: <span style="font-style: italic;">SERMWAIT
<br></span>Location: <span style="font-style: italic;">SERMouse
<br></span><br>This command can be used to suspend the Serial Mouse
<br>Driver.  You may wish to do this for example, if your system
<br>does not support dual <span style="font-style: italic;">BAUD</span> rates and you need to change the baud
<br>rate for a Modem or Printer.
<br><br><h3>CROSS-REFERENCE:<br></h3><br><a style="font-style: italic;" href="KeywordsS.html#SERMON">SERMON</a> re-activates the Driver.
<br><br>Again, the Driver can be configured to automatically be
<br>suspended when the baudrate is altered.
<br><hr style="width: 100%; height: 2px;"><h1><a name="SERNET"></a>SERNET</h1><br>Syntax: <span style="font-style: italic;">SERNET
<br></span>Location: <span style="font-style: italic;">SMSQ/E, ATARI Emulators
<br></span><br>A file <span style="font-style: italic;">SERNET_rext</span> is provided with SMSQ/E, QXL and the
<br>Emulators for the Atari computers which allows you to set up a
<br>Network using the Serial ports provided.
<br><br>Once the Network has been set up with the necessary leads,
<br>and <span style="font-style: italic;">SERNET_rext</span> been loaded on all computers in the Network, the
<br>command <span style="font-style: italic;">SERNET</span> should be issued to start up the fileserver Job
<br>on each computer.  This creates a background Job called
<br>'SERNET' which is similar to the 'Server' Job created by
<br><span style="font-style: italic;">FSERVE</span>.
<br><br>The two fileservers are very similar in operation in that
<br>they both allow other computers to access the resources of the
<br>Master machine over the Network.
<br><br>As with <span style="font-style: italic;">MIDINET</span>, <span style="font-style: italic;">SERNET</span> has built-in protection for files which
<br>can prevent other users in a Network accessing sensitive
<br>files.  Refer to <span style="font-style: italic;">MIDINET</span> for details.
<br><br><h3>CROSS-REFERENCE:<br></h3><br><a style="font-style: italic;" href="KeywordsS.html#SNET">SNET</a> is needed to control the Network.
<br><br>See also <a style="font-style: italic;" href="KeywordsF.html#FSERVE">FSERVE</a> and <a style="font-style: italic;" href="KeywordsM.html#MIDINET">MIDINET</a>.
<br><br>See the Appendix on Networks for further details.
<br><hr style="width: 100%; height: 2px;"><h1><a name="SER_ABORT"></a>SER_ABORT</h1><br>Syntax: <span style="font-style: italic;">SER_ABORT </span>[<span style="font-style: italic;">port</span>]
Location: <span style="font-style: italic;">ST/QL, SMSQ/E
<br></span><br>This command is similar to <span style="font-style: italic;">PAR_ABORT</span> except that it clears out
<br>all of the closed SER buffers and then sends an 'aborted'
<br>message, to the SER device.
<br><br>If port is specified, on machines which support more than
<br>one serial port, this allows you to specify the port number to
<br>be affected (default SER1).
<br><br><h3>CROSS-REFERENCE:<br></h3><br>See <a style="font-style: italic;" href="KeywordsP.html#PAR_ABORT">PAR_ABORT</a>.
<br><hr style="width: 100%; height: 2px;"><h1><a name="SER_BUFF"></a>SER_BUFF</h1><br>Syntax: <span style="font-style: italic;">SER_BUFF </span>[<span style="font-style: italic;">port, </span>] <span style="font-style: italic;">output_size </span>[<span style="font-style: italic;">,input_size</span>]
Location: <span style="font-style: italic;">ST/QL, SMSQ/E
<br></span><br>Used with one parameter, this is the same as <span style="font-style: italic;">PAR_BUFF</span> except
<br>that it sets the size of the output buffer attached to each
<br>SER channel. The input buffer is normally a dynamic buffer,
<br>unless <span style="font-style: italic;">input_size</span> is specified.  The output buffer should be a
<br>minimum of 5 to avoid confusion with the port number.
<br><br>You can also use <span style="font-style: italic;">SER_BUFF</span> to alter the size of the input
<br>buffer, by using the form:
<br><span style="font-style: italic;"><br>SER_BUFF output_size,input_size
<br></span><br>Although you will need to specify the <span style="font-style: italic;">output_size</span>, you can set
<br>this to 0 to enable a dynamic output buffer.
<br><br>You can also specify which serial port number is to be used
<br>to allow this command to work on machines with more than one
<br>serial port (this defaults to SER1).
<br><br><h3>Examples:
<br></h3><br><span style="font-style: italic;">SER_BUFF 200
<br></span><br>Set the output buffer size to 200 bytes, with a dynamic
<br>input buffer.
<br><br><span style="font-style: italic;">SER_BUFF 200,500
<br></span><br>Have an output buffer of 200 bytes, with an input buffer of
<br>500 bytes.
<br><br><h3>NOTE 1:
<br></h3><br>The actual useable input buffer will be calculated by the
<br>value set by <span style="font-style: italic;">SER_BUFF</span> less the value set by <span style="font-style: italic;">SER_ROOM</span>.
<br><br><h3>NOTE 2:
<br></h3><br>In version E-17 of the device drivers for the Atari
<br>Emulator (and later implementations of this command, including
<br>SMSQ/E), whenever you use this command, the value set by <span style="font-style: italic;">SER_ROOM
<br></span><br><h3>
<br></h3>is re-calculated so that it is set to one quarter of the input
<br>buffer size.
<br><br>Earlier versions may (after Level B09) would report an
<br>error if the input buffer was not at least twice the size of
<br>the value set by <span style="font-style: italic;">SER_ROOM</span>.
<br><br><h3>CROSS-REFERENCE:<br></h3><br>See <a style="font-style: italic;" href="KeywordsP.html#PAR_BUFF">PAR_BUFF</a>!
<br><br>You should also refer to <a style="font-style: italic;" href="KeywordsS.html#SER_ROOM">SER_ROOM</a>.
<br><hr style="width: 100%; height: 2px;"><h1><a name="SER_CDEOF"></a>SER_CDEOF</h1><br>Syntax: <span style="font-style: italic;">SER_CDEOF</span> [<span style="font-style: italic;">port,</span>]<span style="font-style: italic;"> time
<br></span>Location: <span style="font-style: italic;">ST/QL (Level D00 +), SMSQ/E
<br></span><br>Serial ports are able to both send and receive data. It is
<br>therefore imperative that the System can detect when data is
<br>no longer being sent to a port which is being used to receive
<br>the data. Normally, the System will wait until it receives an
<br>End Of File character (CTRL Z or EOF). However, it can be
<br>useful to specify a time limit, whereby if no data is received
<br>during that time, the System assumes End Of File.
<br><br>The command <span style="font-style: italic;">SER_CDEOF time</span> allows you to specify the number of
<br>frames for which the System will wait for more data. If <span style="font-style: italic;">time
<br></span>equals 0, then the System will wait indefinitely until it
<br>receives an explicit End Of File character.  The <span style="font-style: italic;">time</span> should be
<br>more than 5 in order to distinguish it from the port number.
<br><br>For machines with more than one serial port, you can
<br>specify the number of the serial port this command is to apply
<br>to (default SER1).
<br><br><h3>NOTE 1:
<br></h3><br>This command has no effect on a QL, QPC or QXL.
<br><br><h3>NOTE 2:
<br></h3><br>This command would not work properly on SCC ports on the
<br>Atari Mega STE or TT until v2.73+.
<br><br><h3>CROSS-REFERENCE:<br></h3><br><a style="font-style: italic;" href="KeywordsE.html#EOF">EOF</a> and <a style="font-style: italic;" href="KeywordsE.html#EOFW">EOFW</a> allow you to detect an EOF character.
<br><hr style="width: 100%; height: 2px;"><h1><a name="SER_CLEAR"></a>SER_CLEAR</h1><br>Syntax: <span style="font-style: italic;">SER_CLEAR </span>[<span style="font-style: italic;">port</span>]
Location: <span style="font-style: italic;">ST/QL, SMSQ/E
<br></span><br>This is similar to <span style="font-style: italic;">PAR_CLEAR</span> except that it clears out all
<br>current SER buffers.
<br><br>For machines with more than one serial port, you can
<br>specify the number of the serial port to be affected (default
<br>SER1).
<br><br><h3>CROSS-REFERENCE:<br></h3><br>See <a style="font-style: italic;" href="KeywordsP.html#PAR_CLEAR">PAR_CLEAR</a>!
<br><hr style="width: 100%; height: 2px;"><h1><a name="SER_FLOW"></a>SER_FLOW</h1><br>Syntax: <span style="font-style: italic;">SER_FLOW </span>[<span style="font-style: italic;">port,</span>]<span style="font-style: italic;"> flow
<br></span>Location: <span style="font-style: italic;">ST/QL, SMSQ/E
<br></span><br>Because of the variety of equipment which can be connected
<br>to a QL system through a serial port, the System has to
<br>support several types of handshaking. Handshaking is basically
<br>a means of checking if the data received through a serial port
<br>is the same as the data which has been sent.
<br><br>Normally, handshaking can be specified when a port is
<br>opened (see the Appendix concerning device drivers). However,
<br>it can also be useful to preset the handshaking by using the
<br>command <span style="font-style: italic;">SER_FLOW</span>.
<br><br><span style="font-style: italic;">flow</span> can have one of three values:
<br><br><span style="font-style: italic;">h</span>    Enable handshaking
<br><br><span style="font-style: italic;">i</span>    Ignore handshaking - do not bother to check data
<br><br><span style="font-style: italic;">x</span>    XON/XOFF detection.
<br><br>To enable flexibility on machines with more than one serial
<br>port, you can also specify the number of the serial port to be
<br>affected by this command (default SER1).
<br><br><h3>CROSS-REFERENCE:<br></h3><br>Please refer to the Appendix on device drivers for more
<br>information.
<br><hr style="width: 100%; height: 2px;"><h1><a name="SER_PAUSE"></a>SER_PAUSE</h1><br>Syntax: <span style="font-style: italic;">SER_PAUSE </span>[<span style="font-style: italic;">port,</span>]<span style="font-style: italic;"> time
<br></span>Location: <span style="font-style: italic;">SMSQ/E for Gold Card
<br></span><br>On standard QL serial ports, you may find that some
<br>characters which are sent by the QL through the serial ports
<br>get lost or the device to which they are sent (for example a
<br>printer) prints undefined characters.
<br><br>This problem may be caused by the fact that the stop bit
<br>which is sent by the QL serial ports may be too short for the
<br>device at the other end.
<br><br>The <span style="font-style: italic;">SER_PAUSE</span> command allows you to set the length of the stop
<br>bit in microseconds - it effectively causes a short pause
<br>between each character sent through the serial ports.  If <span style="font-style: italic;">port
<br></span>is not specified, this command will affect both serial ports,
<br>otherwise it will only affect the specified serial <span style="font-style: italic;">port</span>.
<br><br>The higher the value of <span style="font-style: italic;">time</span>, the longer the stop bit will
<br>be and hence the slower the serial transfer rate.
<br><br><h3>CROSS-REFERENCE:<br></h3><br>If you are using serial ports to receive data, you may need
<br>to set <a style="font-style: italic;" href="KeywordsS.html#SER_ROOM">SER_ROOM</a>.
<br><br><a style="font-style: italic;" href="KeywordsB.html#BAUD">BAUD</a> also affects the serial transfer rate.
<br><br>Please also refer to the Appendix on device drivers for
<br>more information.
<br><hr style="width: 100%; height: 2px;"><h1><a name="SER_ROOM"></a>SER_ROOM</h1><br>Syntax: <span style="font-style: italic;">SER_ROOM </span>[<span style="font-style: italic;">port,</span>]<span style="font-style: italic;"> bytes
<br></span>Location: <span style="font-style: italic;">ST/QL, SMSQ/E
<br></span><br>Although handshaking should ensure that serial input is
<br>safe, unfortunately some devices carry on sending data even
<br>though they have been told to stop. This may be caused by a
<br>buffer attached between the sending and receiving equipment,
<br>for example.
<br><br>This is known as 'serial overrun' and can have unfortunate
<br>consequences, as the receiving equipment may not have room to
<br>store the additional information. Where the system is acting
<br>as the receiver, you can use the command <span style="font-style: italic;">SER_ROOM</span> to specify a
<br>minimum amount of memory which must be left in the input
<br>buffer when the System uses handshaking to check on the
<br>validity of the data received.
<br><br><span style="font-style: italic;">SER_ROOM</span> sets aside bytes in the input buffer which can be
<br>used to store information received after the System has told
<br>the sending equipment to stop. If you still find that some
<br>data is lost due to serial overrun, try increasing the amount
<br>of space.
<br><br>For machines with more than one serial port, you can
<br>specify the number of the serial port to be affected by this
<br>command (default SER1).
<br><br><h3>NOTE:
<br></h3><br>The default room is 32 bytes.
<br><br><h3>CROSS-REFERENCE:<br></h3><br><a style="font-style: italic;" href="KeywordsS.html#SER_BUFF">SER_BUFF</a> allows you to alter the size of the input buffer and
<br>affects the value set by this command.
<br><br>You should also look at <a style="font-style: italic;" href="KeywordsS.html#SER_PAUSE">SER_PAUSE</a>.
<br><hr style="width: 100%; height: 2px;"><h1><a name="SER_USE"></a>SER_USE</h1><br>Syntax: <span style="font-style: italic;">SER_USE </span>[<span style="font-style: italic;">device</span>]
Location: <span style="font-style: italic;">ST/QL, SMSQ/E
<br></span><br>As with <span style="font-style: italic;">PAR_USE</span>, this command allows the SER port to emulate
<br>the parallel printer port. Any three letter extension is
<br>allowed, you are not restricted to SER or PAR.
<br><br><h3>CROSS-REFERENCE:<br></h3><br>See <a style="font-style: italic;" href="KeywordsP.html#PAR_USE
">PAR_USE
</a><br><h3>
<br></h3><hr style="width: 100%; height: 2px;"><h1><a name="SET"></a>SET</h1><br>Syntax: <span style="font-style: italic;">SET x, y, col
<br></span>Location: <span style="font-style: italic;">HCO
<br></span><br><span style="font-style: italic;">SET</span> does the same as <span style="font-style: italic;">PLOT</span> with <span style="font-style: italic;">SCRBASE 131072</span> set, ie. it does not
<br>support virtual screens.
<br><br><span style="font-style: italic;">x</span> ranges from 0 to 511, <span style="font-style: italic;">y</span> from 0 to 255. The colour (<span style="font-style: italic;">col</span>) is
<br>specified by an integer from 0 to 3, representing the four
<br>colours available in <span style="font-style: italic;">MODE 4</span>:
<br><br>0 ... black
<br><br>1 ... red
<br><br>2 ... green
<br><br>3 ... white
<br><br><h3>NOTE:
<br></h3><br>Although <span style="font-style: italic;">SET</span> is not designed to, it does work in <span style="font-style: italic;">MODE 8</span> but
<br>the colours appear differently: Colour 1 is not red but
<br>magenta for example.
<br><br><h3>WARNING 1:
<br></h3><br><span style="font-style: italic;">SET</span> writes directly into screen memory and assumes that it
<br>starts at 131072, so <span style="font-style: italic;">SET</span> may crash the machine if the screen is
<br>located at another position in memory.  <span style="font-style: italic;">SET</span> also assumes a
<br>resolution of 512 x 256 pixels.
<br><br><h3>WARNING 2:
<br></h3><br><span style="font-style: italic;">SET</span> does not check for the existance of the parameters (this
<br>means for example that it will not report 'bad parameter' for
<br><span style="font-style: italic;">SET x, y</span>), it may crash if any of the parameters is omitted.
<br><br><h3>CROSS-REFERENCE:<br></h3><br><a style="font-style: italic;" href="KeywordsP.html#PLOT">PLOT</a>.
<br><br>We highly recommend that you use the QDOS inbuilt window
<br>relative graphic routine, <a style="font-style: italic;" href="KeywordsP.html#POINT">POINT</a> in this case.
<br><br><a style="font-style: italic;" href="KeywordsC.html#COL">COL</a> finds the colour of a screen pixel.
<br><br>See the other implementation of <a style="font-style: italic;" href="KeywordsS.html#SET">SET</a> also.
<br><hr style="width: 100%; height: 2px;"><h1><a name="SET"></a>SET</h1><br>Syntax: <span style="font-style: italic;">SET </span>[<span style="font-style: italic;">#</span>]<span style="font-style: italic;">variable TO value
<br></span>Location: <span style="font-style: italic;">SET, ALTER (DIY Toolkit - Vol U)
<br></span><br>This  command  allows  you  to  set  up  various  universal
<br>constants which allow programs to read various values which
<br>are set by other programs.  This is similar to creating
<br>machine code functions which return constant values.
<br><br>The constants to be set up appear as <span style="font-style: italic;">variable</span> in the command.
<br>They can be string, floating point or integer but must not
<br>have previously been used in the program (otherwise the error
<br>'In Use' will be reported).  They must also not appear in
<br>quotes.
<br><br>The constants should be <span style="font-style: italic;">SET</span> from SuperBASIC Job 0, otherwise
<br>they do not seem to work (at least on Minerva).  However,
<br>other programs can use <span style="font-style: italic;">ALTER</span> to change the value of the
<br>constants  and  also  read  the  constants  as  if  they  were
<br>predefined variables.
<br><br>As an added bonus, if the variable is prefixed by a hash
<br>sign, then this is taken to a pointer to a system variable,
<br>which will always point to that system variable even if the
<br>system variables move.  For example to read the Network
<br>number, you could use:
<br><br><span style="font-style: italic;">SET #NET_ID TO HEX('37')
<br><br>PRINT PEEK (NET_ID)
<br></span><br>instead of:
<br><span style="font-style: italic;"><br>SET NET_ID TO HEX('37')
<br><br>PRINT PEEK (SYS_VARS+NET_ID)
<br></span><h3><br>Example:
<br></h3><br>Set the following from SuperBASIC:
<br><span style="font-style: italic;">10 SET FALSE TO 0 : SET TRUE TO 1
<br>20 SET YES$ TO 'Yy' : SET NO$ TO 'Nn'
<br>30 SET DEF_DRIVE$ TO 'flp1_'
<br></span><br>Any other program can then just use lines such as:
<br><br><span style="font-style: italic;">IF INKEY$(1) INSTR YES$ : PRINT 'Yes has been selected'
<br></span><br>and
<br><br><span style="font-style: italic;">LBYTES DEF_DRIVE$&'prog_data',space
<br></span><h3><br>NOTE 1:
<br></h3><br><span style="font-style: italic;">SET</span> does not work on SMS.
<br><br><h3>NOTE 2:
<br></h3><br><span style="font-style: italic;">SET #value</span> does not appear to work on Minerva v1.97 (at least
<br>in versions up to v1.66 of the toolkit).
<br><br><h3>NOTE 3:
<br></h3><br>Any attempt to use <span style="font-style: italic;">SET</span> from within a multiple BASIC will
<br>have no effect.
<br><br><h3>CROSS-REFERENCE:<br></h3><br>See <a style="font-style: italic;" href="KeywordsA.html#ALTER">ALTER</a>.
<br><br href="KeywordsT.html#TRUE%">TRUE%</a>, <a style="font-style: italic;" href="KeywordsF.html#FALSE%">FALSE%</a> and <a style="font-style: italic;" href="KeywordsP.html#PI">PI</a> are predefined constants.
<br><hr style="width: 100%; height: 2px;"><h1><a name="SetHEAD"></a>SetHEAD</h1><br>Syntax: <span style="font-style: italic;">SetHEAD #ch, adr
<br></span>Location: <span style="font-style: italic;">HEADER (DIY Toolkit - Vol F)
<br></span><br>The command <span style="font-style: italic;">SetHEAD</span> is the counterpart of <span style="font-style: italic;">GetHEAD</span> and is
<br>normally used in conjunction with it. So please refer to
<br><span style="font-style: italic;">GetHEAD</span> for further information about the syntax and usage.
<br><br>There is just one difference you must keep in mind: whilst
<br><span style="font-style: italic;">GetHEAD</span> does not care in which mode (read only or read and write)
<br>a file was opened, <span style="font-style: italic;">SetHEAD</span> does. It expects that the channel was
<br>opened with <span style="font-style: italic;">OPEN</span>, <span style="font-style: italic;">FOPEN</span> etc but not with <span style="font-style: italic;">OPEN_IN</span> or <span style="font-style: italic;">FOP_IN</span>.
<br><br><h3>CROSS-REFERENCE:<br></h3><br>See <a style="font-style: italic;" href="KeywordsG.html#GetHEAD">GetHEAD</a>.
<br><hr style="width: 100%; height: 2px;"><h1><a name="SET_CLOCK"></a>SET_CLOCK</h1><br>Syntax: <span style="font-style: italic;">SET_CLOCK
<br></span>Location: <span style="font-style: italic;">THOR range
<br></span><br>This command sets the THOR's battery backed clock to the
<br>current system time (set with <span style="font-style: italic;">SDATE</span>).
<br><br><h3>NOTE:
<br></h3><br>This is not actually necessary on the THOR XVI as this
<br>automatically alters the battery backed clock when the system
<br>clock is altered with <span style="font-style: italic;">SDATE</span> or <span style="font-style: italic;">ADATE</span>.
<br><br><h3>CROSS-REFERENCE:<br></h3><br><a style="font-style: italic;" href="KeywordsS.html#SDATE">SDATE</a> and <a style="font-style: italic;" href="KeywordsA.html#ADATE">ADATE</a> alter the system clock.
<br><br><a style="font-style: italic;" href="KeywordsA.html#A_SDATE">A_SDATE</a> is similar on the ST/QL Emulator.
<br><hr style="width: 100%; height: 2px;"><h1><a name="SET_FBKDT"></a>SET_FBKDT</h1><br>Syntax: <span style="font-style: italic;">SET_FBKDT #channel </span>[<span style="font-style: italic;">,time</span>]
<br><br>or <span style="font-style: italic;">SET_FBKDT \file </span>[<span style="font-style: italic;">,time</span>]
Location: <span style="font-style: italic;">Level-2 drivers
<br></span><br>The command <span style="font-style: italic;">SET_FBKDT</span> sets the date when a file was last
<br>backed-up. The <span style="font-style: italic;">time</span> specified, must be in the number of seconds
<br>since 1st January 1961, ie. the number returned by <span style="font-style: italic;">DATE</span>.  If
<br><span style="font-style: italic;">time</span> is not specified or is 0, then the current <span style="font-style: italic;">DATE</span> setting is
<br>used.  If <span style="font-style: italic;">time=1</span> this has no effect on the file.
<br><br>Normally the backup date is not set unless you do so using
<br><span style="font-style: italic;">SET_FBKDT</span>.
<br><br>This command supports the data default directory (set with
<br><span style="font-style: italic;">DATA_USE</span>).
<br><br><h3>Example:
<br></h3><span style="font-style: italic;"><br>SET_FBKDT \BOOT,DATE
<br></span><br>sets the backup date on the file BOOT in the current data
<br>default directory to the current time and date.
<br><br><h3>CROSS-REFERENCE:<br></h3><br><a style="font-style: italic;" href="KeywordsF.html#FBKDT">FBKDT</a>.
<br><br>See <a style="font-style: italic;" href="KeywordsF.html#FGETH$">FGETH$</a> for the structure of a file header, especially
<br>which byte is modified when the backup date is changed.
<br><hr style="width: 100%; height: 2px;"><h1><a name="SET_FUPDT"></a>SET_FUPDT</h1><br>Syntax: <span style="font-style: italic;">SET_FUPDT #channel </span>[<span style="font-style: italic;">,time</span>]
<br><br>or <span style="font-style: italic;">SET_FUPDT \file </span>[<span style="font-style: italic;">,time</span>]
Location: <span style="font-style: italic;">Level-2 drivers
<br></span><br>The command <span style="font-style: italic;">SET_FUPDT</span> sets the date on which a file was last
<br>altered. This is always set to the current system <span style="font-style: italic;">DATE</span> when a
<br>file is <span style="font-style: italic;">SAVE</span>d, or <span style="font-style: italic;">CLOSE</span>d after having been written to.  If <span style="font-style: italic;">time</span> is
<br>not specified (or is 0), then the current <span style="font-style: italic;">DATE</span> is used.  If <span style="font-style: italic;">time
<br></span>is set to 1, then this command will have no effect on the
<br>file.
<br><br><span style="font-style: italic;">COPY</span> sets the update time on the file being created to the
<br>current <span style="font-style: italic;">DATE</span>. For a SuperBASIC 'backup' function which gives the
<br>newly created file the same update time as the original and
<br>alters the backup time, see <span style="font-style: italic;">FBKDT</span>.
<br><br>This command supports the current default data directory
<br>(see <span style="font-style: italic;">DATAD$</span>).
<br><br><h3>NOTE:
<br></h3><br>If you use <span style="font-style: italic;">SET_FUPDT</span> to alter the update time of a file <span style="font-style: italic;">OPEN</span>ed
<br>to the specified channel, closing that channel later in the
<br>program will not affect the update time.
<br><br><h3>CROSS-REFERENCE:<br></h3><br><a style="font-style: italic;" href="KeywordsF.html#FUPDT">FUPDT</a>.
<br><br>See <a style="font-style: italic;" href="KeywordsF.html#FGETH$">FGETH$</a> for the structure of a file header, especially
<br>which byte is modified when the update time is set.
<br><hr style="width: 100%; height: 2px;"><h1><a name="SET_FVERS"></a>SET_FVERS</h1><br>Syntax: <span style="font-style: italic;">SET_FVERS #channel </span>[<span style="font-style: italic;">,version</span>]
<br><br>or <span style="font-style: italic;">SET_FVERS \file </span>[<span style="font-style: italic;">,version</span>]
Location: <span style="font-style: italic;">Level-2 drivers
<br></span><br>The command <span style="font-style: italic;">SET_FVERS</span> sets the version number of a file -
<br>versions higher than 65535 or smaller than 0 are regarded as
<br><span style="font-style: italic;">version MOD 65536</span>, <span style="font-style: italic;">version=0</span> (or if <span style="font-style: italic;">version</span> is omitted) means that the
<br>version number will not be updated when the channel to that
<br>file is closed.
<br><br>This command supports the current default data directory
<br>(see <span style="font-style: italic;">DATAD$</span>).
<br><br><h3>Example:
<br></h3><br><span style="font-style: italic;">SET_FVERS \BOOT,13
<br></span><br><h3>CROSS-REFERENCE:<br></h3><br><a style="font-style: italic;" href="KeywordsF.html#FVERS">FVERS</a>.
<br><br>See <a style="font-style: italic;" href="KeywordsF.html#FGETH$">FGETH$</a> for the structure of a file header, especially
<br>which byte is modified when the version is changed.
<br><br>The version number may be updated by <a style="font-style: italic;" href="KeywordsS.html#SAVE">SAVE</a> and <a style="font-style: italic;" href="KeywordsQ.html#QSAVE">QSAVE</a> on SMS.
<br><hr style="width: 100%; height: 2px;"><h1><a name="SET_GREEN"></a>SET_GREEN</h1><br>Syntax: <span style="font-style: italic;">SET_GREEN #channel, operation
<br></span>Location: <span style="font-style: italic;">Windows (DIY Toolkit - Vol W)
<br></span><br>This command allows you to change the colours used within a
<br>specified window channel very quickly.
<br><br>In order to use this, you really need a good understanding
<br>of the way in which the QL display works - see the QL Display
<br>Appendix for some details.
<br><br>The effect that this command has on the specified window
<br>depends upon the value of <span style="font-style: italic;">operation</span>:
<br><h3><span style="font-style: italic;">operation</span>Effect
<br></h3>0Clear all Green bits (remove any Green from the
<br>screen).
<br>1Set all Green bits.
<br>-1If the Red bit for a pixel is set, Set the
<br>Green bit, otherwise clear it.
<br><br><h3>NOTE 1:
<br></h3><br>This command will only work on screen resolutions of
<br>512x256 pixels.
<br><br><h3>NOTE 2:
<br></h3><br>This command should not really be used in <span style="font-style: italic;">MODE 8</span>.
<br><br><h3>CROSS-REFERENCE:<br></h3><br><a style="font-style: italic;" href="KeywordsS.html#SET_RED">SET_RED</a> is similar.
<br><br>See <a style="font-style: italic;" href="KeywordsR.html#RECOL">RECOL</a>.
<br><br><a style="font-style: italic;" href="KeywordsW.html#W_SWAP">W_SWAP</a> can also be used to recolour a window.
<br><br>Refer to the QL Display Appendix.
<br><hr style="width: 100%; height: 2px;"><h1><a name="SET_RED"></a>SET_RED</h1><br>Syntax: <span style="font-style: italic;">SET_RED #channel, operation
<br></span>Location: <span style="font-style: italic;">Windows (DIY Toolkit - Vol W)
<br></span><br>This command is similar to <span style="font-style: italic;">SET_GREEN</span> - the only difference is
<br>that instead of affecting green bits, it alters the red bits.
<br><br>The effect that this command has on the specified window
<br>depends upon the value of <span style="font-style: italic;">operation</span>:
<br><h3><span style="font-style: italic;">operation</span>Effect
<br></h3>0Clear all Red bits (remove any Red from the
<br>screen).
<br>1Set all Red bits.
<br>-1If the Green bit for a pixel is set, Set the
<br>Red bit, otherwise clear it.
<br><h3><br>CROSS-REFERENCE:<br></h3><br>See <a style="font-style: italic;" href="KeywordsS.html#SET_GREEN">SET_GREEN</a> !
<br><hr style="width: 100%; height: 2px;"><h1><a name="SET_LANGUAGE"></a>SET_LANGUAGE</h1><br>Syntax:<span style="font-style: italic;"> SET_LANGUAGE country$
<br></span><br><span style="font-style: italic;">or SET_LANGUAGE </span>[<span style="font-style: italic;">country$</span>] <span style="font-style: italic;">(THOR XVI v6.41 only)
<br></span>Location: <span style="font-style: italic;">THOR range
<br></span><br>The command <span style="font-style: italic;">SET_LANGUAGE</span> takes a string or name parameter and
<br>attempts to change the keyboard layout to the first one with a
<br>name of which the given parameter is an abbreviation (this
<br>comparison is case-independent). If the parameter is an empty
<br>string  (or  not  specified),  the  next  keyboard  layout  is
<br>selected.
<br><br>Ideally, in a program, the full name of the layout would be
<br>used for clarity. The search is circular which means that for
<br>example, if <span style="font-style: italic;">SET_LANGUAGE d</span> was used, the Danish (Dansk) keyboard
<br>layout would be adopted rather than the German (Deutsch)
<br>layout, unless the Danish layout was already selected.
<br><br>The current keyboard layouts are supported: 
<br><br><h3>Number<span style="font-style: italic;">Country$</span>Language
<br></h3><br>1       InternationalNone specific
<br><br>2       BritishEnglish
<br><br>3       Dansk     Danish
<br><br>4       Deutsch       German
<br><br>5       Espanol       Spanish (v4.20+ only)
<br><br>6       Franais      French
<br><br>7       HELLAS         Greek
<br><br>8       Suisse         Swiss
<br><br>9       Svensk           Swedish (v4.20+ only)
<br><br><h3>Examples:
<br></h3><span style="font-style: italic;">SET_LANGUAGE ""
<br></span><br>jump to next keyboard layout in list.
<br><span style="font-style: italic;">SET_LANGUAGE 'Esp'
<br></span><br>set layout to Spanish layout.
<br><br><h3>NOTE 1:
<br></h3><br>Connected with each keyboard layout, there is also a
<br>national translation table, which you will need to install by
<br>using the command <span style="font-style: italic;">TRA 1</span>.
<br><br><h3>NOTE 2:
<br></h3><br>On THOR's equipped with a JS ROM, Franais must be enclosed
<br>in quotation marks as it is an invalid variable name.
<br><br><h3>NOTE 3:
<br></h3><br>The second variant of the command should not really be used
<br>as it is only supported on the v6.41 ROM for the THOR XVI.
<br>This has the same effect as <span style="font-style: italic;">SET_LANGUAGE ""</span>.
<br><br><h3>CROSS-REFERENCE:<br></h3><br><a style="font-style: italic;" href="KeywordsL.html#LANGUAGE$">LANGUAGE$</a> returns the name of the current keyboard layout in
<br>use.
<br><br>Before v6.41 of the THOR XVI, the keys &lt;ALT&gt;&lt;SYSREQ&gt; had
<br>the same effect as <a style="font-style: italic;" href="KeywordsS.html#SET_LANGUAGE """>SET_LANGUAGE ""</a>. On v6.41, this keying was
<br>altered to call a Job called Alt_SysReq (Case dependent).
<br><br><a style="font-style: italic;" href="KeywordsL.html#LANG_USE">LANG_USE</a> allows SMS to use different languages for messages
<br>and errors. See also <a style="font-style: italic;" href="KeywordsK.html#KBD_TABLE">KBD_TABLE</a>.
<br><hr style="width: 100%; height: 2px;"><h1><a name="SEXEC"></a>SEXEC</h1><br>Syntax:<span style="font-style: italic;"> SEXEC device_file,start,length,data
<br></span><br>  or<span style="font-style: italic;"> SEXEC device_file,start</span>[<span style="font-style: italic;">,length</span>[<span style="font-style: italic;">,data</span>[<span style="font-style: italic;">,extra</span>[<span style="font-style: italic;">,type</span>]]]
<br><br><span style="font-style: italic;">(Minerva v1.80+)
<br></span><br>or<span style="font-style: italic;"> SEXEC </span>[<span style="font-style: italic;">device_</span>]<span style="font-style: italic;">file,start,length,data</span> <span style="font-style: italic;">(Toolkit II)
<br></span><br>or<span style="font-style: italic;"> SEXEC #channel,start,length,data</span> <span style="font-style: italic;">(SMS only)
<br></span>Location: <span style="font-style: italic;">QL ROM, Toolkit II
<br></span><br>In order for a program to be stored as an executable Job,
<br>it is necessary to store the machine code in a specified
<br>format on disk. The command <span style="font-style: italic;">SEXEC</span> allows you to do this, taking
<br>a specified amount of code from memory and storing it in the
<br>specified file in a form which can later be <span style="font-style: italic;">EXEC</span>uted.
<br><br>You will need to specify the <span style="font-style: italic;">start</span> address of the machine
<br>code, the <span style="font-style: italic;">length</span> of the code to be stored and the amount of <span style="font-style: italic;">data
<br></span>space to be given to the program when it is loaded back into
<br>memory (the data space represents the amount of working memory
<br>which is linked with the program when it is loaded, either for
<br>storing data at the end of the program or for the user stack -
<br>see a good QL machine code book for more details).
<br><br>The specified file name must include the name of the <span style="font-style: italic;">device
<br></span>to be used, unless Toolkit II is present, in which case the
<br>default program device is supported. If Toolkit II is present
<br>and the file already exists, you will be given the option of
<br>overwriting the file.
<br><br><h3>Example:
<br></h3><br>To amend a given executable program, you may need to do the
<br>following:
<br><span style="font-style: italic;">100 length=FLEN(\example_exe)
<br>110 datasp=FDAT(\example_exe)
<br>120 start=RESPR(length)
<br>130 LBYTES example_exe,start
<br>140 POKE start+1024,100
<br>150 SEXEC flp1_example_exe,start,length,datasp
<br></span><br><h3>NOTE 1:
<br></h3><br>On Minerva ROMs (pre v1.80), if <span style="font-style: italic;">SEXEC</span> was aborted for some
<br>reason whilst writing to a file, the file would be deleted. On
<br>later  versions  of  Minerva  and  all  other  QL  ROMs,  the
<br>incomplete file is kept.  Toolkit II reports Medium Full if
<br>this is the case.
<br><br><h3>NOTE 2:
<br></h3><br>The Minerva variant is overwritten by the Toolkit II
<br>version of this command.
<br><br><h3>NOTE 3:
<br></h3><br>On Minerva pre v1.83, <span style="font-style: italic;">SEXEC</span> set the wrong file type!
<br><br><h3>MINERVA NOTE:
<br></h3><br>On Minerva v1.80 (or later) the command <span style="font-style: italic;">SEXEC</span> is practically
<br>the same as <span style="font-style: italic;">SBYTES</span>. The only difference is the <span style="font-style: italic;">type</span> parameter
<br>which defaults to 1 as opposed to 0 with <span style="font-style: italic;">SBYTES</span>.
<br><br><h3>SMS NOTE:
<br></h3><br>The fourth variant of this command allows you to save the
<br>data to an already existing channel which is <span style="font-style: italic;">OPEN</span> to a file,
<br>thus cutting down on the number of times you need to access
<br>the file for error trapping (for example).  See <span style="font-style: italic;">SBYTES</span> for an
<br>example.
<br><br><h3>WARNING:
<br></h3><br>Saving part of the QL's memory with <span style="font-style: italic;">SEXEC</span> does not make it
<br>into  <span style="font-style: italic;">EXEC</span>utable  code  -  you  must  ensure  that  the  program
<br>concerned has a proper Job header and conforms with the normal
<br>QDOS rules for <span style="font-style: italic;">EXEC</span>utable programs.
<br><br><h3>CROSS-REFERENCE:<br></h3><br><a style="font-style: italic;" href="KeywordsS.html#SEXEC_O">SEXEC_O</a> is very similar.
<br><br><a style="font-style: italic;" href="KeywordsE.html#EXEC">EXEC</a> and <a style="font-style: italic;" href="KeywordsE.html#EXEC_W">EXEC_W</a> allow you to load a program saved with <a style="font-style: italic;" href="KeywordsS.html#SEXEC">SEXEC</a>.
<br><hr style="width: 100%; height: 2px;"><h1><a name="SEXEC_O"></a>SEXEC_O</h1><br>Syntax: <span style="font-style: italic;">SEXEC_O </span>[<span style="font-style: italic;">device_</span>]<span style="font-style: italic;">file,start,length</span><span style="font-style: italic;">(Toolkit II)
<br></span><br>or <span style="font-style: italic;">SEXEC_O device_file,start,length   </span><br><span style="font-style: italic;">(THOR XVI)
<br></span><br>or <span style="font-style: italic;">SEXEC_O #channel,start,length   </span><span style="font-style: italic;">(SMS only)
<br></span>Location: <span style="font-style: italic;">Toolkit II, THOR XVI
<br></span><br>This command is exactly the same as <span style="font-style: italic;">SEXEC</span> except that it
<br>will automatically overwrite an existing file of the same
<br>name.
<br><br><h3>NOTE:
<br></h3><br>The Toolkit II version of <span style="font-style: italic;">SEXEC_O</span> supports the default data
<br>device.
<br><br><h3>CROSS-REFERENCE:<br></h3><br>See <a style="font-style: italic;" href="KeywordsS.html#SEXEC">SEXEC</a>.
<br><hr style="width: 100%; height: 2px;"><h3>SGN<br><hr style="width: 100%; height: 2px;">SGN%
<br></h3><br>Syntax: <span style="font-style: italic;">SGN (x)
<br></span><br>and <span style="font-style: italic;">SGN% (x)
<br></span>Location: <span style="font-style: italic;">Math Package (SGN) and SGN (SGN%)
<br></span><br>Both functions work identically and return the sign of any
<br>valid number.
<br><br>The sign is defined as 1 for positive numbers, -1 for
<br>negative and 0 if the number is zero. Any number is allowed as
<br>a parameter.
<br><br><h3>CROSS-REFERENCE:<br></h3><br><a style="font-style: italic;" href="KeywordsS.html#SIGN">SIGN</a> is the same.
<br><hr style="width: 100%; height: 2px;"><h1><a name="SHOOT"></a>SHOOT</h1><br>Syntax: <span style="font-style: italic;">SHOOT
<br></span>Location: <span style="font-style: italic;">ST/QL, QSound
<br></span><br>This command produces the sound of single gun shot.
<br><br><h3>CROSS-REFERENCE:<br></h3><br><a style="font-style: italic;" href="KeywordsS.html#SND_EXT">SND_EXT</a>, <a style="font-style: italic;" href="KeywordsB.html#BELL">BELL</a>, <a style="font-style: italic;" href="KeywordsE.html#EXPLODE">EXPLODE</a>.
<br><hr style="width: 100%; height: 2px;"><h1><a name="SI"></a>SI</h1><br>Syntax: <span style="font-style: italic;">SI
<br></span>Location: <span style="font-style: italic;">Beuletools
<br></span><br>This function contains the control codes needed to switch
<br>on condensed print on an EPSON compatible printer:
<br><br><span style="font-style: italic;">PRINT SI
<br></span><br>is the same as:
<br><br><span style="font-style: italic;">PRINT CHR$(15)
<br></span><br><h3>CROSS-REFERENCE:<br></h3><br><a style="font-style: italic;" href="KeywordsN.html#NORM">NORM</a>, <a style="font-style: italic;" href="KeywordsB.html#BLD">BLD</a>, <a style="font-style: italic;" href="KeywordsE.html#EL">EL</a>, <a style="font-style: italic;" href="KeywordsD.html#DBL">DBL</a>, <a style="font-style: italic;" href="KeywordsE.html#ENL">ENL</a>, <a style="font-style: italic;" href="KeywordsP.html#PRO">PRO</a>, <a style="font-style: italic;" href="KeywordsN.html#NRM">NRM</a>, <a style="font-style: italic;" href="KeywordsU.html#UNL">UNL</a>, <a style="font-style: italic;" href="KeywordsA.html#ALT">ALT</a>, <a style="font-style: italic;" href="KeywordsE.html#ESC">ESC</a>, <a style="font-style: italic;" href="KeywordsF.html#FF">FF</a>, <a style="font-style: italic;" href="KeywordsL.html#LMAR">LMAR</a>, <a style="font-style: italic;" href="KeywordsR.html#RMAR">RMAR</a>,
<br><a style="font-style: italic;" href="KeywordsP.html#PAGDIS">PAGDIS</a>, <a style="font-style: italic;" href="KeywordsP.html#PAGLEN">PAGLEN</a>.
<br><hr style="width: 100%; height: 2px;"><h1><a name="SIGN"></a>SIGN</h1><br>Syntax: <span style="font-style: italic;">SIGN (x)
<br></span>Location: <span style="font-style: italic;">BTool
<br></span><br>See <span style="font-style: italic;">SGN</span>!
<br><hr style="width: 100%; height: 2px;"><h1><a name="SIN"></a>SIN</h1><br>Syntax: <span style="font-style: italic;">SIN (angle)
<br></span>Location: <span style="font-style: italic;">QL ROM
<br></span><br>This function returns the sine of the given <span style="font-style: italic;">angle</span> (in
<br>radians ranging from <span style="font-style: italic;">-PI/2</span> to <span style="font-style: italic;">PI/2</span>). In a right-angled triangle,
<br>the sine is the ratio of the length of the side opposite to
<br>the angle, to the length of the hypotenuse.
<br><br>A negative angle indicates that the hypotenuse appears
<br>below the base line.
<br><br><h3>Example:
<br></h3><br>A procedure to draw a sector of a circle with the centre at
<br><span style="font-style: italic;">x,y</span> and radius <span style="font-style: italic;">r</span>. <span style="font-style: italic;">a</span> is the angle between the first straight side
<br>of the sector and a vertical line on the screen, <span style="font-style: italic;">b</span> is the angle
<br>between the two straight sides. Both angles have to be given
<br>in radians, <span style="font-style: italic;">b</span> should be between 0 and 2*PI. <span style="font-style: italic;">ch</span> specifies the
<br>window to be used and  cannot be omitted:
<br><span style="font-style: italic;">100 DEFine PROCedure SECTOR (ch,x,y,r,a,b)
<br>110   LOCal x1,x2,y1,y2
<br>120   x1=x+r*SIN(a): x2=x+r*SIN(a+b)
<br>130   y1=y+r*COS(a): y2=y+r*COS(a+b)
<br>140   LINE#ch,x1,y1 TO x,y TO x2,y2
<br>150   ARC#ch,x2,y2 TO x1,y1 ,b
<br>160 END DEFine SECTOR
<br></span><br><span style="font-style: italic;">SECTOR #1,50,50,10,PI/4,PI/2
<br></span><br><h3>NOTE 1:
<br></h3><br><span style="font-style: italic;">SIN (PI)==0</span> on all ROMs. This should in fact equal zero - only
<br>the Lightning maths package and SMS get this right.
<br><br><h3>NOTE 2:
<br></h3><br>On Minerva v1.96+ <span style="font-style: italic;">SIN</span> with very large values for radian
<br>return 0.  On other implementations it returns an overflow
<br>error.  You should therefore check the range of the <span style="font-style: italic;">angle
<br></span>parameter.
<br><br><h3>CROSS-REFERENCE:<br></h3><br>See <a style="font-style: italic;" href="KeywordsC.html#COS">COS</a>, <a style="font-style: italic;" href="KeywordsT.html#TAN">TAN</a>, <a style="font-style: italic;" href="KeywordsR.html#RAD">RAD</a>, <a style="font-style: italic;" href="KeywordsA.html#ASIN">ASIN</a>, <a style="font-style: italic;" href="KeywordsA.html#ACOS">ACOS</a>, <a style="font-style: italic;" href="KeywordsA.html#ATAN">ATAN</a>, <a style="font-style: italic;" href="KeywordsD.html#DEG">DEG</a>.
<br><br>See also <a style="font-style: italic;" href="KeywordsS.html#SINH">SINH</a>.
<br><br>Please  also  refer  to  the  Mathematics  section  of  the
<br>Appendix.
<br><hr style="width: 100%; height: 2px;"><h1><a name="SINH"></a>SINH</h1><br>Syntax: <span style="font-style: italic;">SINH (x)
<br></span>Location: <span style="font-style: italic;">Hyper, Hyperbola
<br></span><br>This  function  returns  the  hyperbolic  sine  (sinus
<br>hyperbolicus). The function is equivalent to:
<br><br><span style="font-style: italic;">( EXP(x) - EXP(-x) ) / 2
<br></span><br>where the angle <span style="font-style: italic;">x</span> (in fact a ratio) is a small floating
<br>point value.
<br><br><h3>Example:
<br></h3><br>Draw a hyperbola and its asymptotes:
<br><span style="font-style: italic;">100 SCALE 10,-7,-5: PAPER 0: CLS: INK 3
<br>110 LINE -4,-4 TO 4,4, -4,4 TO 4,-4: INK 7
<br>120 FOR t = -2 TO 2 STEP 2E-2
<br>130   x = COSH(t): y = SINH(t)
<br>140   POINT x,y, -x,y
<br>150 END FOR t
<br></span><br><h3>CROSS-REFERENCE:<br></h3><br><a style="font-style: italic;" href="KeywordsC.html#COSH">COSH</a>, <a style="font-style: italic;" href="KeywordsT.html#TANH">TANH</a>, <a style="font-style: italic;" href="KeywordsA.html#ARSINH
">ARSINH
</a><hr style="width: 100%; height: 2px;"><h1><a name="SINT"></a>SINT</h1><br>Syntax: <span style="font-style: italic;">SINT (x)</span>   <span style="font-style: italic;">x=0..65535
<br></span>Location: <span style="font-style: italic;">BTool
<br></span><br>The range of SuperBASIC integers is -32768 to 32767 - these
<br>are called signed integers because they can be negative. This
<br>compares to unsigned integers which have a different range,
<br>from 0 to 65535.
<br><br>The function <span style="font-style: italic;">SINT</span> converts unsigned integers to signed
<br>integers, which is not a very difficult task apart from the
<br>need to check the valid range:
<br><br><span style="font-style: italic;">signed% = unsigned - 2^16
<br></span><br>or
<br><br><span style="font-style: italic;">signed% = SINT(unsigned)
<br></span><br><h3>CROSS-REFERENCE:<br></h3><br><a style="font-style: italic;" href="KeywordsU.html#UINT">UINT</a> converts in the other direction.
<br><hr style="width: 100%; height: 2px;"><h1><a name="SIZE"></a>SIZE</h1><br>Syntax: <span style="font-style: italic;">SIZE ( array </span>[{<span style="font-style: italic;">% </span>| <span style="font-style: italic;">$</span>}]<span style="font-style: italic;"> )
<br></span><br>or <span style="font-style: italic;">SIZE ( variable </span>[{<span style="font-style: italic;">%</span> | <span style="font-style: italic;">$</span>}]<span style="font-style: italic;"> )
<br></span><br>or <span style="font-style: italic;">SIZE ( value)
<br></span>Location: <span style="font-style: italic;">Math Package
<br></span><br>The function <span style="font-style: italic;">SIZE</span> can take  any kind of variable, array or
<br>constant. The returned value depends very much on the type of
<br>parameter:
<br><br>If a simple variable was passed, the function returns
<br>either 0 or 1, 1 if the variable points to any value or 0 if
<br>it does not, ie. if <span style="font-style: italic;">PRINT variable</span> would show an asterisk to show
<br>that variable is not yet defined. Note that even though on SMS
<br>an unset variable does not show an asterisk when you use <span style="font-style: italic;">PRINT
<br></span>variable, this does not prevent this function from returning
<br>the correct value.
<br><br>The return for a constant parameter such as: <span style="font-style: italic;">PRINT SIZE(-22.3)
<br></span>or <span style="font-style: italic;">PRINT SIZE("QL")</span> is always 1.
<br><br>The return for arrays is entirely different.
<br><br>Passing an array tells <span style="font-style: italic;">SIZE</span> to count its elements. Note the
<br>existence of a zero element, eg. <span style="font-style: italic;">DIM a(2,2)</span> gives a nine elements
<br>in all:
<br><br><span style="font-style: italic;">a(0,0), a(0,1), a(0,2)
<br><br>a(1,0), a(1,1), a(1,2)
<br><br>a(2,0), a(2,1), a(2,2)
<br></span><br><span style="font-style: italic;">SIZE</span> handles string arrays differently in that it returns
<br>the number of strings, not the number of characters, eg. for
<br><span style="font-style: italic;">DIM a$(2,2)</span>, <span style="font-style: italic;">SIZE(a$)</span> will not give 3*3=9 but 3.
<br><br>Generally the return value of <span style="font-style: italic;">SIZE</span> does not depend on the
<br>actual contents of the passed object.
<br><br><span style="font-style: italic;">SIZE</span> recognises if part of an object (especially strings and
<br>arrays) was passed.
<br><br><h3>Examples:
<br></h3><br><span style="font-style: italic;">DIM numbers(1,2,3,4,5)
<br></span><br><span style="font-style: italic;">PRINT SIZE(numbers)</span>         returns 2*3*4*5*6=720
<br><br><span style="font-style: italic;">yippie$="what a wonderful world"
<br></span><br><span style="font-style: italic;">PRINT SIZE(yippie$)</span>         returns 1
<br><br><span style="font-style: italic;">CLEAR
<br><br>PRINT SIZE(eeek)</span>            returns 0
<br><br><span style="font-style: italic;">DIM string$(12,7,10)
<br><br>PRINT SIZE(string$)</span>         returns 13*8=104; and
<br><br><span style="font-style: italic;">PRINT SIZE(string$(1 TO))</span>   returns 12*8=96
<br><br><h3>NOTE 1:
<br></h3><br>String arrays also contain numeric values - the first
<br>element (which is character zero) of a string contains the
<br>size of the string.
<br><br>For instance, take the above <span style="font-style: italic;">string$</span> and then enter:
<br><br><span style="font-style: italic;">string$(4,4) ="knocking"
<br></span><br>Now <span style="font-style: italic;">PRINT string$(4,4)</span> and you will see 'knocking' in #1.
<br><br><span style="font-style: italic;">PRINT string$(4,4,5)</span> gives the fifth character of knocking, the
<br>k, and <span style="font-style: italic;">PRINT string$(4,4,1)</span> the first one, again a k. And PRINT
<br><span style="font-style: italic;">string$(4,4,0)</span>? There is no character before the first, instead you
<br>will get the integer number 8 because <span style="font-style: italic;">LEN(string$(4,4))=8</span>.
<br><br>This is tricky and not really necessary to know about as
<br>you can use <span style="font-style: italic;">LEN</span>... just in case you come across the phenomenon
<br>and have wondered about it.  See also <span style="font-style: italic;">DIM</span> for a further
<br>explanation of strings.
<br><br><h3>NOTE 2:
<br></h3><br>Before v2.06, this function may refuse to work on some
<br>implementations, giving 'Bad Parameter' error or returning the
<br>wrong value for string arrays.
<br><br><h3>NOTE 3:
<br></h3><br>If the parameter is a single dimension string array, for
<br>example:
<br><br><span style="font-style: italic;">DIM a$(10)
<br><br>PRINT SIZE (a$)
<br></span><br>the value returned is 0.  It is hoped that this will be
<br>fixed in a future version so that the value returned is 1.
<br><br><h3>CROSS-REFERENCE:<br></h3><br><a style="font-style: italic;" href="KeywordsD.html#DIMN">DIMN</a> and <a style="font-style: italic;" href="KeywordsN.html#NDIM">NDIM</a> return other information about an array, eg:
<br><br><a style="font-style: italic;" href="KeywordsP.html#PRINT SIZE(a$) * DIMN (a$,NDIM(a$))
">PRINT SIZE(a$) * DIMN (a$,NDIM(a$))
</a><br>gives the total number of characters which can be stored in
<br>a string array a$.
<br><br><a style="font-style: italic;" href="KeywordsL.html#LEN">LEN</a> returns the length of a string.
<br><br><a style="font-style: italic;" href="KeywordsF.html#FREE_MEM">FREE_MEM</a> allows you to check how much memory an array uses.
<br><hr style="width: 100%; height: 2px;"><h1><a name="SJOB"></a>SJOB</h1><br>Syntax: <span style="font-style: italic;">SJOB jobnr,timeout
<br></span><br>or <span style="font-style: italic;">SJOB jobname,timeout
<br></span><br>Location:<span style="font-style: italic;"> TinyToolkit
<br></span><br>There are three ways in which a job can be made to do
<br>nothing:
<br><br>(1) remove the job,
<br><br>(2) set the job's priority to 0, or
<br><br>(3) suspend the job.
<br><br>This command suspends the specified job for a specified
<br>period of time, which can be identified either by its <span style="font-style: italic;">jobnr</span> (see
<br><span style="font-style: italic;">JOBS</span>) or by -1 (meaning the current job) or by its name (which
<br>need not be in quotes).
<br><br>Although suspending a job does not alter its priority, a
<br>suspended job will have no effect upon the speed of the QL. A
<br>positive <span style="font-style: italic;">timeout</span> will stop the Job for <span style="font-style: italic;">timeout/50</span> seconds, whereas
<br>any negative number will suspend the job forever (ie. it can
<br>only be re-activated by an express command such as <span style="font-style: italic;">REL_JOB</span>). The
<br>highest  positive   timeout   is  32768   frames   which   is
<br>approximately 9 minutes, 6 seconds.
<br><br><h3>Example 1:
<br></h3><span style="font-style: italic;">SJOB "Quill",-1</span>(suspend Quill indefinitely)
<br><span style="font-style: italic;">SJOB Quill,-1</span>is the same even if there is a variable
<br>called Quill.
<br><span style="font-style: italic;">SJOB -1,100</span>suspend the current job for approx. 2
<br>seconds
<br><span style="font-style: italic;">SJOB 10,100</span>suspend Job number 10 for approx. 2 seconds
<br><br><h3>Example 2:
<br></h3><br>A background Job which carries out work which is not time
<br>consuming, should not slow the whole system down, otherwise it
<br>is  a  complete  waste  of  the  computer's  available  time.
<br>Unfortunately, a priority of 1 is too high for a simple action
<br>such as  checking  the  clock or  updating  key  macros  (See
<br><span style="font-style: italic;">ALTKEY</span>).  <span style="font-style: italic;">SJOB</span> is useful to slow this job down to the desired
<br>speed. <span style="font-style: italic;">SJOB</span> is also useful for setting <span style="font-style: italic;">PAUSE</span>s independently of
<br>the machine's speed.
<br><br>The following program demonstrates both uses of <span style="font-style: italic;">SJOB</span> and has
<br>to be compiled and executed as a multitasking job (ie. <span style="font-style: italic;">EXEC</span>).
<br>The priority of the job does not really matter, because the
<br>job only wakes up once a minute, looks at the clock and then
<br>drops off again.
<br><span style="font-style: italic;">100 REPeat Tower
<br>110  d$=DATE$: minute=d$(16 TO 17)
<br>120  SELect ON minute
<br>130   =30:BEEP 20000,0,100,1000,0
<br>140   =0:hour=d$(13 TO 14) MOD 12:IF hour=0:hour=12
<br>150      FOR h=1 to hour: BEEP 10000,h,10,100,1: SJOB Q_MYJOB,65
<br>160   =15:BEEP 5000,0,10,20,5000
<br>170  END SELect
<br></span><br><h3>
<br></h3><span style="font-style: italic;">180  SJOB Q_MYJOB,3000
<br>190 END REPeat Tower
<br></span><br>This example needs Qliberator's <span style="font-style: italic;">Q_MYJOB</span> function.
<br><br><h3>NOTE:
<br></h3><br>As from v1.11, <span style="font-style: italic;">jobnr</span> can be -1, so in the above example 2,
<br>you could use <span style="font-style: italic;">SJOB -1,65</span> and <span style="font-style: italic;">SJOB -1,3000</span> instead of the similar
<br>commands in lines 150 and 180 respectively.
<br><br>Earlier versions would also not accept a variable as the
<br>parameter for the job number.
<br><br><h3>CROSS-REFERENCE:<br></h3><br><a style="font-style: italic;" href="KeywordsR.html#REL_JOB">REL_JOB</a> releases a suspended job.
<br><br><a style="font-style: italic;" href="KeywordsJ.html#JOBS">JOBS</a> lists all current jobs.
<br><br><a style="font-style: italic;" href="KeywordsS.html#SUSJOB">SUSJOB</a> and <a style="font-style: italic;" href="KeywordsT.html#TTSUS">TTSUS</a> are almost the same as <a style="font-style: italic;" href="KeywordsS.html#SJOB">SJOB</a>.
<br><hr style="width: 100%; height: 2px;"><h1><a name="SLOAD"></a>SLOAD</h1><br>Syntax: <span style="font-style: italic;">SLOAD adr
<br></span><br>Location: Ecran Manager
<br><br>This command takes part of a screen which has been saved
<br>with <span style="font-style: italic;">SSAVE</span> and copies it to the visible screen, removing it from
<br>memory.  <span style="font-style: italic;">SLOAD</span> works like <span style="font-style: italic;">SSHOW</span> with the sole difference that it
<br>can only be called once.
<br><br><h3>NOTE:
<br></h3><br>This has the same problems as <span style="font-style: italic;">SSAVE</span>.
<br><br><h3>CROSS-REFERENCE:<br></h3><br><a style="font-style: italic;" href="KeywordsS.html#SSHOW
">SSHOW
</a><hr style="width: 100%; height: 2px;"><h1><a name="SLUG"></a>SLUG</h1><br>Syntax: <span style="font-style: italic;">SLUG msecs
<br></span><br>Location: Gold Card (v2.24+), SMS
<br><br>A disadvantage of the speed improvements by Gold Card (and
<br>later expansion boards) is that most games become simply too
<br>fast. The command <span style="font-style: italic;">SLUG</span> can slow down the whole system by
<br>advising the operating system to read the keyboard less often
<br>(other solutions install background interrupts but some games
<br>suspend these).
<br><br>The parameter specifies the delay in milliseconds. The
<br>higher <span style="font-style: italic;">msec</span>s, the slower the general operating speed will be.
<br><span style="font-style: italic;">SLUG 5</span> to <span style="font-style: italic;">SLUG 10</span> on a Gold Card gives roughly the speed of a
<br>normal QL,  but  this  depends very  much  on  the  software.
<br>Programs which do not spend a lot of time waiting for keyboard
<br>input such as interactive games, will not slow down so much.
<br>Only keyboard access is slowed down.
<br><br><h3>Example:
<br></h3><br><span style="font-style: italic;">100 FOR n=0 to 1000 STEP 10
<br><br>110   SLUG n
<br><br>120   PRINT n
<br><br>130   dummy=KEYROW(0)
<br><br>140 END FOR n
<br><br></span><h3>NOTE:
<br></h3><br>Since  <span style="font-style: italic;">SLUG</span>  only  slows  down  keyboard  access  (this  is
<br>especially designed for arcade games), the above example would
<br>not be affected without line 130. All other lines run at
<br>maximum speed; the advantage is that screen output, which is a
<br>limiting factor for arcade games, is not affected by <span style="font-style: italic;">SLUG</span>.
<br><br><h3>CROSS-REFERENCE:<br></h3><br><a style="font-style: italic;" href="KeywordsS.html#SCR2DIS">SCR2DIS</a> and <a style="font-style: italic;" href="KeywordsC.html#CACHE_ON">CACHE_ON</a> can be used to speed up the computer's
<br>speed.
<br><hr style="width: 100%; height: 2px;"><h1><a name="SMOVE"></a>SMOVE</h1><br>Syntax: <span style="font-style: italic;">SMOVE scrno, adr </span>[<span style="font-style: italic;">,xpos, ypos</span>]
<br><br>Location: Ecran Manager
<br><br>The command <span style="font-style: italic;">SMOVE</span> will copy a stored screen (saved with
<br><span style="font-style: italic;">SSAVE</span>, where <span style="font-style: italic;">adr</span> comes from) to the first (<span style="font-style: italic;">scrno=0</span>) or second
<br>screen (<span style="font-style: italic;">scrno=1</span>) - the latter is only possible if your system
<br>supports a dual screen mode. Optionally, it is possible to
<br>specify a location where the screen part's upper left corner
<br>(absolute co-ordinates) should be placed; <span style="font-style: italic;">SMOVE</span> will correct the
<br><span style="font-style: italic;">xpos</span> and <span style="font-style: italic;">ypos</span> automatically if the restored picture would exceed
<br>the screen borders.
<br><br><h3>NOTE:
<br></h3><br>See <span style="font-style: italic;">SSAVE</span>.
<br><br><h3>CROSS-REFERENCE:<br></h3><br><a style="font-style: italic;" href="KeywordsS.html#SSHOW">SSHOW</a>, <a style="font-style: italic;" href="KeywordsS.html#SLOAD
">SLOAD
</a><br><h3>
<br></h3><hr style="width: 100%; height: 2px;"><h1><a name="SND_EXT"></a>SND_EXT</h1><br>Syntax: <span style="font-style: italic;">SND_EXT
<br></span><br>Location: ATARI_REXT (v1.24 to v2.15)
<br><br>The ST-QL Emulators contain new extensions (based upon the
<br>QSound device) to enable programs to use the ST's sound
<br>facilities. Unfortunately, these extensions clash with the
<br>Turbo SuperBASIC compiler from Digital Precision.
<br><br>When the Emulator is started up, these sound extensions are
<br>switched off. <span style="font-style: italic;">SND_EXT</span> will switch them back on.
<br><br>This command was replaced in v2.15 by <span style="font-style: italic;">ATARI_EXT</span>.
<br><br>You can test if the QSOUND interface (or these commands)
<br>are present by using:
<br><br><span style="font-style: italic;">PEEK_L(!! HEX('164'))
<br></span><br>which will be 0 unless the commands are present (Turbo may
<br>also alter this figure whilst it is compiling a program).
<br><br><h3>WARNING:
<br></h3><br>The sound extensions may crash the hardware.
<br><br><h3>CROSS-REFERENCE:<br></h3><br>Some  of  the  available  extensions  for  sound  are  <a style="font-style: italic;" href="KeywordsP.html#PLAY">PLAY</a>,
<br><a style="font-style: italic;" href="KeywordsR.html#RELEASE">RELEASE</a>, <a style="font-style: italic;" href="KeywordsB.html#BELL">BELL</a>, <a style="font-style: italic;" href="KeywordsS.html#SHOOT">SHOOT</a>, <a style="font-style: italic;" href="KeywordsE.html#EXPLODE">EXPLODE</a>.
<br><hr style="width: 100%; height: 2px;"><h1><a name="SNET"></a>SNET</h1><br>Syntax: <span style="font-style: italic;">SNET no
<br></span><br>Location: SMSQ/E, ATARI Emulators
<br><br>This command is similar to the <span style="font-style: italic;">NET</span> command in that it sets
<br>the Network Station number of the machine on which it is
<br>issued.  The only difference is that here it sets the station
<br>number for the <span style="font-style: italic;">SERNET</span> Network (as opposed to the QNet Network).
<br><br><h3>CROSS-REFERENCE:<br></h3><br>See <a style="font-style: italic;" href="KeywordsS.html#SNET%">SNET%</a>, <a style="font-style: italic;" href="KeywordsS.html#SNET_USE">SNET_USE</a> and <a style="font-style: italic;" href="KeywordsN.html#NET">NET</a>.
<br><br>Also please see <a style="font-style: italic;" href="KeywordsS.html#SERNET">SERNET</a>, <a style="font-style: italic;" href="KeywordsM.html#MIDINET">MIDINET</a> and <a style="font-style: italic;" href="KeywordsF.html#FSERVE">FSERVE</a>.
<br><hr style="width: 100%; height: 2px;"><h1><a name="SNET%"></a>SNET%</h1><br>Syntax: <span style="font-style: italic;">SNET%
<br></span><br>Location: SMSQ/E, ATARI Emulators
<br><br>This function returns the current station number of the
<br>computer as set with <span style="font-style: italic;">SNET</span>.
<br><br><h3>CROSS-REFERENCE:<br></h3><br>See <a style="font-style: italic;" href="KeywordsS.html#SNET">SNET</a>.
<br><br><a style="font-style: italic;" href="KeywordsN.html#NET_ID">NET_ID</a> is similar.
<br><hr style="width: 100%; height: 2px;"><h1><a name="SNET_ROPEN"></a>SNET_ROPEN</h1><br>Syntax: <span style="font-style: italic;">SNET_ROPEN
<br></span><br>Location: SMSQ/E, ATARI Emulators
<br><br>This command reopens the serial ports for use by the <span style="font-style: italic;">SERNET
<br></span>driver in case they have been closed by other programs.
<br><br><h3>CROSS-REFERENCE:<br></h3><br>See <a style="font-style: italic;" href="KeywordsS.html#SERNET">SERNET</a>.
<br><hr style="width: 100%; height: 2px;"><h1><a name="SNET_S%"></a>SNET_S%</h1><br>Syntax: <span style="font-style: italic;">SNET_S% (station)
<br></span><br>Location: SMSQ/E, ATARI Emulators
<br><br>This function enables you to check whether a machine with
<br>the specified station number is connected to the <span style="font-style: italic;">SERNET</span>.  This
<br>can be useful to prevent the problem of the Network re-trying
<br>several times before failing when asked to send or read data
<br>from a Network station which does not exist.
<br><br><h3>CROSS-REFERENCE:<br></h3><br>See <a style="font-style: italic;" href="KeywordsS.html#SNET">SNET</a>.
<br><hr style="width: 100%; height: 2px;"><h1><a name="SNET_USE"></a>SNET_USE</h1><br>Syntax: <span style="font-style: italic;">SNET_USE id
<br></span><br>Location: SMSQ/E, ATARI Emulators
<br><br>Due to the fact that SERNET Networks can be run on
<br>computers alongside MIDINET Networks and even QNET Networks,
<br>it may be necessary to alter the identification letter used to
<br>access facilties on other computers in the Network.
<br><br>The default letter <span style="font-style: italic;">id</span> is s, but this can be set to any
<br>other single letter by using this command.  However, you
<br>should avoid letters which already appear as the first letter
<br>in another device driver (see <span style="font-style: italic;">DEVLIST</span>).
<br><br><h3>Example:
<br></h3><br><span style="font-style: italic;">SNET_USE c
<br><br>DEV_USE 3,c2_win1_
<br></span><br>Redefine DEV3_ so that it refers to win1_ on station number
<br>2 in the SERNET Network.  This can be useful to allow some
<br>programs to access data over the Network.  However note the
<br>file protection implemented in <span style="font-style: italic;">SERNET</span> and <span style="font-style: italic;">MIDINET</span>.
<br><br><h3>NOTE:
<br></h3><br>Before v2.28 of Toolkit II, the various wildcard commands
<br>did not accept any single letter other than n as representing
<br>a Network.
<br><br><h3>CROSS-REFERENCE:<br></h3><br>See <a style="font-style: italic;" href="KeywordsS.html#SNET">SNET</a> and <a style="font-style: italic;" href="KeywordsS.html#SERNET">SERNET</a>.
<br><br>Refer also to <a style="font-style: italic;" href="KeywordsS.html#SNET_S%">SNET_S%</a>.
<br><br><a style="font-style: italic;" href="KeywordsM.html#MNET_USE">MNET_USE</a> is similar.
<br><br>See also <a style="font-style: italic;" href="KeywordsN.html#NFS_USE">NFS_USE</a>.
<br><hr style="width: 100%; height: 2px;"><h1><a name="SORT"></a>SORT</h1><br>Syntax: <span style="font-style: italic;">SORT array$, offset </span>[<span style="font-style: italic;">,row</span>]
<br><br>Location: ARRAY
<br><br>The <span style="font-style: italic;">SORT</span> command takes a two or three-dimensional string
<br><span style="font-style: italic;">array</span> and sorts it in ascending order.  <span style="font-style: italic;">offset</span> is an  even number
<br>which allows you to apply different sort criteria by telling
<br><span style="font-style: italic;">SORT</span> to compare the sub-strings to the right of position
<br><span style="font-style: italic;">offset+1</span>. The third, optional parameter is only necessary for
<br>three-dimensional arrays: it selects the row to be sorted.
<br><br><h3>Example:
<br></h3><br><span style="font-style: italic;">CAT</span> lists a sorted directory, including deleted files, to
<br>window #1.  Sorting the directory in fact requires just one
<br>line here (390), the entries are sorted by file length because
<br>the format of each entry is as follows:
<br><br>1    10   20    30   37   45
<br><br>|--------|--------|---------|-------|-------|
<br><br>filename                length
<br><br>Changing the <span style="font-style: italic;">SORT</span> in line 390 to:
<br><br><span style="font-style: italic;">390 SORT entry$, 0
<br></span><br>will sort the list alphabetically. The other parts of the
<br>example <span style="font-style: italic;">PROCedure</span> are written to require only Toolkit II, that
<br>makes reading the directory (the <span style="font-style: italic;">j</span> loop from line 240 to 280)
<br>quite slow. If you are wondering why the file header is stored
<br>twice, both as a string (<span style="font-style: italic;">header$</span>) and for direct memory access
<br>(<span style="font-style: italic;">header</span>),  this  is  for  getting  the  best  out  of  basic  QL
<br>facilities, namely <span style="font-style: italic;">PEEK_W</span>, <span style="font-style: italic;">PEEK_L</span> and string slicing (line 310).
<br><span style="font-style: italic;">100 DEFine PROCedure CAT (dir$)
<br>110  LOCal ch%, entries%, header, header$(64)
<br>120  LOCal c%, l%, i
<br>130  PRINT "Directory of"!dir$;": ";
<br>140  ch% = FOP_DIR(dir$)
<br>150  IF ch% < 0 THEN
<br>160    PRINT \"Cannot open directory,"\"because ";
<br>170    REPORT#1, ch%: RETurn
<br>180  END IF
<br>190  entries% = FLEN(#ch%) / 64
<br>200  DIM entry$(entries%, 45)
<br>210  header = ALCHP(64)
<br>220  FOR i = 0 TO entries% - 1
<br>230    header$ = ""
<br>240    FOR j = 0 TO 63
<br>250      BGET#ch%, c%
<br>260      POKE header+j, c%
<br>270      header$ = header$ & CHR$(c%)
<br>280    END FOR j
<br>290    l% = PEEK_W(header + 14)
<br>300    IF l% THEN
<br>310      entry$(i) = header$(17 TO 16 + l%) & FILL$(" ", 37 - l%)
<br>320      entry$(i) = entry$(i) & (PEEK_L(header) - 64)
<br>330    ELSE
<br></span><br><h3>
<br></h3><span style="font-style: italic;">340      entry$(i) = "(deleted)" & FILL$(" ", 28) & "n.a."
<br>350    END IF
<br>360    PRINT ".";
<br>370  END FOR i
<br>380  CLOSE#ch%: RECHP header: PRINT
<br>390  SORT entry$, 36
<br>400  FOR i = 0 TO entries% - 1
<br>410    PRINT entry$(i)
<br>420  END FOR i
<br>430 END DEFine CAT
<br></span><br><h3>CROSS-REFERENCE:<br></h3><br><a style="font-style: italic;" href="KeywordsS.html#SEARCH">SEARCH</a> searches string arrays.
<br><hr style="width: 100%; height: 2px;"><h1><a name="SOUNDEX"></a>SOUNDEX</h1><br>Syntax: <span style="font-style: italic;">SOUNDEX (word$)
<br></span><br>Location: hnlichkeiten
<br><br>This function returns an integer which represents the word
<br>contained in the string passed as a parameter, in such a way
<br>that for two English words which sound similar, the same
<br>results are returned. Internally, each character is replaced
<br>by a cipher and then all double (triple etc) ciphers are
<br>removed.
<br><br><h3>Examples:
<br></h3><br><span style="font-style: italic;">SOUNDEX ("user")=26
<br><br>SOUNDEX ("looser")=426
<br><br>SOUNDEX ("l'user")=426
<br></span><h3><br>NOTE:
<br></h3><br>The  difference  between  two  <span style="font-style: italic;">SOUNDEX</span>  results  is  not
<br>proportional  to   the   phonetic  difference   between   the
<br>parameters.
<br><br><h3>CROSS-REFERENCE:<br></h3><br><a style="font-style: italic;" href="KeywordsW.html#WLD">WLD</a>  calculates  such  a  difference,  <a style="font-style: italic;" href="KeywordsP.html#PHONEM">PHONEM</a>  is  similar  to
<br><a style="font-style: italic;" href="KeywordsS.html#SOUNDEX">SOUNDEX</a>.
<br><hr style="width: 100%; height: 2px;"><h1><a name="SPJOB"></a>SPJOB</h1><br>Syntax: <span style="font-style: italic;">SPJOB jobname,priority
<br></span><br>         <span style="font-style: italic;">(Toolkit II, TinyToolkit pre v1.10 and THOR only)
<br></span><br>or <span style="font-style: italic;">SPJOB jobnr,tag,priority</span>     <span style="font-style: italic;">(Toolkit II and THOR only)
<br></span><br>or <span style="font-style: italic;">SPJOB jobID,priority
<br></span><br>or <span style="font-style: italic;">SPJOB jobnr,priority</span><span style="font-style: italic;">(TinyToolkit pre v1.10)
<br></span>Location: <span style="font-style: italic;">Toolkit II, THOR XVI, TinyToolkit (pre v1.10),
<br>BTool
<br></span><br>The specified job (described by either its <span style="font-style: italic;">jobname</span>, its job
<br>number and tag, or its job identification number) is set to
<br>the given <span style="font-style: italic;">priority</span> (which should be in the range 0 to 127 to
<br>maintain compatability with Minerva). A priority of zero will
<br>ensure that the job waits until it is given a higher priority
<br>by another job.
<br><br><h3>NOTE 1:
<br></h3><br>It is possible that only the second syntax works. Get an
<br>update!
<br><br><h3>NOTE 2:
<br></h3><br>Before v1.10 of TinyToolkit, this toolkit included the same
<br>command but with an incompatible syntax - this version has
<br>been renamed <span style="font-style: italic;">SP_JOB</span>.
<br><br><h3>MINERVA NOTES:
<br></h3><br>Although on other ROMs, a <span style="font-style: italic;">priority</span> higher than 127 can be
<br>assigned to a job, on Minerva, the permitted priority range is
<br>actually -128...127 (if a priority is stated to be higher than
<br>127, you must subtract the difference between this number and
<br>256 from 0 to get the negative priority).
<br><br>The idea behind these negative priorities is that they are
<br>for 'background tasks' which will only run when no tasks with
<br>a positive  priority  are  running. However,  the  effect  is
<br>slightly more complex because these negative priorities are
<br>split into eight levels, each of which can have jobs running
<br>with priorities equivalent to -1 to -15.
<br><br>A job in one level will not run whilst a job in a higher
<br>level is running, however within each level each job will get
<br>a different  amount  of  processor time  depending  on  their
<br>priorities {a job with a lower priority (eg. -15) will get
<br>more processing time than a job with a higher priority (eg.
<br>-1)}.
<br><br><h3>LevelPriority RangeOverall value
<br></h3><br>0-1...-15-1...-15
<br><br>1-1...-15-16...-31
<br><br>2-1...-15-32...-47
<br><br>3-1...-15-48...-63
<br><br>4-1...-15-64...-79
<br><br>5-1...-15-80...-95
<br><br>6-1...-15-96...-111
<br><br>7-1...-15-112...-127
<br><br><h3>WARNING:
<br></h3><br>The supplied parameters are not checked to see what you are
<br>trying to do, which means that you can use this command to set
<br>the priority of SuperBASIC to zero, preventing further command
<br>entry.
<br><br><h3>CROSS-REFERENCE:<br></h3><br><a style="font-style: italic;" href="KeywordsS.html#SJOB">SJOB</a> suspends a job, <a style="font-style: italic;" href="KeywordsR.html#REL_JOB">REL_JOB</a> releases it.
<br><br><a style="font-style: italic;" href="KeywordsR.html#RJOB">RJOB</a> and <a style="font-style: italic;" href="KeywordsK.html#KJOB">KJOB</a> remove a specific job, <a style="font-style: italic;" href="KeywordsK.html#KILL">KILL</a> and <a style="font-style: italic;" href="KeywordsK.html#KJOBS">KJOBS</a> remove all
<br>jobs except the main SuperBASIC interpreter.
<br><br>See also <a style="font-style: italic;" href="KeywordsS.html#SP_JOB">SP_JOB</a>, <a style="font-style: italic;" href="KeywordsP.html#PRIO">PRIO</a>, <a style="font-style: italic;" href="KeywordsP.html#PRIORITISE">PRIORITISE</a>.
<br><hr style="width: 100%; height: 2px;"><h1><a name="SPL"></a>SPL</h1><br>Syntax: <span style="font-style: italic;">SPL</span> {<span style="font-style: italic;">input </span>| <span style="font-style: italic;">#ch</span>} [<span style="font-style: italic;">TO</span> {<span style="font-style: italic;">output</span> | <span style="font-style: italic;">#ch</span>}]
Location: <span style="font-style: italic;">Toolkit II, THOR XVI
<br></span><br>It  can  sometimes  be  useful  to  copy  a  file  in  the
<br>background.
<br><br>The command <span style="font-style: italic;">SPL</span> sets up a small Job which runs at a low
<br>priority and acts as a print spooler, reading the whole of the
<br>input data from the given <span style="font-style: italic;">input</span> device as quickly as possible
<br>and then just outputting the data when it can.
<br><br>Although control is returned to the calling program quite
<br>quickly, both the <span style="font-style: italic;">input</span> and <span style="font-style: italic;">output</span> files are left open until <span style="font-style: italic;">SPL
<br></span>has completed its job.
<br><br><span style="font-style: italic;">SPL</span> is mainly for outputting files to a printer in the
<br>background (allowing  you  to  carry on  other  work  in  the
<br>meantime). If however, a file is specified as the <span style="font-style: italic;">output</span>, the <span style="font-style: italic;">SPL
<br></span>command acts like <span style="font-style: italic;">COPY_O</span>, except in the background.
<br><br>If <span style="font-style: italic;">output</span> is not specified, the <span style="font-style: italic;">SPL</span> command uses the default
<br>destination device.
<br><br>Existing channel numbers may also be specified as the <span style="font-style: italic;">input
<br></span>and <span style="font-style: italic;">output</span> names, provided that both channels are already open
<br>for input and output respectively.
<br><br><h3>Examples:
<br></h3><br>(1) <span style="font-style: italic;">SPL flp1_Example_txt TO SER
<br></span><br>prints the file flp1_Example_txt in the background.
<br><br>(2) <span style="font-style: italic;">SPL_USE SER:SPL flp1_Example_txt
<br></span><br>this is the same as example 1.
<br><br><h3>WARNING:
<br></h3><br>If the default destination device is a directory device and
<br>you do not specify a file for output, the <span style="font-style: italic;">SPL</span> job may never
<br>complete its task and leave files open.
<br><br><h3>CROSS-REFERENCE:<br></h3><br>See <a style="font-style: italic;" href="KeywordsC.html#COPY_O">COPY_O</a> and <a style="font-style: italic;" href="KeywordsS.html#SPLF">SPLF</a>.
<br><br><a style="font-style: italic;" href="KeywordsS.html#SPL_USE">SPL_USE</a> and <a style="font-style: italic;" href="KeywordsD.html#DEST_USE">DEST_USE</a> allow you to alter the default destination
<br>device.
<br><hr style="width: 100%; height: 2px;"><h1><a name="SPLF"></a>SPLF</h1><br>Syntax: <span style="font-style: italic;">SPLF </span>{<span style="font-style: italic;">input</span> | <span style="font-style: italic;">#ch</span>} [<span style="font-style: italic;">TO</span> {<span style="font-style: italic;">output</span> | <span style="font-style: italic;">#ch</span>}]
Location: <span style="font-style: italic;">Toolkit II, THOR XVI
<br></span><br>This is exactly the same as <span style="font-style: italic;">SPL</span> except that at the end of
<br>sending the output, a form feed symbol, <span style="font-style: italic;">CHR$(12)</span> is sent. <span style="font-style: italic;">SPLF</span> is
<br>obviously intended for use with printers.
<br><br><h3>CROSS-REFERENCE:<br></h3><br>See <a style="font-style: italic;" href="KeywordsS.html#SPL">SPL</a>.
<br><hr style="width: 100%; height: 2px;"><h1><a name="SPL_USE"></a>SPL_USE</h1><br>Syntax: <span style="font-style: italic;">SPL_USE name
<br></span>Location: <span style="font-style: italic;">Toolkit II, THOR XVI
<br></span><br>This  command  sets  the  default  destination  device  and
<br>therefore has a similar effect to <span style="font-style: italic;">DEST_USE</span>. However, this command
<br>is slightly improved, in that if the supplied name does not
<br>end in an underscore, this is taken to be an external device
<br>port (such as SER) and no underscore is added.
<br><br><h3>Examples:
<br></h3><br>(1) <span style="font-style: italic;">DEST_USE flp2_Quill:COPY ram2_Letter_doc
<br></span><br>will     copy     the     file     ram2_letter_doc     to
<br>flp2_Quill_letter_doc.
<br><br>(2) <span style="font-style: italic;">SPL_USE ser:COPY ram2_Letter_txt
<br></span><br>will copy the file ram2_Letter_txt to the serial port, ser.
<br><h3><br>NOTE:
<br></h3><br><span style="font-style: italic;">SPL_USE</span> will overwrite the default destination device set
<br>with <span style="font-style: italic;">DEST_USE</span>.
<br><br><h3>CROSS-REFERENCE:<br></h3><br><a style="font-style: italic;" href="KeywordsD.html#DESTD$">DESTD$</a> returns the current default destination device.
<br><br>Also see <a style="font-style: italic;" href="KeywordsP.html#PROG_USE">PROG_USE</a>, <a style="font-style: italic;" href="KeywordsD.html#DLIST">DLIST</a>, <a style="font-style: italic;" href="KeywordsD.html#DATA_USE">DATA_USE</a>, <a style="font-style: italic;" href="KeywordsD.html#DEST_USE">DEST_USE</a>, <a style="font-style: italic;" href="KeywordsD.html#DDOWN">DDOWN</a>, <a style="font-style: italic;" href="KeywordsD.html#DUP">DUP</a>, and <a style="font-style: italic;" href="KeywordsD.html#DNEXT">DNEXT</a>.
<br><hr style="width: 100%; height: 2px;"><h1><a name="SP_JOB"></a>SP_JOB</h1><br>Syntax: <span style="font-style: italic;">SP_JOB jobname, priority
<br></span><br>or <span style="font-style: italic;">SP_JOB jobnr, priority
<br></span>Location: <span style="font-style: italic;">TinyToolkit (v1.10+)
<br></span><br>Acts just like <span style="font-style: italic;">SPJOB</span>.
<br><br><h3>NOTE:
<br></h3><br>As from v1.11, the <span style="font-style: italic;">jobnr</span> may be -1 to mean the current job.
<br>Earlier versions would not allow <span style="font-style: italic;">jobnr</span> to be a variable either.
<br><br><h3>CROSS-REFERENCE:<br></h3><br>See <a style="font-style: italic;" href="KeywordsS.html#SPJOB">SPJOB</a>.
<br><br><a style="font-style: italic;" href="KeywordsJ.html#JBASE">JBASE</a> contains details of the different parameters <a style="font-style: italic;" href="Keywordsj.html#jobname">jobname</a> and
<br><a style="font-style: italic;" href="Keywordsj.html#jobnr">jobnr</a>.
<br><hr style="width: 100%; height: 2px;"><h1><a name="SQR"></a>SQR</h1><br>Syntax: <span style="font-style: italic;">SQR (x)
<br></span>Location: <span style="font-style: italic;">Math Package
<br></span><br>See <span style="font-style: italic;">SQRT</span> below!
<br><hr style="width: 100%; height: 2px;"><h1><a name="SQRT"></a>SQRT</h1><br>Syntax: <span style="font-style: italic;">SQRT (x)
<br></span>Location: <span style="font-style: italic;">QL ROM
<br></span><br>This  function  returns  the  square  root  of  the  given
<br>parameter. The opposite of this function is <span style="font-style: italic;">x^2</span>. The given
<br>parameter can be zero or any positive value.
<br><br><h3>Example:
<br></h3><br><span style="font-style: italic;">PRINT SQRT(32768*2)</span> will return 256.
<br><br><h3>NOTE 1:
<br></h3><br>The version of <span style="font-style: italic;">SQRT</span> implemented on Minerva v1.90 (or later)
<br>is the fastest version of this command which we have seen
<br>anywhere!
<br><br><h3>NOTE 2:
<br></h3><br>On  Minerva  pre  v1.96,  <span style="font-style: italic;">SQRT(4^x*(12^31))</span>  was  returning  the
<br>negative square root.  It now returns the positive square
<br>root.
<br><br><h3>CROSS-REFERENCE:<br></h3><br><a style="font-style: italic;" href="KeywordsA.html#ABS">ABS</a> will return the absolute value of the given parameter.
<br><hr style="width: 100%; height: 2px;"><h1><a name="SSAVE"></a>SSAVE</h1><br>Syntax: <span style="font-style: italic;">SSAVE (scrno, xpos, ypos, xsiz, ysiz)
<br></span>Location: <span style="font-style: italic;">Ecran Manager
<br></span><br>The function <span style="font-style: italic;">SSAVE</span> reserves memory and saves a part of the
<br>screen to it, the saved block's left upper corner is the point
<br>(<span style="font-style: italic;">xpos,ypos</span>) in absolute co-ordinates, the width is <span style="font-style: italic;">xsiz</span> and the
<br>height <span style="font-style: italic;">ysiz</span>.
<br><br><span style="font-style: italic;">xpos</span> may range from 0 to 511 and <span style="font-style: italic;">ypos</span> from 0 to 255, so <span style="font-style: italic;">SSAVE
<br></span>is not suitable for resolutions other than 512x256 pixels. The
<br>reserved memory can only be released with <span style="font-style: italic;">SLOAD</span>.
<br><br>The first parameter <span style="font-style: italic;">scrno</span> can be either 0 or 1 - it is used
<br>under dual screen mode to select the first or second screen,
<br><span style="font-style: italic;">scrno=1</span> is only available under dual screen mode, on other
<br>machines <span style="font-style: italic;">SSAVE</span> will break with the 'not found' (-7) error.
<br><br>The value returned represents the address where the screen
<br>is stored in memory.
<br><br><h3>NOTE:
<br></h3><br>If you wish to link the Ecran Manager Toolkit to a
<br>QLiberated program, you must not use the ECMAN but the ECMANcp
<br>version.
<br><br><h3>CROSS-REFERENCE:<br></h3><br>Saved pictures can be reloaded with <a style="font-style: italic;" href="KeywordsS.html#SSHOW">SSHOW</a>.
<br><hr style="width: 100%; height: 2px;"><h1><a name="SSHOW"></a>SSHOW</h1><br>Syntax: <span style="font-style: italic;">SSHOW adr
<br></span>Location: <span style="font-style: italic;">Ecran Manager
<br></span><br>This command restores a screen part saved with <span style="font-style: italic;">SSAVE</span>,
<br>therefore the parameter <span style="font-style: italic;">adr</span> must be the value returned by the
<br><span style="font-style: italic;">SSAVE</span> function. The memory area where the picture is saved is
<br>unaffected, so <span style="font-style: italic;">SSHOW</span> can be executed any number of times.
<br><br><h3>NOTE:
<br></h3><br>See <span style="font-style: italic;">SSAVE</span>.
<br><br><h3>CROSS-REFERENCE:<br></h3><br><a style="font-style: italic;" href="KeywordsS.html#SLOAD">SLOAD</a> displays a saved screen part and frees the memory
<br>used, <a style="font-style: italic;" href="KeywordsS.html#SMOVE">SMOVE</a> allows you to view such a saved screen part at a
<br>different location or on a different screen.
<br><hr style="width: 100%; height: 2px;"><h1><a name="SSTAT"></a>SSTAT</h1><br>Syntax: <span style="font-style: italic;">SSTAT
<br></span>Location: <span style="font-style: italic;">Ecran Manager
<br></span><br>The function <span style="font-style: italic;">SSTAT</span> returns either 0 or 1, corresponding to
<br>the first or second screen. The function is used to find out
<br>which of these screens is currently the visible screen. Unless
<br>you have Minerva or Amiga QDOS set up in dual screen mode,
<br>this is always 0.
<br><br><h3>Example:
<br></h3><br>Force the second screen to be displayed (this only works in
<br>Minerva or Amiga QDOS):
<br><br><span style="font-style: italic;">IF SSTAT = 0 THEN MODE 80,-1
<br></span><br><h3>NOTE:
<br></h3><br>See <span style="font-style: italic;">SSAVE</span>.
<br><br><h3>CROSS-REFERENCE:<br></h3><br><a style="font-style: italic;" href="KeywordsD.html#DEFAULT_SCR">DEFAULT_SCR</a>, <a style="font-style: italic;" href="KeywordsS.html#SCRON">SCRON</a>, <a style="font-style: italic;" href="KeywordsS.html#SCROFF">SCROFF</a>, <a style="font-style: italic;" href="KeywordsM.html#MODE
">MODE
</a><br><h3>
<br></h3><hr style="width: 100%; height: 2px;"><h1><a name="SSTEP"></a>SSTEP</h1><br>Syntax: <span style="font-style: italic;">SSTEP </span>[{<span style="font-style: italic;">#ch</span> | <span style="font-style: italic;">device_file</span>}] [<span style="font-style: italic;">;</span> [<span style="font-style: italic;">first</span>] [<span style="font-style: italic;">TO </span>[<span style="font-style: italic;">last</span>]]]
Location: <span style="font-style: italic;">Minerva (TRACE)
<br></span><br>Minerva is supplied with a very simple trace routine on the
<br>utility  disk  supplied  with  Minerva,  stored  in  the  file
<br>trace_bin. Before using the trace function, you will need to
<br>link in trace_bin with the line:
<br><br><span style="font-style: italic;">LRESPR flp1_trace_bin
<br></span><br>or something similar.
<br><br>Having done this, you can turn on the tracing function with
<br><span style="font-style: italic;">SSTEP</span> which will print to the given channel (default #0) or
<br><span style="font-style: italic;">file</span>, each line number and statement just before it is performed
<br>in the format:
<br><br><span style="font-style: italic;">line_no : statement_no
<br></span><br>You can also supply the trace function with a line range,
<br>so that it will only report on statements being executed
<br>within the given line range. The line range defaults to:
<br><span style="font-style: italic;"><br>1 TO 32767
<br></span><br>Whilst the trace function is enabled and the program is
<br>running within the given range, the interpreter will wait for
<br>a key to be pressed between each statement.
<br><br>As each command in each statement is executed, a single
<br>character is shown by the trace routine to represent the type
<br>of the command to be executed. However, the meaning of these
<br>symbols has never been revealed. In single-step mode, you need
<br>to press a key between each command!!
<br><br><h3>NOTE:
<br></h3><br>This trace toolkit will only work on Minerva.
<br><br><h3>CROSS-REFERENCE:<br></h3><br>See <a style="font-style: italic;" href="KeywordsT.html#TRON">TRON</a> and <a style="font-style: italic;" href="KeywordsT.html#TROFF">TROFF</a>.
<br><hr style="width: 100%; height: 2px;"><h1><a name="STAMP"></a>STAMP</h1><br>Syntax: <span style="font-style: italic;">STAMP string$
<br></span>Location: <span style="font-style: italic;">STAMP
<br></span><br>This command is the same as <span style="font-style: italic;">FORCE_TYPE</span> !
<br><hr style="width: 100%; height: 2px;"><h1><a name="STAT"></a>STAT</h1><br>Syntax: <span style="font-style: italic;">STAT </span>[<span style="font-style: italic;">#channel,</span>] [<span style="font-style: italic;">device</span>]
<br><br>or <span style="font-style: italic;">STAT \file</span> [<span style="font-style: italic;">,device</span>]
Location: <span style="font-style: italic;">Toolkit II, THOR XVI
<br></span><br>This command prints the name of a medium inserted into the
<br>given <span style="font-style: italic;">device</span> and the available sectors to the given <span style="font-style: italic;">channel
<br></span>(default #1), or <span style="font-style: italic;">file</span>. The device must be a directory device,
<br>such as FLP1_ (but not PAR or CON). If no device is stated,
<br>then the default data device is used.
<br><br><h3>Examples:
<br></h3><span style="font-style: italic;">STAT
<br>STAT ram1_
<br>STAT n2_win1_
<br>STAT #3,flp2_
<br>STAT #0
<br>STAT \mdv2_
<br>STAT _dat
<br>STAT \ram5_TMP,mdv1_
<br></span><br><h3>CROSS-REFERENCE:<br></h3><br><a style="font-style: italic;" href="KeywordsD.html#DLIST">DLIST</a> shows the default devices, <a style="font-style: italic;" href="KeywordsD.html#DATAD$">DATAD$</a> holds the default data
<br>device.
<br><br>Change default devices with <a style="font-style: italic;" href="KeywordsD.html#DATA_USE">DATA_USE</a>, <a style="font-style: italic;" href="KeywordsP.html#PROG_USE">PROG_USE</a> and <a style="font-style: italic;" href="KeywordsS.html#SPL_USE">SPL_USE</a>.
<br><br><a style="font-style: italic;" href="KeywordsD.html#DIR">DIR</a> and <a style="font-style: italic;" href="KeywordsW.html#WSTAT">WSTAT</a> provide other information about directory
<br>devices.
<br><hr style="width: 100%; height: 2px;"><h1><a name=".. STEP"></a>.. STEP</h1><br>Syntax: <span style="font-style: italic;">.. STEP stepwidth
<br></span>Location: <span style="font-style: italic;">QL ROM
<br></span><br>This keyword forms part of the <span style="font-style: italic;">FOR</span> structure and has no
<br>meaning on its own. Any attempt to enter it on its own will
<br>result in a 'Bad Line' error.
<br><br><h3>CROSS-REFERENCE:<br></h3><br>See <a style="font-style: italic;" href="KeywordsF.html#FOR">FOR</a>!
<br><hr style="width: 100%; height: 2px;"><h1><a name="STOP"></a>STOP</h1><br>Syntax: <span style="font-style: italic;">STOP
<br></span>Location: <span style="font-style: italic;">QL ROM, Toolkit II
<br></span><br>This command forces an interpreted program to be terminated
<br>at the position where <span style="font-style: italic;">STOP</span> appears in the listing. The program
<br>can then be continued (provided that the message 'PROC/FN
<br>cleared'  has  not  appeared)  by  using  the  command  <span style="font-style: italic;">CONTINUE</span>.
<br>Compiled programs terminate and remove themselves when <span style="font-style: italic;">STOP</span> is
<br>encountered.
<br><br><h3>Example:
<br></h3><br>This program will print 1 and 2 to channel #1 and stop at
<br>line 120. If it runs under the interpreter, <span style="font-style: italic;">CONTINUE</span> will restart
<br>at line 130 (after <span style="font-style: italic;">STOP</span>) and print 3 and 4. <span style="font-style: italic;">RETRY</span> does not
<br>continue here because it tries to re-run line 120 and stops
<br>again.
<br><span style="font-style: italic;">100 PRINT 1
<br>110 PRINT 2
<br>120 STOP
<br>130 PRINT 3
<br>140 PRINT 4
<br></span><br><h3>NOTE:
<br></h3><br>If Toolkit II is installed, <span style="font-style: italic;">STOP</span> clears <span style="font-style: italic;">WHEN ERRor</span> definitions.
<br><br><h3>CROSS-REFERENCE:<br></h3><br><a style="font-style: italic;" href="KeywordsR.html#RUN">RUN</a> starts a program and <a style="font-style: italic;" href="KeywordsG.html#GO TO">GO TO</a> jumps to a specified line.
<br><br>See <a style="font-style: italic;" href="KeywordsC.html#CONTINUE">CONTINUE</a>, <a style="font-style: italic;" href="KeywordsR.html#RETRY">RETRY</a>.
<br><br>Also see <a style="font-style: italic;" href="KeywordsQ.html#QUIT">QUIT</a>.
<br><hr style="width: 100%; height: 2px;"><h1><a name="STRIP"></a>STRIP</h1><br>Syntax: <span style="font-style: italic;">STRIP </span>[<span style="font-style: italic;">#ch,</span>]<span style="font-style: italic;"> colour
<br></span>Location: <span style="font-style: italic;">QL ROM
<br></span><br>Whenever a character is printed to the QL screen, it is
<br>made up of two components - the character itself which appears
<br>in the current <span style="font-style: italic;">INK</span> colour, and the rectangular block on which
<br>the character has been formed. The latter is known as the
<br>'strip' of the character and the size of this strip depends on
<br>the current character size and spacing (see <span style="font-style: italic;">CSIZE</span>).
<br><br>Normally, when you set the <span style="font-style: italic;">PAPER</span> colour of a window, the
<br>character <span style="font-style: italic;">STRIP</span> is set to the same colour. However, you may wish
<br>to print characters on a different background colour in order
<br>to make them stand out. <span style="font-style: italic;">STRIP</span> allows you to alter the colour of
<br>the character background in the specified window (default #1)
<br>to a given colour (or composite colour).
<br><br>However, if you want to print characters in a window
<br>without  using  this  character  background  (ie.  forming  a
<br>transparent strip), you will need to use the commands <span style="font-style: italic;">OVER 0</span> or
<br><span style="font-style: italic;">OVER -1</span> (see <span style="font-style: italic;">OVER</span> for more details).
<br><br><h3>Example:
<br></h3><br>A simple routine for printing out a Title on screen:
<br><span style="font-style: italic;">1 WINDOW 512,256,0,0:PAPER 4
<br>2 MODE 4:CLS
<br>3 TITLE #1,'This is a Title',120,95
<br>100 DEFine PROCedure TITLE(ch,text$,x,y)
<br>110 CSIZE 2,1:OVER 0
<br>120 CURSOR #ch,x-2,y+1
<br>130 STRIP #ch,0:PRINT #ch,FILL$(' ',LEN(text$))
<br>140 CURSOR #ch,x,y
<br>150 STRIP #ch,2:INK #ch,7
<br>160 PRINT #ch,text$
<br>170 CURSOR #ch,x-2,y+1
<br>180 OVER 1:INK#ch,0
<br>190 PRINT #ch,text$
<br>200 END DEFine
<br></span><br><h3>NOTE:
<br></h3><br>The <span style="font-style: italic;">STRIP</span> colour is automatically reset to the same as the
<br><span style="font-style: italic;">PAPER</span> colour following a <span style="font-style: italic;">PAPER</span> command.
<br><br><h3>CROSS-REFERENCE:<br></h3><br><a style="font-style: italic;" href="KeywordsP.html#PAPER">PAPER</a> also sets the <a style="font-style: italic;" href="KeywordsS.html#STRIP">STRIP</a> colour. Compare <a style="font-style: italic;" href="KeywordsI.html#IO_TRAP">IO_TRAP</a>.
<br><br><a style="font-style: italic;" href="KeywordsC.html#CSIZE">CSIZE</a> and <a style="font-style: italic;" href="KeywordsC.html#CHAR_INC">CHAR_INC</a> allow you to alter the spacing between
<br>characters.
<br><br><a style="font-style: italic;" href="KeywordsI.html#INK">INK</a> contains details of standard and composite colours.
<br><br>See also <a style="font-style: italic;" href="KeywordsI.html#INVERSE">INVERSE</a> which can also prove useful.
<br><hr style="width: 100%; height: 2px;"><h1><a name="... SUB"></a>... SUB</h1><br>Syntax: <span style="font-style: italic;">... SUB line
<br></span>Location: <span style="font-style: italic;">QL ROM
<br></span><br>This keyword forms part of the SuperBASIC keyword <span style="font-style: italic;">GO SUB</span> and
<br>has no purpose on its own. Any attempt to use it on its own
<br>will cause a 'Bad Line' error.
<br><br><h3>CROSS-REFERENCE:<br></h3><br>See <a style="font-style: italic;" href="KeywordsG.html#GO SUB">GO SUB</a>!
<br><hr style="width: 100%; height: 2px;"><h1><a name="SUSJOB"></a>SUSJOB</h1><br>Syntax: <span style="font-style: italic;">SUSJOB jobId,timeout
<br></span>Location: <span style="font-style: italic;">BTool
<br></span><br>See <span style="font-style: italic;">SJOB</span>.
<br><hr style="width: 100%; height: 2px;"><h1><a name="SWAP"></a>SWAP</h1><br>Syntax: <span style="font-style: italic;">SWAP var1,var2
<br></span><br>or <span style="font-style: italic;">SWAP var1$,var2$
<br></span>Location: <span style="font-style: italic;">SWAP, Math Package
<br></span><br>This command exchanges the values of the two variables. The
<br>parameters  can  be  either  numeric  variables  (integer  and
<br>floating point) or strings. Arrays are not allowed and both
<br>variables have to be the same type: <span style="font-style: italic;">SWAP a$,b</span> is illegal, even if
<br>a$ contained a valid number.
<br><br>Also, constant expressions such as <span style="font-style: italic;">SWAP a%,3</span> are not allowed,
<br>since this would not make any sense.
<br><br>Unfortunately, it is not possible to <span style="font-style: italic;">SWAP</span> two elements of an
<br>array, the example shows why this would be practicable.
<br><br>The Math Package variant also allows you to swap whole
<br>arrays.
<br><br><h3>Example:
<br></h3><br>In most kinds of sorting routines, a lot of swapping is
<br>necessary and an assembler routine which takes over this work
<br>makes the process quicker. Here is a Quicksort algorithm as a
<br>general subroutine. field$ is sorted from the left element to
<br>the right.
<br><span style="font-style: italic;">100 DEFine PROCedure QSort (field$,left,right)
<br>110  LOCal i,j,last$
<br>120  i=left: j=right: last$=field$(j)
<br>130  REPeat SortLoop1
<br>140    REPeat SortLoop2:IF field$(i)&lt;last$:i=i+1:ELSE EXIT SortLoop2
<br>150    REPeat SortLoop2:IF field$(j)&gt;last$:j=j-1:ELSE EXIT SortLoop2
<br>160    IF i&lt;=j THEN
<br>170      f1$=field$(i): f2$=field$(j): SWAP f1$,f2$
<br>180      field$(i)=f1$: field$(j)=f2$
<br>190      i=i+1: j=j-1
<br>200    END IF
<br>210    IF i&gt;j THEN EXIT SortLoop1
<br>220  END REPeat SortLoop1
<br>230  IF left&lt;j THEN QSort field$,left,j
<br>240  IF right&gt;i THEN QSort field$,i,right
<br>250 END DEFine QSort
<br></span><br>Compilers have a fixed stack size - you might have to raise
<br>this because this procedure iterates (ie. calls itself), which
<br>is something  which  eats  up the  stack  very  quickly.  The
<br>SuperBASIC interpreter uses a flexible stack.
<br><br><h3>CROSS-REFERENCE:<br></h3><br><a style="font-style: italic;" href="KeywordsL.html#LET
">LET
</a><br><h3>
<br></h3><hr style="width: 100%; height: 2px;"><h1><a name="SXTRAS"></a>SXTRAS</h1><br>Syntax: <span style="font-style: italic;">SXTRAS </span>[<span style="font-style: italic;">#channel,</span>] [<span style="font-style: italic;">character</span>]
Location: <span style="font-style: italic;">TinyToolkit
<br></span><br>This command lists all machine code SuperBASIC extensions
<br>in alphabetic order to the given channel (default #1). If a
<br><span style="font-style: italic;">character</span> is specified, then only those commands which appear
<br>later alphabetically will be listed - if <span style="font-style: italic;">character</span> is longer than
<br>one character, only the first character is recognised.
<br><br><h3>Example:
<br></h3><br><span style="font-style: italic;">SXTRAS s
<br></span><br><h3>CROSS-REFERENCE:<br></h3><br><a style="font-style: italic;" href="KeywordsE.html#EXTRAS">EXTRAS</a> and <a style="font-style: italic;" href="KeywordsT.html#TXTRAS">TXTRAS</a> do not sort the keywords.
<br><br>Also look at <a style="font-style: italic;" href="KeywordsV.html#VOCAB">VOCAB</a>.
<br><hr style="width: 100%; height: 2px;"><h1><a name="SYNCH%"></a>SYNCH%</h1><br>Syntax: <span style="font-style: italic;">SYNCH%
<br></span>Location: <span style="font-style: italic;">KMOUSE, MOUSE (DIY Toolkit - Vol I)
<br></span><br>This function is only used to debug the DIY Toolkit mouse
<br>drivers.
<br><br>It returns a value which is in the range 1...3 for a two
<br>button mouse and 1...5 for a three button mouse.  The value
<br>indicates which byte of the mouse message is due next and
<br>therefore when being used, you should see it circling between
<br>the upper and lower limits of the range.
<br><br>However, if the byte is corrupt or lost, then the value
<br>returned by this function will be zero.  This can indicate
<br>problems with either your serial port or the interface to the
<br>mouse - if the former, you should consider getting Hermes for
<br>your computer.
<br><br><h3>CROSS-REFERENCE:<br></h3><br>See <a style="font-style: italic;" href="KeywordsP.html#PTR_ON">PTR_ON</a> and <a style="font-style: italic;" href="KeywordsP.html#PTR_FN%">PTR_FN%</a>.
<br><hr style="width: 100%; height: 2px;"><h1><a name="SYSBASE"></a>SYSBASE</h1><br>Syntax: <span style="font-style: italic;">SYSBASE
<br></span>Location: <span style="font-style: italic;">QBASE (DIY Toolkit - Vol Q)
<br></span><br>The function <span style="font-style: italic;">SYSBASE</span> is identical to <span style="font-style: italic;">SYS_BASE</span>, see below.
<br><br>Don't forget: never assume that the System Variables are
<br>located at 163840 ($28000). They can move!!
<br><hr style="width: 100%; height: 2px;"><h1><a name="SYS_BASE"></a>SYS_BASE</h1><br>Syntax: <span style="font-style: italic;">SYS_BASE
<br></span>Location: <span style="font-style: italic;">SYSBASE, Fn
<br></span><br>The function <span style="font-style: italic;">SYS_BASE</span> returns the base address of the system
<br>variables.
<br><br><h3>Example:
<br></h3><span style="font-style: italic;">POKE_W SYS_BASE+140,8
<br>POKE_W SYS_BASE+142,3
<br></span><br>Sets the key repeat delay.
<br><br><h3>NOTE 1:
<br></h3><br>Users peeking and poking in the System Variables should
<br>know what they are doing!
<br><br><h3>NOTE 2:
<br></h3><br>Minerva and SMS offer another technique to read and alter
<br>system variables but these are specific to Minerva and SMS
<br>whilst <span style="font-style: italic;">SYS_BASE</span> works an every ROM. It is generally not advisable
<br>to access fixed addresses in memory as virtually everything
<br>can move around.
<br><br><h3>CROSS-REFERENCE:<br></h3><br><a style="font-style: italic;" href="KeywordsS.html#SYSBASE">SYSBASE</a>, <a style="font-style: italic;" href="KeywordsW.html#WIN_BASE">WIN_BASE</a>, <a style="font-style: italic;" href="KeywordsP.html#PEEK">PEEK</a>, <a style="font-style: italic;" href="KeywordsP.html#POKE">POKE</a>, <a style="font-style: italic;" href="KeywordsS.html#SCREEN">SCREEN</a>, <a style="font-style: italic;" href="KeywordsS.html#SYS_VARS">SYS_VARS</a>, <a style="font-style: italic;" href="KeywordsV.html#VER$
">VER$
</a><hr style="width: 100%; height: 2px;"><h1><a name="SYS_VARS"></a>SYS_VARS</h1><br>Syntax: <span style="font-style: italic;">SYS_VARS
<br></span>Location: <span style="font-style: italic;">THOR (all models)
<br></span><br>The function <span style="font-style: italic;">SYS_VARS</span> returns the base address of the system
<br>variables,  which  can  move  around  on  the  THOR  range  of
<br>computers, in much the same way as they can move on other
<br>implementations - it is therefore imperative that any program
<br>which uses the system variables works relative to the address
<br>returned by this function.
<br><br><h3>Example:
<br></h3><span style="font-style: italic;">POKE SYS_VARS+133,-1
<br></span><br>switches  off  the  THOR  XVI's  windowing  facilities  for
<br>windows opened after this command.
<br><br><h3>CROSS-REFERENCE:<br></h3><br><a style="font-style: italic;" href="KeywordsV.html#VER$(-2)">VER$(-2)</a> on Minerva ROMs and on SMS returns the base address
<br>of the system variables, as do <a style="font-style: italic;" href="KeywordsS.html#SYS_BASE">SYS_BASE</a> and <a style="font-style: italic;" href="KeywordsS.html#SYSBASE">SYSBASE</a>.
<br><hr style="width: 100%; height: 2px;"><h1><a name="S_FONT"></a>S_FONT</h1><br>Syntax: <span style="font-style: italic;">S_FONT </span>[<span style="font-style: italic;">#channel,</span>]<span style="font-style: italic;"> font1, font2
<br></span>Location: <span style="font-style: italic;">FONTS
<br></span><br>This command is exactly the same as <span style="font-style: italic;">CHAR_USE</span>.
<br><br><h3>CROSS-REFERENCE:<br></h3><br>See <a style="font-style: italic;" href="KeywordsC.html#CHAR_USE">CHAR_USE</a> and <a style="font-style: italic;" href="KeywordsC.html#CHAR_DEF">CHAR_DEF</a>.
<br><br>See also the Appendix on Fonts.
<br><hr style="width: 100%; height: 2px;"><h1><a name="S_LOAD"></a>S_LOAD</h1><br>Syntax: <span style="font-style: italic;">S_LOAD adr
<br></span>Location: <span style="font-style: italic;">TinyToolkit
<br></span><br><span style="font-style: italic;">S_LOAD</span> takes an address (<span style="font-style: italic;">adr</span>) returned by <span style="font-style: italic;">S_SAVE</span> and displays
<br>the saved screen just like <span style="font-style: italic;">S_SHOW</span> does.  Additionally, the
<br>reserved memory to which <span style="font-style: italic;">adr</span> points is released so that it can
<br>be used for other purposes. <span style="font-style: italic;">S_LOAD</span> therefore only works once on
<br>a given address.
<br><br><h3>NOTE 1:
<br></h3><br>Under odd conditions <span style="font-style: italic;">S_LOAD</span> will load and show more than had
<br>been stored with <span style="font-style: italic;">S_SAVE</span>. The <span style="font-style: italic;">Win</span>... set of commands replace the
<br><span style="font-style: italic;">S_</span>... set and get around these problems.
<br><br><h3>NOTE 2:
<br></h3><br><span style="font-style: italic;">S_LOAD</span> assumes that it needs to copy the stored screen to
<br>$20000 and that will not therefore work on Minerva's second
<br>screen. It also assumes the screen is 512x256 pixels and will
<br>not work on higher resolutions or under dual screen mode.
<br><br><h3>WARNING:
<br></h3><br>A wrong address leads to crashes!
<br><hr style="width: 100%; height: 2px;"><h1><a name="S_SAVE"></a>S_SAVE</h1><br>Syntax: <span style="font-style: italic;">S_SAVE (#wind)
<br></span>Location: <span style="font-style: italic;">TinyToolkit
<br></span><br>This function causes the contents of the window <span style="font-style: italic;">#wind</span> to be
<br>stored in memory and the address is then returned. Do not
<br>forget the return value!
<br><br><span style="font-style: italic;">#wind</span> must be a window or a bad parameter error (-15) is
<br>reported.
<br><br><h3>Example:
<br></h3><span style="font-style: italic;">100 CLS
<br>110 PRINT PEEK$(0,1000)
<br>120 adr1 = S_SAVE(#1)
<br>130 CLS
<br>140 PRINT PEEK$(100,1000)
<br>150 adr2 = S_SAVE(#1)
<br>160 FOR n=1 TO 20: S_SHOW adr1: S_SHOW adr2
<br>170 S_LOAD adr1: S_LOAD adr2
<br></span><br><h3>NOTE:
<br></h3><br>Although <span style="font-style: italic;">S_SAVE</span> will save a window stored on the second
<br>screen provided by Minerva and Amiga QDOS, it assumes the
<br>screen resolution is 512x256 pixels and cannot work with
<br>higher resolutions.
<br><br><h3>CROSS-REFERENCE:<br></h3><br><a style="font-style: italic;" href="KeywordsS.html#S_LOAD">S_LOAD</a> and <a style="font-style: italic;" href="KeywordsS.html#S_SHOW">S_SHOW</a> view the saved screen part.
<br><br>Memory taken by <a style="font-style: italic;" href="KeywordsS.html#S_SAVE">S_SAVE</a> cannot be freed with <a style="font-style: italic;" href="KeywordsR.html#RECHP">RECHP</a> or <a style="font-style: italic;" href="KeywordsC.html#CLCHP">CLCHP</a>, only
<br>with <a style="font-style: italic;" href="KeywordsS.html#S_LOAD">S_LOAD</a>.
<br><br>See also <a style="font-style: italic;" href="KeywordsS.html#SCR_STORE">SCR_STORE</a> and <a style="font-style: italic;" href="KeywordsS.html#SAVEPIC">SAVEPIC</a> for alternatives.
<br><hr style="width: 100%; height: 2px;"><h1><a name="S_SHOW"></a>S_SHOW</h1><br>Syntax: <span style="font-style: italic;">S_SHOW adr
<br></span>Location: <span style="font-style: italic;">TinyToolkit
<br></span><br><span style="font-style: italic;">adr</span> must be a value returned by <span style="font-style: italic;">S_SAVE</span>: the command <span style="font-style: italic;">S_SHOW
<br></span>displays the screen information stored by <span style="font-style: italic;">S_SAVE</span>. The screen is
<br>however retained in memory for future access.
<br><br><h3>NOTE:
<br></h3><br>This command suffers with the same problems as <span style="font-style: italic;">S_LOAD</span>.
<br><br><h3>WARNING:
<br></h3><br>A wrong address leads to serious crashes.
<br><br><h3>CROSS-REFERENCE:<br></h3><br><a style="font-style: italic;" href="KeywordsS.html#S_SAVE
">S_SAVE
</a><br><h3>
<br></div>
</body>
</html>
