    
<H1><A name="DATA" id="DATA"></A>DATA</H1>

<P>
    Syntax: <SPAN style="font-style: italic;">DATA expression</SPAN> <SUP>*</SUP>[<SPAN style="font-style: italic;">,expression</SPAN>]<SUP>*<BR></SUP> Location: <SPAN style="font-style: italic;">QL ROM<BR></SPAN>
    The QL allows a SuperBASIC program to store a set of data
    in the program itself, which can then be assigned to a given
    variable by the <SPAN style="font-style: italic;">READ</SPAN> command. The <SPAN style="font-style: italic;">DATA</SPAN> statement marks these
    areas for use by <SPAN style="font-style: italic;">READ</SPAN>.
    
    The information which can be stored at a <SPAN style="font-style: italic;">DATA</SPAN> statement is
    basically anything which can be stored in a variable,
    including strings, variables, constants and expressions.
    
    Expressions will be calculated at the time that the item in
    question is <SPAN style="font-style: italic;">READ</SPAN>.
    
    Whilst a program is running, unless a <SPAN style="font-style: italic;">READ</SPAN> command is found,
    <SPAN style="font-style: italic;">DATA</SPAN> statements are ignored.
    
    
<H3>Example:</H3>

<P><SPAN style="font-style: italic;">1000 DATA "QL User",100,x*1000+10<BR></SPAN>
    
<H3>
    NOTE 1:</H3>

<P>
    On Pre MG ROMs, if any values in a <SPAN style="font-style: italic;">DATA</SPAN> statement start with
    a bracket, then the other items on the line may be ignored.
    If you must specify items starting with brackets, use for
    example:
    
    <SPAN style="font-style: italic;">DATA 0+(...<BR></SPAN>
    This is fixed by MG ROMs, Minerva and SMS.
    
    
<H3>NOTE 2:</H3>

<P>
    Unless you have a Minerva ROM (v1.77 or later) or SMS, when
    you enter the <SPAN style="font-style: italic;">DATA</SPAN> statement, you will always need to type a
    space after the word <SPAN style="font-style: italic;">DATA</SPAN> as the parser will not automatically
    insert one.
    
    On later implementations a space is automatically inserted
    where the first <SPAN style="font-style: italic;">DATA</SPAN> expression is a string, eg. <SPAN style="font-style: italic;">DATA'Hello'</SPAN>.
    
    
<H3>NOTE 3:</H3>

<P>
    Entering a <SPAN style="font-style: italic;">DATA</SPAN> statement as a direct command from #0 has no
    effect. Under SMS an error is reported 'DATA in command line
    has no meaning'.
    
    
<H3>NOTE 4:</H3>

<P>
    Due to the way in which the interpreter works, it is always
    more efficient to place <SPAN style="font-style: italic;">DATA</SPAN> statements at the start of a
    program (the search function always starts at the first line
    of the program).
    
    
<H3>NOTE 5:</H3>

<P>
    Various SuperBASIC compilers (such as Turbo) do not support
    expressions in <SPAN style="font-style: italic;">DATA</SPAN> statements.
    
    
<H3>NOTE 6:</H3>

<P>
    There appears to be no real check on the parameters given
    for <SPAN style="font-style: italic;">DATA</SPAN>, so the following line can be entered, but will in fact
    cause an error when you try to <SPAN style="font-style: italic;">READ</SPAN> it:
    
    <SPAN style="font-style: italic;">10 DATA 1000,PRINT,10<BR></SPAN>
    SMS's improved interpreter does do more checks than earlier
    implementations and will prevent you from entering the line:
    
    <SPAN style="font-style: italic;">10 DATA 1,1,2a,3<BR></SPAN>
    which other implementations allow (but give an error when
    they try to <SPAN style="font-style: italic;">READ</SPAN> the line).
    
    
<H3>NOTE 7:</H3>

<P>
    SMS may complain if you create numerous DATA statements
    inside a <SPAN style="font-style: italic;">DEFine PROCedure</SPAN> or <SPAN style="font-style: italic;">DEFine FuNction</SPAN> struture.
    
    
<H3>CROSS-REFERENCE:</H3>

<P>
    <A style="font-style: italic;" href="KeywordsR.html#RESTORE">RESTORE</A> allows you to set the current <A style="font-style: italic;" href="KeywordsD.html#DATA">DATA</A> pointer.
    
    <A style="font-style: italic;" href="KeywordsR.html#READ">READ</A> will assign the value at the current <A style="font-style: italic;" href="KeywordsD.html#DATA">DATA</A> pointer to the
    given variable.
    
    <A style="font-style: italic;" href="KeywordsE.html#EOF">EOF</A> will return the value one if there are no more <A style="font-style: italic;" href="KeywordsD.html#DATA">DATA</A> statements in the current program.
    <HR style="width: 100%; height: 2px;">
    
<H1><A name="DATAD$" id="DATAD$"></A>DATAD$</H1>

<P>
    Syntax: <SPAN style="font-style: italic;">DATAD$<BR></SPAN> Location: <SPAN style="font-style: italic;">Toolkit II<BR></SPAN>
    This function always contains the current default data
    device, which is an unofficial QDOS standard and supported by
    all Toolkit II extensions, original SuperBASIC commands and
    most good software.
    
    The default device means that if no other device is stated,
    if appropriate, this device will be used. The default data
    device will also be consulted if a device name is supplied but
    the given file cannot be found on that device. For example,
    assuming that <SPAN style="font-style: italic;">DATAD$='flp2_'</SPAN>, if you enter <SPAN style="font-style: italic;">VIEW ram1_example_txt</SPAN> and the
    file <SPAN style="font-style: italic;">example_txt</SPAN> is not present on <SPAN style="font-style: italic;">ram1_</SPAN>, the command will then try
    <SPAN style="font-style: italic;">flp2_ram1_example_txt</SPAN>.
    
    This idea can be extended to use prefixes as
    sub-directories. Sub-directories are separated by underscores,
    <SPAN style="font-style: italic;">DATAD$</SPAN> always ends with an underscore.
    
    
<H3>Example:</H3>

<P>
    TK2DIR reads all files from the current default data device
    
    via a pipe, strips off any network sub-directory prefix and
    
    then writes the remainder of the filenames into the string
    
    array passed by parameter.
    <SPAN style="font-style: italic;">100 DEFine PROCedure TK2DIR (Verz$)
    110 LOCal e,n,sd$,sd,us
    120 sd$=DATAD$: us="_" INSTR sd$
    130 IF us=3 AND LEN(sd$)&gt;3 and sd$(1)="n" THEN
    140 IF sd$(2) INSTR "12345678":sd$=sd$(4 TO):us="_" INSTR sd$
    160 END IF
    170 OPEN#4,pipe_10000: STAT#4: WDIR#4
    180 e=FILE_OPEN(#3,pipe_,CHANID(#4)): CLOSE#4
    200 INPUT#3,Verz$(0)
    210 FOR n=1 TO DIMN(Verz$)
    220 IF EOF(#3) THEN EXIT n
    230 INPUT#3,Verz$(n)
    240 Verz$(n)=Verz$(n)(us+1 TO)
    250 END FOR n
    260 CLOSE#3
    270 END DEFine TK2DIR<BR></SPAN>
    <SPAN style="font-style: italic;">DIM file$(20,30)
    
    TK2DIR file$
    
    CLS: PRINT file$<BR></SPAN>
    Here only the first 20 files will be read into file$.
    
    NB. This would require substantial amendment to make it
    
    search sub-directories also.
    
    
<H3>CROSS-REFERENCE:</H3>

<P>
    <A style="font-style: italic;" href="KeywordsD.html#DATA_USE">DATA_USE</A> defines the default device; <A style="font-style: italic;" href="KeywordsD.html#DUP">DUP</A>, <A style="font-style: italic;" href="KeywordsD.html#DDOWN">DDOWN</A> and <A style="font-style: italic;" href="KeywordsD.html#DNEXT">DNEXT</A> allow
    you to move around the sub-directory tree.
    
    <A style="font-style: italic;" href="KeywordsP.html#PROGD$">PROGD$</A> returns the default program device.
    
    <A style="font-style: italic;" href="KeywordsD.html#DLIST">DLIST</A> prints all default devices.
    <HR style="width: 100%; height: 2px;">
    
<H1><A name="DATAREG" id="DATAREG"></A>DATAREG</H1>

<P>
    Syntax: <SPAN style="font-style: italic;">DATAREG</SPAN> [<SPAN style="font-style: italic;">number</SPAN>]<SPAN style="font-style: italic;">number=0...3<BR></SPAN> Location: <SPAN style="font-style: italic;">TRAPS (DIY Toolkit Vol T)<BR></SPAN>
    This function returns the value of the Machine code data
    register <SPAN style="font-style: italic;">number</SPAN> (default 0) following the completion of a <SPAN style="font-style: italic;">MTRAP</SPAN>,
    <SPAN style="font-style: italic;">QTRAP</SPAN> or <SPAN style="font-style: italic;">BTRAP</SPAN> command.
    
    Because the default data register <SPAN style="font-style: italic;">number</SPAN> is 0:
    
    <SPAN style="font-style: italic;">PRINT DATAREG<BR></SPAN>
    will be 0 if no error occured during the TRAP call or else
    the relevant error code.
    
    <SPAN style="font-style: italic;">Number</SPAN> will let you read the value of the relevant data
    register D0, D1, D2 or D3.
    
    
<H3>CROSS-REFERENCE:</H3>

<P>
    <A style="font-style: italic;" href="KeywordsA.html#ADDREG">ADDREG</A> allows you to read machine code address registers -
    see this for an example of <A style="font-style: italic;" href="KeywordsD.html#DATREG">DATREG</A>.
    
    See <A style="font-style: italic;" href="KeywordsM.html#MTRAP">MTRAP</A>, <A style="font-style: italic;" href="KeywordsQ.html#QTRAP">QTRAP</A> and <A style="font-style: italic;" href="KeywordsB.html#BTRAP">BTRAP</A>.
    <HR style="width: 100%; height: 2px;">
    
<H1><A name="DATASPACE" id="DATASPACE"></A>DATASPACE</H1>

<P>
    Syntax: <SPAN style="font-style: italic;">DATASPACE (file$)<BR></SPAN> Location: <SPAN style="font-style: italic;">Turbo Toolkit<BR></SPAN>
    This function returns the amount of dataspace which has
    been set aside for the given <SPAN style="font-style: italic;">file$</SPAN>. It is therefore similar to
    <SPAN style="font-style: italic;">FDAT</SPAN> and <SPAN style="font-style: italic;">FILE_DAT</SPAN>. Default devices are not supported, however
    errors are not reported.
    
    The following error values may also be returned by the
    function:
    
    -2The file is not executable
    
    -3 or -6 Insufficient memory to open file
    
    -7File does not exist
    
    -9Device or file is being written to by something
    else.
    
    -12The device is valid, but the filename is not
    
    -16Bad or changed medium error
    
    
<H3>Example:</H3>

<P>
    <SPAN style="font-style: italic;">PRINT DATASPACE('win1_start_QD_exe')<BR></SPAN>
    
<H3>CROSS-REFERENCE:</H3>

<P>
    <A style="font-style: italic;" href="KeywordsD.html#DATA_AREA">DATA_AREA</A> allows you to set the dataspace for a compiled
    program.
    
    See also <A style="font-style: italic;" href="KeywordsF.html#FDAT">FDAT</A>.
    <HR style="width: 100%; height: 2px;">
    
<H1><A name="DATA_AREA" id="DATA_AREA"></A>DATA_AREA</H1>

<P>
    Syntax: <SPAN style="font-style: italic;">DATA_AREA size</SPAN> <SPAN style="font-style: italic;">size=0...850<BR></SPAN> Location: <SPAN style="font-style: italic;">Turbo Toolkit<BR></SPAN>
    This command is only used by the Turbo compiler and should
    be located at the start of your program before any active
    program lines.
    
    The command specifies how much dataspace (<SPAN style="font-style: italic;">size</SPAN> kilobytes)
    should be specified for the compiled program. This dataspace
    is used by a task for stack space and a temporary store whilst
    it is running.
    
    
<H3>Example:</H3>

<P>
    <SPAN style="font-style: italic;">10 DATA_AREA 32<BR></SPAN>
    
<H3>NOTE:</H3>

<P>
    This setting will override a previous <SPAN style="font-style: italic;">TURBO_objdat</SPAN> directive in
    the same program. It will also be overridden by a later
    <SPAN style="font-style: italic;">TURBO_objdat</SPAN> directive in the same program.
    
    
<H3>CROSS-REFERENCE:</H3>

<P>
    <A style="font-style: italic;" href="KeywordsD.html#DATASPACE">DATASPACE</A> allows you to find out how much dataspace has been
    set aside for a program.
    
    See <A style="font-style: italic;" href="KeywordsC.html#COMPILED">COMPILED</A> and <A style="font-style: italic;" href="KeywordsT.html#TURBO_objfil">TURBO_objfil</A> for other compiler directives.
    
    <A style="font-style: italic;" href="KeywordsT.html#TURBO_objdat">TURBO_objdat</A> is exactly the same.
    <HR style="width: 100%; height: 2px;">
    
<H1><A name="DATA_USE" id="DATA_USE"></A>DATA_USE</H1>

<P>
    Syntax: <SPAN style="font-style: italic;">DATA_USE default_device<BR></SPAN> Location: <SPAN style="font-style: italic;">Toolkit II, THOR XVI<BR></SPAN>
    If you have Toolkit II installed, all of the additional
    extensions connected with file or device handling and all
    original SuperBASIC commands use the default device if no
    other device name is specified. On a THOR XVI, some of the
    commands support default devices without Toolkit II.
    
    The effect of the default devices would make <SPAN style="font-style: italic;">LOAD proggy_bas<BR></SPAN> work as <SPAN style="font-style: italic;">LOAD flp1_proggy_bas</SPAN> (assuming that flp1_ is the default data
    device). The actual effect depends on the command being
    executed, but generally the file will be looked for in three
    steps:
    
    (1) Does the given file include a valid device?:
    proggy_bas does not, ram1_proggy_bas does (ram1_). If not, the
    parameter is assumed to be a filename and Toolkit II looks for
    a device on which it can find it; so
    
    (2) Add the default data device to the filename. If that
    does not work, then:
    
    (3) Add the default program device (<SPAN style="font-style: italic;">PROGD$</SPAN>) and try again.
    
    The default program device is defined by <SPAN style="font-style: italic;">PROG_USE</SPAN>, <SPAN style="font-style: italic;">DATA_USE<BR></SPAN> defines the default data device. See <SPAN style="font-style: italic;">PROG_USE</SPAN> as to the
    difference between the two defaults.
    
    The last two steps add the default devices to the filename.
    These defaults can be interpreted as sub-directories. Here, a
    sub-directory means that where a prefix is separated by
    underscores, this means that the file concerned is held in the
    sub-directory specified by that prefix.
    
    Thus, win1_QUILL_readme_doc could be readme_doc on a hard
    disk in the sub-directory QUILL or doc in the sub-subdirectory
    readme of QUILL. Sub-directories can be nested but the
    complete filename, including prefix must not be longer than 41
    characters (note that if you are using a network device, for
    example n1_win1_proggy_bas, the maximum permitted filename
    length is reduced to 39 in current versions of the QL device
    drivers).
    
    
<H3>Examples:</H3>

<P><SPAN style="font-style: italic;">DATA_USE flp1_QUILL (or flp1_QUILL_)
    DATA_USE MDV2_
    DATA_USE win1_Psion_ARCHIVE
    DATA_USE n2_ram1_
    DATA_USE mdv3_games_arcade_invaders_<BR></SPAN>
    
<H3>NOTE 1:</H3>

<P>
    If there is no underscore at the end of <SPAN style="font-style: italic;">DATA_USE</SPAN>'s parameter,
    it will be added automatically.
    
    
<H3>NOTE 2:</H3>

<P>
    A few programs do work with these sub-directories (if
    Toolkit II is present), but most do not. To make any program
    work with them, you can fool them so that they believe that
    for instance FLP1_games_BOOT is FLP1_BOOT or BOOT (default
    device FLP1_games):
    
    See the <SPAN style="font-style: italic;">PTH_</SPAN>... and <SPAN style="font-style: italic;">DEV_</SPAN>... commands.
    
    
<H3>NOTE 3:</H3>

<P>
    Toolkit II sub-directories should not be mixed up with
    wild cards. <SPAN style="font-style: italic;">DATA_USE flp1__bas</SPAN> makes <SPAN style="font-style: italic;">WDIR</SPAN> list all BASIC programs on
    floppy 1, but after <SPAN style="font-style: italic;">PROG_USE flp1__bas</SPAN>, <SPAN style="font-style: italic;">SAVE test</SPAN> will not save the
    current program as <SPAN style="font-style: italic;">flp1_test_bas</SPAN> but as <SPAN style="font-style: italic;">flp1__bas_test</SPAN>.
    
    
<H3>NOTE 4:</H3>

<P>
    The default device is the current sub-directory on level-2
    drivers.
    
    
<H3>NOTE 5:</H3>

<P>
    If you wish to turn off this feature, you can assign a null
    string ("") to <SPAN style="font-style: italic;">DATA_USE</SPAN>.
    
    
<H3>NOTE 6:</H3>

<P>
    The default devices cannot exceed 32 characters (plus a
    final underscore) - any attempt to assign a longer string will
    result in the error 'Bad Parameter' (error -15).
    
    
<H3>CROSS-REFERENCE:</H3>

<P>
    <A style="font-style: italic;" href="KeywordsD.html#DATAD$">DATAD$</A> contains the default data device, <A style="font-style: italic;" href="KeywordsD.html#DLIST">DLIST</A> lists all
    default devices.
    
    <A style="font-style: italic;" href="KeywordsD.html#DDOWN">DDOWN</A>, <A style="font-style: italic;" href="KeywordsD.html#DUP">DUP</A> and <A style="font-style: italic;" href="KeywordsD.html#DNEXT">DNEXT</A> allow you to skip from sub-directory to
    sub-directory, climb up the tree and much more.
    
    <A style="font-style: italic;" href="KeywordsP.html#PROG_USE">PROG_USE</A> changes the default program device, and <A style="font-style: italic;" href="KeywordsS.html#SPL_USE">SPL_USE</A> /<A style="font-style: italic;" href="KeywordsD.html#DEST_USE">DEST_USE</A> the default destination device.
    
    See also <A style="font-style: italic;" href="KeywordsD.html#DEV_USE">DEV_USE</A> and <A style="font-style: italic;" href="KeywordsP.html#PTH_ADD">PTH_ADD</A> for path search.
    <HR style="width: 100%; height: 2px;">
    
<H1><A name="DATE" id="DATE"></A>DATE</H1>

<P>
    Syntax: <SPAN style="font-style: italic;">DATE<BR></SPAN>
    or <SPAN style="font-style: italic;">DATE (year,month,day,hour,minute,second)(Minerva &amp; NewDate)
    <BR></SPAN> or <SPAN style="font-style: italic;">DATE (year,month,day,hour,minute</SPAN> [<SPAN style="font-style: italic;">,second</SPAN>]<SPAN style="font-style: italic;">)(SMS v2.57+)
    <BR></SPAN> Location: <SPAN style="font-style: italic;">QL ROM, NewDate<BR></SPAN>
    The function <SPAN style="font-style: italic;">DATE</SPAN> returns the current date and time as the
    number of seconds since midnight on 1st January 1961.
    
    For example, <SPAN style="font-style: italic;">PRINT DATE$(DATE)</SPAN> is exactly the same as <SPAN style="font-style: italic;">PRINT DATE$</SPAN>.
    
    The NewDate version of this command is exactly the same as
    Minerva's implementation.
    
    
<H3>NOTE:</H3>

<P>
    Due to the way in which the system clock is implemented on
    the QL (it is stored as a 32-bit unsigned number), early
    versions of this function have problems with dates after
    3.14:07 on 19th January 2029 (this would result in a number of
    seconds which needs to be stored in all 32 bits). Although the
    <SPAN style="font-style: italic;">SDATE</SPAN> and <SPAN style="font-style: italic;">DATE$</SPAN> functions treat the number correctly, the <SPAN style="font-style: italic;">DATE<BR></SPAN> function ignores the most significant bit, meaning that it
    returns the wrong value for dates later than this.
    
    The NewDate version of this function, as well as Minerva
    ROMs and under SMS, <SPAN style="font-style: italic;">DATE</SPAN> treats the figure as a 32-bit signed
    number. Although this allows the line <SPAN style="font-style: italic;">PRINT DATE$(DATE)</SPAN> to work
    correctly for all dates between 0.0:00 on 1st Jan 1961 and
    6.28:15 on 6th Feb 2097, note that any dates after 3.14:07 on
    19th January 2029 are returned as negative numbers, with
    earlier dates giving the largest negative number.
    
    
<H3>MINERVA NOTE:</H3>

<P>
    <SPAN style="font-style: italic;">DATE</SPAN> can accept the same six parameters accepted by <SPAN style="font-style: italic;">SDATE</SPAN>.
    This enables you (for instance) to find out the day on a given
    date without having to alter the QL clock:
    <SPAN style="font-style: italic;">PRINT DAY$(DATE(1968,6,25,1,1,0))<BR></SPAN>
    This does also enable you to easily set the update date on
    a given file without altering the QL clock:
    <SPAN style="font-style: italic;">SET_FUPDT \flp2_test_file,DATE(1990,11,1,0,0,0)<BR></SPAN>
    
<H3>SMS NOTE:</H3>

<P>
    As from v2.57, <SPAN style="font-style: italic;">DATE</SPAN> has been brought up to the same standard
    as on Minerva. However, the seconds do not have to be
    specified and will default to zero if omitted.
    
    
<H3>CROSS-REFERENCE:</H3>

<P>
    <A style="font-style: italic;" href="KeywordsS.html#SDATE">SDATE</A> will alter the QL clock.
    
    <A style="font-style: italic;" href="KeywordsD.html#DAY$">DAY$</A> returns the day on the given date, <A style="font-style: italic;" href="KeywordsD.html#DATE$">DATE$</A> will return the
    current date.
    
    <A style="font-style: italic;" href="KeywordsT.html#T_ON">T_ON</A> and <A style="font-style: italic;" href="KeywordsT.html#T_START">T_START</A> can be used for accurate stop-watches for
    timing programs.
    <HR style="width: 100%; height: 2px;">
    
<H1><A name="DATE$" id="DATE$"></A>DATE$</H1>

<P>
    Syntax: <SPAN style="font-style: italic;">DATE$</SPAN> [<SPAN style="font-style: italic;">(date)</SPAN>]
    
    or <SPAN style="font-style: italic;">DATE$ (year,month,day,hour,minute</SPAN> [<SPAN style="font-style: italic;">,second</SPAN>]<SPAN style="font-style: italic;">)(SMS v2.57+ only)<BR></SPAN> Location: <SPAN style="font-style: italic;">QL ROM<BR></SPAN>
    <SPAN style="font-style: italic;">DATE$</SPAN> holds the current system date and time as a string in
    the following format: yyyy mmm dd hh:mm:ss
    
    1991 May 06 18:18:44 (example)
    
    | | | | | |
    
    | | | | | \---- 19 TO 21 (seconds)
    
    | | | | \------- 16 TO 17 (minutes)
    
    | | | \---------- 13 TO 14 (hour, 24h)
    
    | | \------------- 10 TO 12 (day)
    
    | \----------------- 6 TO 8 (month as string)
    
    \--------------------- 1 TO 4 (year)
    
    If a parameter is used then <SPAN style="font-style: italic;">DATE$</SPAN> should return the date and
    time the given number of seconds after 1/1/1961, <SPAN style="font-style: italic;">DATE$(DATE)</SPAN> is
    identical to <SPAN style="font-style: italic;">DATE$</SPAN> for any date before 3.14:07 on 19th Jan 2029
    (see <SPAN style="font-style: italic;">ADATE</SPAN>). However, for times after this date, the number of
    seconds since 1/1/1961 is represented by a negative number,
    calculated by number of seconds - 2147483648. This means that
    to calculate a specified date after 3.14:06 on 19th Jan 2029,
    the following short function is required (for non-Minerva ROMs
    and non-SMS machines only):
    <SPAN style="font-style: italic;">100 DEFine FuNction DATE20$(seconds)
    110 offset='2147483648'
    120 RETurn DATE$(seconds-offset)
    130 END DEFine<BR></SPAN>
    This function is not needed on Minerva ROMs, with the
    NewDate version of <SPAN style="font-style: italic;">DATE</SPAN> or under SMS - see <SPAN style="font-style: italic;">DATE</SPAN> for a full
    explanation.
    
    
<H3>Example 1:</H3>

<P>
    It may be useful to read the different parts of the date
    
    from <SPAN style="font-style: italic;">DATE$</SPAN> and reformat them for use in letters.
    <SPAN style="font-style: italic;">100 D$=DATE$
    110 year=D$(1 TO 4): day=D$(10 TO 12):D$=D$(6 TO 8)
    120 month=(D$ INSTR "..JanFebMarAprMayJunJulAugSepOctNovDec")/3
    130 DIM month$(12,9): RESTORE 150
    140 FOR m=1 TO 12: READ month$(m)
    150 DATA "January","February","March","April","May","June","July"
    160 DATA "August","September","October","November","December"
    170 ALTKEY "d",month$(month)&amp;" "&amp;day&amp;", "&amp;year<BR></SPAN>
    
<H3></H3>

<P>
    
<H3>Example 2:</H3>

<P>
    How to find the number of days between two dates:
    <SPAN style="font-style: italic;">100 date1=DATE(2032,3,30,10,0,0)
    110 date2=DATE(2000,3,30,10,0,0)
    120 PRINT DAYS_DIFF(date2,date1)
    130 :
    140 DEFine FuNction DAYS_DIFF(dy1,dy2)
    150 LOCal offset,base_date,diff
    160 offset='2147483648'
    170 base_date=DATE(2029,1,19,3,14,7)
    180 IF (date1&gt;=0 AND date2&gt;=0) OR (date1&lt;0 AND date2&lt;0)
    190 IF date1&gt;=date2:diff=date1-date2:ELSE diff=date2-date1
    240 ELSE
    250 IF date1&lt;0
    260 diff=(base_date-date2)+(date1+offset
    270 ELSE
    280 diff=(base_date-date1)+(date2+offset)
    290 END IF
    300 END IF
    310 seconds_per_day=24*60*60
    320 RETurn INT(diff/seconds_per_day)
    330 END DEFine<BR></SPAN>
    
<H3>NOTE 1:</H3>

<P>
    Parts of string functions cannot be obtained by slicing
    them directly. Expressions such as <SPAN style="font-style: italic;">DATE$(DATE)(1 TO 4)</SPAN> are only valid
    on Minerva ROMs or under SMS. On other ROMs, the value of the
    function has to be copied to a variable before being sliced
    (as demonstrated in example 1).
    
    
<H3>NOTE 2:</H3>

<P>
    The QL's system clock is limited in the range of dates it
    can cover - see <SPAN style="font-style: italic;">ADATE</SPAN>.
    
    
<H3>MINERVA NOTE:</H3>

<P>
    Although on Minerva (v1.77 and later), <SPAN style="font-style: italic;">DATE$</SPAN> can now be
    directly sliced to extract the year for instance. It is
    however, necessary to tell the operating system that you are
    not actually providing a parameter to be converted into a
    date. This is achieved by using the following format to slice
    <SPAN style="font-style: italic;">DATE$</SPAN>:
    
    <SPAN style="font-style: italic;">DATE$</SPAN> [<SPAN style="font-style: italic;">(</SPAN>[<SPAN style="font-style: italic;">seconds</SPAN>]<SPAN style="font-style: italic;">)</SPAN> [<SPAN style="font-style: italic;">(</SPAN>[<SPAN style="font-style: italic;">start</SPAN>] <SPAN style="font-style: italic;">TO</SPAN> [<SPAN style="font-style: italic;">end</SPAN>]<SPAN style="font-style: italic;">)</SPAN>]]
    
    The following are therefore all valid on Minerva:
    
    <SPAN style="font-style: italic;">PRINT DATE$
    
    PRINT DATE$(DATE+86400)
    
    TIMER$=DATE$()(13 TO )
    
    YEAR$=(DATE$)(1 TO 4)
    
    YEAR$=DATE$(1E9)( TO 4)<BR></SPAN>
    Only the first two examples will work on other ROMs.
    
    
<H3>SMS NOTE:</H3>

<P>
    <SPAN style="font-style: italic;">DATE$</SPAN> works mainly as per Minerva, however from v2.57+, you
    can also supply five or six parameters to <SPAN style="font-style: italic;">DATE$</SPAN> in common with
    <SPAN style="font-style: italic;">DATE</SPAN> and <SPAN style="font-style: italic;">SDATE</SPAN>.
    
    
<H3>CROSS-REFERENCE:</H3>

<P>
    Use <A style="font-style: italic;" href="KeywordsS.html#SDATE">SDATE</A> and <A style="font-style: italic;" href="KeywordsA.html#ADATE">ADATE</A> to set and alter the system time and date.
    
    <A style="font-style: italic;" href="KeywordsD.html#DATE">DATE</A> holds the current date as a floating point number, <A style="font-style: italic;" href="KeywordsD.html#DAY$">DAY$</A> holds the weekday as a short string.
    <HR style="width: 100%; height: 2px;">
    
<H1><A name="DAY$" id="DAY$"></A>DAY$</H1>

<P>
    Syntax: <SPAN style="font-style: italic;">DAY$</SPAN> [<SPAN style="font-style: italic;">(date)</SPAN>]
    
    or <SPAN style="font-style: italic;">DAY$ (year,month,day,hour,minute</SPAN> [<SPAN style="font-style: italic;">,second</SPAN>]<SPAN style="font-style: italic;">)</SPAN> <SPAN style="font-style: italic;">(SMS v2.57+ only)<BR></SPAN> Location: <SPAN style="font-style: italic;">QL ROM<BR></SPAN>
    <SPAN style="font-style: italic;">DAY$</SPAN> holds the current day as a three character string:
    
    Sun Sunday
    
    Mon Monday
    
    Tue Tuesday
    
    Wed Wednesday
    
    Thu Thursday
    
    Fri Friday
    
    Sat Saturday
    
    If you provide a parameter, <SPAN style="font-style: italic;">DAY$</SPAN> will return the day of the
    given date (which is stated in seconds after 1/1/1961).
    <SPAN style="font-style: italic;">DAY$(DATE) = DAY$</SPAN>.
    
    
<H3>NOTE:</H3>

<P>
    As with <SPAN style="font-style: italic;">DATE$</SPAN>, you cannot slice <SPAN style="font-style: italic;">DAY$</SPAN> unless you have a Minerva
    ROM (version 1.77 or later) or SMS - see <SPAN style="font-style: italic;">DATE$</SPAN> for further
    details.
    
    
<H3>SMS NOTE:</H3>

<P>
    In common with <SPAN style="font-style: italic;">DATE$</SPAN>, from v2.57, <SPAN style="font-style: italic;">DAY$</SPAN> will now accept five or
    six parameters as with <SPAN style="font-style: italic;">SDATE</SPAN> and <SPAN style="font-style: italic;">DATE</SPAN>. You can also slice <SPAN style="font-style: italic;">DAY$<BR></SPAN> (like on Minerva) - see <SPAN style="font-style: italic;">DATE$</SPAN>.
    
    
<H3>CROSS-REFERENCE:</H3>

<P>
    <A style="font-style: italic;" href="KeywordsT.html#TRA">TRA</A> and <A style="font-style: italic;" href="KeywordsS.html#SET_LANGUAGE">SET_LANGUAGE</A> allow you to re-define the abbreviations
    used for the different days.
    
    <A style="font-style: italic;" href="KeywordsD.html#DATE">DATE</A> holds the current system date (in seconds after
    1/1/1961) as a floating point number, <A style="font-style: italic;" href="KeywordsD.html#DATE$">DATE$</A> as a string.
    <HR style="width: 100%; height: 2px;">
    
<H1><A name="DBL" id="DBL"></A>DBL</H1>

<P>
    Syntax: <SPAN style="font-style: italic;">DBL<BR></SPAN> Location: <SPAN style="font-style: italic;">Beuletools<BR></SPAN>
    This function returns the control codes needed to switch on
    emphasised mode on an EPSON compatible printer:
    
    <SPAN style="font-style: italic;">DBL=CHR$(27)&amp;"E"</SPAN>.
    
    
<H3>CROSS-REFERENCE:</H3>

<P>
    <A style="font-style: italic;" href="KeywordsN.html#NORM">NORM</A>, <A style="font-style: italic;" href="KeywordsB.html#BLD">BLD</A>, <A style="font-style: italic;" href="KeywordsE.html#EL">EL</A>, <A style="font-style: italic;" href="KeywordsE.html#ENL">ENL</A>, <A style="font-style: italic;" href="KeywordsP.html#PRO">PRO</A>, <A style="font-style: italic;" href="KeywordsS.html#SI">SI</A>, <A style="font-style: italic;" href="KeywordsN.html#NRM">NRM</A>, <A style="font-style: italic;" href="KeywordsU.html#UNL">UNL</A>, <A style="font-style: italic;" href="KeywordsA.html#ALT">ALT</A>, <A style="font-style: italic;" href="KeywordsE.html#ESC">ESC</A>, <A style="font-style: italic;" href="KeywordsF.html#FF">FF</A>, <A style="font-style: italic;" href="KeywordsL.html#LMAR">LMAR</A>, <A style="font-style: italic;" href="KeywordsR.html#RMAR">RMAR</A>, <A style="font-style: italic;" href="KeywordsP.html#PAGDIS">PAGDIS</A>,
    <A style="font-style: italic;" href="KeywordsP.html#PAGLEN">PAGLEN</A>.
    <HR style="width: 100%; height: 2px;">
    
<H1><A name="DDOWN" id="DDOWN"></A>DDOWN</H1>

<P>
    Syntax: <SPAN style="font-style: italic;">DDOWN subdirectory<BR></SPAN> Location: <SPAN style="font-style: italic;">Toolkit II<BR></SPAN>
    This command adds the specified subdirectory to the default
    data device as a suffix. If the default program device is the
    same as the default data device, then this will also be
    altered by <SPAN style="font-style: italic;">DDOWN</SPAN>. If the default destination device is a
    directory device (ie. if it ends with an underscore), <SPAN style="font-style: italic;">DDOWN</SPAN> also
    alters this (whether or not it points to another drive).
    
    win1_
    
    |
    
    +--------+-------+
    
    | | |
    
    C BASIC Quill
    
    | |
    
    +---+---+ +-----+-----+
    
    | | | |
    
    include objects letters translations
    
    |
    
    secret
    
    The above could be a directory tree on a hard disk. <SPAN style="font-style: italic;">DATA_USE
    win1_</SPAN> defines win1_ as the default directory device, so WDIR
    will list all of the files on win1_. <SPAN style="font-style: italic;">DDOWN C</SPAN> will move into the
    C sub-directory, ie. <SPAN style="font-style: italic;">DATAD$</SPAN> is now win1_C_. <SPAN style="font-style: italic;">DDOWN include</SPAN> will make
    WDIR list all of the files on the hard disk which are prefixed
    by C_include_ (eg. win1_C_include_math_h)
    
    
<H3>NOTE 1:</H3>

<P>
    <SPAN style="font-style: italic;">DDOWN</SPAN> does not check if there are any files with the given
    prefix which exist.
    
    
<H3>NOTE 2:</H3>

<P>
    <SPAN style="font-style: italic;">DDOWN</SPAN> breaks with error -17 (error in expression) if the
    parameter is a resident keyword. So append an underscore to
    the directory name, eg. <SPAN style="font-style: italic;">DDOWN NEW_</SPAN>, or specify the parameter
    between quote marks (eg. <SPAN style="font-style: italic;">DDOWN 'NEW'</SPAN>).
    
    
<H3>NOTE 3:</H3>

<P>
    The default devices cannot exceed 32 characters (plus a
    final underscore) - any attempt to extend them beyond this
    will result in the error 'Bad Parameter' (error -15).
    
    
<H3>CROSS-REFERENCE:</H3>

<P>
    <A style="font-style: italic;" href="KeywordsD.html#DUP">DUP</A> moves up the tree, <A style="font-style: italic;" href="KeywordsD.html#DNEXT">DNEXT</A> skips from branch to branch.
    
    <A style="font-style: italic;" href="KeywordsD.html#DATAD$">DATAD$</A> and <A style="font-style: italic;" href="KeywordsD.html#DLIST">DLIST</A> can be used to find out about the current
    sub-directory and default devices respectively.
    <HR style="width: 100%; height: 2px;">
    
<H1><A name="DEALLOCATE" id="DEALLOCATE"></A>DEALLOCATE</H1>

<P>
    Syntax: <SPAN style="font-style: italic;">DEALLOCATE address<BR></SPAN> Location: <SPAN style="font-style: italic;">Turbo Toolkit<BR></SPAN>
    This procedure is very similar to <SPAN style="font-style: italic;">RECHP</SPAN> in that it cancels a
    reservation of common heap memory. However, the specified
    <SPAN style="font-style: italic;">address</SPAN> must be an area of memory which had previously been set
    aside with <SPAN style="font-style: italic;">ALLOCATION</SPAN>.
    
    
<H3>WARNING:</H3>

<P>
    Prior to v3d27 this command could crash the system if the
    specified address had already been deallocated, was an odd
    address, or had not been set aside with <SPAN style="font-style: italic;">ALLOCATION</SPAN>.
    
    
<H3>CROSS-REFERENCE:</H3>

<P>
    See <A style="font-style: italic;" href="KeywordsA.html#ALLOCATION">ALLOCATION</A> and <A style="font-style: italic;" href="KeywordsR.html#RECHP">RECHP</A>.
    <HR style="width: 100%; height: 2px;">
    
<H1><A name="DEBUG" id="DEBUG"></A>DEBUG</H1>

<P>
    Syntax: <SPAN style="font-style: italic;">DEBUG<BR></SPAN> Location: <SPAN style="font-style: italic;">Turbo Toolkit (v3.20+)<BR></SPAN>
    This is a compiler directive intended to precede a <SPAN style="font-style: italic;">DEFine
    PROCedure</SPAN> or <SPAN style="font-style: italic;">DEFine FuNction</SPAN> routine which is used for debugging a
    program. The routine can be included or excluded from the
    program during compilation using the <SPAN style="font-style: italic;">DEBUG_LEVEL</SPAN> directive.
    
    Current versions of the TURBO parser do not support this.
    
    
<H3>CROSS-REFERENCE:</H3>

<P>
    See <A style="font-style: italic;" href="KeywordsD.html#DEBUG_LEVEL">DEBUG_LEVEL</A>.
    <HR style="width: 100%; height: 2px;">
    
<H1><A name="DEBUG_LEVEL" id="DEBUG_LEVEL"></A>DEBUG_LEVEL</H1>

<P>
    Syntax: <SPAN style="font-style: italic;">DEBUG_LEVEL level<BR></SPAN> Location: <SPAN style="font-style: italic;">Turbo Toolkit (v3.20+)<BR></SPAN>
    It is currently uncertain how this directive is used within
    TURBO compiled programs.
    
    
<H3>CROSS-REFERENCE:</H3>

<P>
    See <A style="font-style: italic;" href="KeywordsD.html#DEBUG">DEBUG</A> and <A style="font-style: italic;" href="KeywordsT.html#TURBO_xx">TURBO_xx</A>.
    <HR style="width: 100%; height: 2px;">
    
<H1><A name="DEFAULT" id="DEFAULT"></A>DEFAULT</H1>

<P>
    Syntax: <SPAN style="font-style: italic;">DEFAULT (expression, default_value)<BR></SPAN> Location: <SPAN style="font-style: italic;">BTool<BR></SPAN>
    The function <SPAN style="font-style: italic;">DEFAULT</SPAN> usually simply returns the result of the
    given <SPAN style="font-style: italic;">expression</SPAN>, unless the <SPAN style="font-style: italic;">expression</SPAN> contains undefined variables
    or does not produce a floating point number. In either of
    these latter cases <SPAN style="font-style: italic;">DEFAULT</SPAN> will return the given <SPAN style="font-style: italic;">default_value</SPAN>.
    
    
<H3>Example:</H3>

<P>
    <SPAN style="font-style: italic;">WRITE</SPAN> simply <SPAN style="font-style: italic;">PRINT</SPAN>s a text to a given channel. If the channel
    
    ch was not a valid number for any reason then #1 is used:
    <SPAN style="font-style: italic;">100 DEFine PROCedure WRITE (ch, text$)
    110 ch = DEFAULT(ch, 1)
    120 PRINT#ch,text$
    130 END DEFine WRITE<BR></SPAN>
    
<H3>CROSS-REFERENCE:</H3>

<P>
    <A style="font-style: italic;" href="KeywordsT.html#TYPE">TYPE</A>.
    
    <A style="font-style: italic;" href="KeywordsD.html#DEFAULT$">DEFAULT$</A> and <A style="font-style: italic;" href="KeywordsD.html#DEFAULT%">DEFAULT%</A> work exactly like <A style="font-style: italic;" href="KeywordsD.html#DEFAULT">DEFAULT</A> for string and
    integer expressions.
    <HR style="width: 100%; height: 2px;">
    
<H1><A name="DEFAULT%" id="DEFAULT%"></A>DEFAULT%</H1>

<P>
    Syntax: <SPAN style="font-style: italic;">DEFAULT% (expression%, default_value%)<BR></SPAN> Location: <SPAN style="font-style: italic;">BTool<BR></SPAN>
    See <SPAN style="font-style: italic;">DEFAULT</SPAN> !
    <HR style="width: 100%; height: 2px;">
    
<H1><A name="DEFAULT$" id="DEFAULT$"></A>DEFAULT$</H1>

<P>
    Syntax: <SPAN style="font-style: italic;">DEFAULT$ (expression$, default_value$)<BR></SPAN> Location: <SPAN style="font-style: italic;">BTool<BR></SPAN>
    See <SPAN style="font-style: italic;">DEFAULT</SPAN> !
    <HR style="width: 100%; height: 2px;">
    
<H1><A name="DEFAULT_DEVICE" id="DEFAULT_DEVICE"></A>DEFAULT_DEVICE</H1>

<P>
    Syntax: <SPAN style="font-style: italic;">DEFAULT_DEVICE devicename$<BR></SPAN> Location: <SPAN style="font-style: italic;">Turbo Toolkit<BR></SPAN>
    This command can be used in a similar way to <SPAN style="font-style: italic;">PROG_USE</SPAN> and
    <SPAN style="font-style: italic;">DATA_USE</SPAN>. It sets the default device (up to 31 characters), for
    the following Turbo Toolkit commands:
    
    <SPAN style="font-style: italic;">CHARGE</SPAN>,
    
    <SPAN style="font-style: italic;">EXECUTE</SPAN>, <SPAN style="font-style: italic;">EXECUTE_A</SPAN>, <SPAN style="font-style: italic;">EXECUTE_W<BR></SPAN>
    <SPAN style="font-style: italic;">LINK_LOAD</SPAN>, <SPAN style="font-style: italic;">LINK_LOAD_A</SPAN>, <SPAN style="font-style: italic;">LINK_LOAD_W<BR></SPAN>
    It has no effect on any other commands.
    
    
<H3>Example:</H3>

<P>
    For a series of linked programs, you may want to use the
    
    following in a boot file:
    <SPAN style="font-style: italic;">
    DEFAULT_DEVICE win1_PROGS_
    <BR></SPAN> Each program could call another by uwing:
    <SPAN style="font-style: italic;">
    EXECUTE_W program2_task
    <BR></SPAN>
    
<H3>NOTE 1:</H3>

<P>
    Prior to v3d27, this command only supported 5 characters
    (although prior to v2.00 no error was reported if more than 5
    characters were used - the command simply ignored the
    additional characters).
    
    
<H3>NOTE 2:</H3>

<P>
    As from v1.26, you do not need to pass the device name as a
    string, for example:
    
    <SPAN style="font-style: italic;">DEFAULT_DEVICE flp1_<BR></SPAN>
    
<H3>CROSS-REFERENCE:</H3>

<P>
    <A style="font-style: italic;" href="KeywordsP.html#PROG_USE">PROG_USE</A>.
    <HR style="width: 100%; height: 2px;">
    
<H1><A name="DEFAULT_SCR" id="DEFAULT_SCR"></A>DEFAULT_SCR</H1>

<P>
    Syntax: <SPAN style="font-style: italic;">DEFAULT_SCR<BR></SPAN> Location: <SPAN style="font-style: italic;">Fn (v1.02 or later)<BR></SPAN>
    This function is really only useful on a Minerva ROM
    (although it will work quite happily on any other ROM). It is
    sometimes useful when writing programs which are to run in
    Minerva's dual screen mode to discover which is the default
    screen.
    
    This is made necessary because all new windows which are
    opened, and all <SPAN style="font-style: italic;">MODE</SPAN> commands operate on the current default
    screen. This therefore means that if a program is badly
    written, it is possible that whilst the program is running the
    default screen is switched, giving the result that some of its
    windows are opened on scr0 and some on scr1.
    
    <SPAN style="font-style: italic;">PRINT DEFAULT_SCR<BR></SPAN>
    will return 0 or 1 depending whether the default screen is
    scr0 or scr1.
    
    If Minerva is not in dual screen mode, or if Minerva is not
    present, 0 will be returned.
    
    
<H3>Example:</H3>

<P>
    A program to change the <SPAN style="font-style: italic;">MODE</SPAN> of the current program safely
    
    (ie. it will only alter the <SPAN style="font-style: italic;">MODE</SPAN> of the screen in which the
    
    program is running):
    <SPAN style="font-style: italic;">100 This_JOB=DEFAULT_SCR
    110 SET_MODE 8
    120 :
    200 DEFine PROCedure SET_MODE (alp)
    210 IF RMODE(This_JOB)=alp:RETurn
    220 IF This_JOB=DEFAULT_SCR:MODE alp:RETurn
    230 MODE 64+32,-1:MODE alp:MODE 64+32,-1
    240 END DEFine<BR></SPAN>
    
<H3>CROSS-REFERENCE:</H3>

<P>
    <A style="font-style: italic;" href="KeywordsM.html#MODE">MODE</A> alters the mode of the current screen and job and can
    be used to alter the current default screen, <A style="font-style: italic;" href="KeywordsR.html#RMODE">RMODE</A> returns the
    mode of the given screen.
    <HR style="width: 100%; height: 2px;">
    
<H1><A name="DEFine" id="DEFine"></A>DEFine ...</H1>

<P>
    Syntax: <SPAN style="font-style: italic;">DEFine</SPAN> .... Location: <SPAN style="font-style: italic;">QL ROM<BR></SPAN>
    This keyword forms part of the structures: <SPAN style="font-style: italic;">DEFine PROCedure</SPAN>,
    <SPAN style="font-style: italic;">DEFine FuNction</SPAN> and <SPAN style="font-style: italic;">END DEFine</SPAN>. As such, it cannot be used on its own
    within a program - this will cause a 'bad line' error, except
    under SMS where it causes an error 'Incorrect Procedure or
    Function Definition'.
    
    
<H3>CROSS-REFERENCE:</H3>

<P>
    Please refer to the individual structure descriptions for
    more details.
    <HR style="width: 100%; height: 2px;">
    
<H1><A name="DEFine%20FuNction" id="DEFine%20FuNction"></A>DEFine FuNction</H1>

<P>
    Syntax: <SPAN style="font-style: italic;">DEFine FuNction name</SPAN>[<SPAN style="font-style: italic;">$</SPAN> | <SPAN style="font-style: italic;">%</SPAN>] [<SPAN style="font-style: italic;">(item</SPAN> <SUP>*</SUP>[<SPAN style="font-style: italic;">,item</SPAN><SUP>i</SUP>]<SUP>*</SUP> <SPAN style="font-style: italic;">)</SPAN>] Location: <SPAN style="font-style: italic;">QL ROM<BR></SPAN>
    This command marks the beginning of the SuperBASIC
    structure which is used to surround lines of SuperBASIC code
    which forms an equivalent to a machine code function, which
    can be called from within SuperBASIC and will return a value
    dependent upon the code contained within the structure.
    
    The syntax of the SuperBASIC structure can take two forms:
    <HR style="width: 100%; height: 2px;">
    <SPAN style="font-style: italic;">DEFine FuNction name</SPAN>[<SPAN style="font-style: italic;">$</SPAN> | <SPAN style="font-style: italic;">%</SPAN>] [<SPAN style="font-style: italic;">(item</SPAN><SUP>*</SUP>[<SPAN style="font-style: italic;">,item</SPAN><SUP>i</SUP>]<SUP>*</SUP><SPAN style="font-style: italic;">)</SPAN>]: <SPAN style="font-style: italic;">statement</SPAN> <SUP>*</SUP>[<SPAN style="font-style: italic;">:statement</SPAN>]<SUP>*</SUP>:<SPAN style="font-style: italic;">RETurn value<BR></SPAN>
    or
    <SPAN style="font-style: italic;">DEFine FuNction name</SPAN>[<SPAN style="font-style: italic;">$</SPAN> | <SPAN style="font-style: italic;">%</SPAN>] [<SPAN style="font-style: italic;">(item</SPAN> <SUP>*</SUP>[<SPAN style="font-style: italic;">,item</SPAN><SUP>i</SUP>]<SUP>*</SUP> <SPAN style="font-style: italic;">)</SPAN>]
    <SUP>*</SUP>[<SPAN style="font-style: italic;">LOCal var</SPAN> <SUP>*</SUP>[<SPAN style="font-style: italic;">,var</SPAN><SUP>i</SUP>]<SUP>*</SUP>]<SUP>*<BR></SUP> <SUP>*</SUP>[<SPAN style="font-style: italic;">statements</SPAN>]<SUP>*<BR></SUP> <SPAN style="font-style: italic;">RETurn value
    END DEFine</SPAN> [<SPAN style="font-style: italic;">name</SPAN>]
    
    When the specified function <SPAN style="font-style: italic;">name</SPAN> is called, the interpreter
    will search the SuperBASIC program for the related <SPAN style="font-style: italic;">DEFine FuNction<BR></SPAN> statement. If a related <SPAN style="font-style: italic;">DEFine FuNction</SPAN> cannot be found, then the
    interpreter will search for a machine code function of that
    name.
    
    If the definition of <SPAN style="font-style: italic;">name</SPAN> cannot be found, then the error
    'Not Found' will be reported if <SPAN style="font-style: italic;">name</SPAN> was defined in the past,
    but the definition line has since been deleted. If <SPAN style="font-style: italic;">name</SPAN> has
    never been defined in the current SuperBASIC program, then it
    will be treated as a normal variable and relevant error
    messages reported. Under SMS in both instances the value 0
    will be returned (<SPAN style="font-style: italic;">name</SPAN> is treated as an undefined variable).
    
    The method of searching for a <SPAN style="font-style: italic;">FuNction</SPAN> means that if a
    SuperBASIC <SPAN style="font-style: italic;">FuNction</SPAN> is defined with the same name as a machine
    code one, the machine code one will no longer be available,
    and when the SuperBASIC <SPAN style="font-style: italic;">FuNction</SPAN> is removed (for example with
    <SPAN style="font-style: italic;">NEW</SPAN>), that keyword will no longer have any effect.
    
    If entered as a direct command, even the in-line structure
    will not have any effect unless it is also called on the same
    line, as the interpreter must jump to the relevant <SPAN style="font-style: italic;">DEFine FuNction<BR></SPAN> statement when the function is called.
    
    If a <SPAN style="font-style: italic;">DEFine FuNction</SPAN> statement appears in a program, if the code
    is not called, program flow will continue from the statement
    following the next <SPAN style="font-style: italic;">END DEFine</SPAN> - it is however good practice to
    keep all definition structures towards the end of a program,
    and not to place the structure blocks in the middle of program
    code, as this makes it very difficult to follow the flow of
    programs.
    
    It is also good programming practice to make FuNctions
    self-contained and not to jump out of them using <SPAN style="font-style: italic;">GO TO</SPAN>s or <SPAN style="font-style: italic;">GO SUB</SPAN>s
    (they can of course call other <SPAN style="font-style: italic;">FuNction</SPAN>s and <SPAN style="font-style: italic;">PROCedure</SPAN>s).
    
    To call the <SPAN style="font-style: italic;">DEFine FuNction</SPAN>, you merely need to include its name
    in an expression. If however any parameters are listed in the
    definition, you will need to pass the same number of
    parameters in brackets after the name of the <SPAN style="font-style: italic;">FuNction</SPAN>, separated
    by any valid SuperBASIC separator {ie. comma (,), semicolon
    (;), backslash (\), exclamation mark (!) or TO }.
    
    You can also place a hash (#) before the parameters if you
    so wish to indicate that it is a channel number. If not enough
    parameters are supplied, the program will report 'Error in
    Expression' when the missing parameter is used, except under
    SMS where the missing parameters are treated as unset
    variables and will therefore have the value 0 (if a numeric
    variable) or else contain an empty string (if a string
    variable).
    
    If however, too many parameters are passed, the extra
    parameters are ignored.
    
    Parameters are passed by reference which means that the
    list of items in the <SPAN style="font-style: italic;">DEFine FuNction</SPAN> statement are deemed <SPAN style="font-style: italic;">LOCal</SPAN> to
    that definition - this means that any previous values of the
    items are stored whilst the definition block is active. What
    is more, the type of each item does not actually matter - they
    assume the type of the passed parameter. For example, the
    following short program will work without any problems:
    <SPAN style="font-style: italic;">10 a$=QUERY$('What is your name')
    20 DEFine FuNction QUERY$(x)
    30 INPUT (x)!b$
    40 RETurn b$
    50 END DEFine<BR></SPAN>
    Note though that the name of the <SPAN style="font-style: italic;">FuNction</SPAN> must end with the
    correct variable type, ie. <SPAN style="font-style: italic;">$</SPAN> if a string is to be returned, or
    <SPAN style="font-style: italic;">%</SPAN> if an integer is to be returned (although see note 7 below).
    
    One of the results of passing variables by reference is
    that if the item is altered within the definition block, if a
    variable is passed as a parameter, the variable itself will
    also be altered (although see note 4). This can be shown with
    the following short program:
    <SPAN style="font-style: italic;">100 x=10
    110 y=Square(x)
    120 PRINT x;'^2=';y
    130 DEFine FuNction Square(za)
    140 za=za*za
    150 RETurn za
    160 END DEFine<BR></SPAN>
    This can be avoided by either assigning the item to a
    temporary variable and then using the temporary variable
    instead (see the example below), or by passing the variable as
    an expression, by placing it inside brackets; for example by
    replacing line 110 with the following:
    <SPAN style="font-style: italic;">110 y=Square((x))<BR></SPAN>
    
<H3></H3>

<P>
    Having passed the necessary parameters to the Function, you
    can then use each item inside the definition block as normal.
    
    
<H3>Example:</H3>

<P>
    A short program to calculate the length of the hypotenuse
    
    in a triangle, given the length of its two other sides:
    <SPAN style="font-style: italic;">100 MODE 4: WINDOW 448,200,32,16: SCALE 100,0,0: PAPER 0
    105 CLS: INK 7
    110 AT 2,25: UNDER 1: PRINT'Pythagoras calculator': UNDER 0
    120 INPUT \\'Enter length of base of triangle:'!base
    130 INPUT \\'Enter height of triangle:'!height
    140 hypotenuse=Pythag(base,height)
    150 INK 4: LINE 50,20 TO 100,20 TO 100,70 TO 50,20
    160 INK 7: AT 16,35-LEN(base): PRINT base
    170 AT 11,46: PRINT height
    180 AT 11,31-LEN(hypotenuse): PRINT hypotenuse
    190 :
    1000 DEFine FuNction Pythag(x,y)
    1010 LOCal x1,y1
    1020 x1=x*x:y1=y*y
    1030 RETurn SQRT(x1+y1)
    1040 END DEFine<BR></SPAN>
    See what happens if you replace lines 1000 to 1040 with the
    
    following:
    <SPAN style="font-style: italic;">1000 DEFine FuNction Pythag(x,y)
    1010 x=x*x:y=y*y
    1020 RETurn SQRT(x*y)
    1030 END DEFine<BR></SPAN>
    
<H3>NOTE 1:</H3>

<P>
    A <SPAN style="font-style: italic;">FuNction</SPAN> must return a value under all circumstances. If
    the <SPAN style="font-style: italic;">END DEFine</SPAN> is reached without a value having been returned
    then SuperBASIC will report an 'error in expression' (-17),
    specifying the error as having occured at the line containing
    the <SPAN style="font-style: italic;">END DEFine</SPAN>. Under SMS the error 'RETurn not in PROCedure or
    FuNction' will be reported instead.
    
    
<H3>NOTE 2:</H3>

<P>
    On pre JS ROMs, you could not define new <SPAN style="font-style: italic;">FuNctions</SPAN> with names
    which had already been used in the same program.
    
    
<H3>NOTE 3:</H3>

<P>
    On pre MG ROMs, any more than nine parameters may upset the
    program, corrupting it by replacing names with <SPAN style="font-style: italic;">PRINT</SPAN> towards the
    end of a program. This can however be circumvented by
    increasing the size of the Name Table by 8 bytes for each name
    (plus a little more for luck), using the line:
    
    <SPAN style="font-style: italic;">CALL PEEK_W(282)+36,N<BR></SPAN>
    
<H3>NOTE 4:</H3>

<P>
    Although a sub-set of a simple string is an expression and
    therefore will not be altered within a function, a sub-set of
    a <SPAN style="font-style: italic;">DIM</SPAN>ensioned string is not treated as an expression and will
    therefore be altered!!
    
    
<H3>NOTE 5:</H3>

<P>
    Recursive <SPAN style="font-style: italic;">FuNction</SPAN>s (ie. <SPAN style="font-style: italic;">FuNction</SPAN>s which call themselves, or
    call another <SPAN style="font-style: italic;">PROCedure</SPAN> or <SPAN style="font-style: italic;">FuNction</SPAN> which in turn calls the original
    <SPAN style="font-style: italic;">FuNction</SPAN>) are allowed (up to 32767 recursions under Minerva).
    They do however gobble up memory at an amazing rate and can
    cause problems in compiled SuperBASIC due to the fact that
    they need an ever-increasing amount of stack space. They
    should be avoided wherever possible because they are also very
    slow. On SMS, if you try to use recursive functions too much,
    you may end up with the rather esoteric error 'program
    structures nested too deeply, my brain hurts'! It is however,
    more likely that you will end up with an 'Out of Error' memory
    and not be able to do anything else (not even <SPAN style="font-style: italic;">NEW</SPAN>).
    
    
<H3>NOTE 6:</H3>

<P>
    The <SPAN style="font-style: italic;">LOCal</SPAN> statement (if used) must appear as the next
    statement following <SPAN style="font-style: italic;">DEFine FuNction</SPAN>, otherwise an error will be
    reported. Under SMS if this is not the case, the error
    'Misplaced LOCal' will be reported.
    
    
<H3>NOTE 7:</H3>

<P>
    SMS and QLiberator do not seem to mind if you do not end
    the <SPAN style="font-style: italic;">FuNction</SPAN> name with a $ symbol when a string is to be returned
    and the <SPAN style="font-style: italic;">FuNction</SPAN> will work perfectly well in the compiled version
    of the program. However, this should be avoided as the
    program will not work on other QL ROMs and also cannot be
    compiled with TURBO.
    
    For example, take the following program, which works under
    SMS or when QLiberated. For other ROMs and TURBO, rename the
    function <SPAN style="font-style: italic;">GETSUBDIR$</SPAN>:
    
    <SPAN style="font-style: italic;">100 file$='n1_win2_test_bas'
    
    110 test$=GETSUBDIR(file$)
    
    295 :
    
    300 DEFine FuNction GETSUBDIR(s$)
    
    310 IF s$(LEN(s$))&lt;&gt;'_':s$=s$&amp;'_'
    
    320 IF LEN(s$)=5:IF s$(4) INSTR '1234567890':RETurn ''
    
    322 REPeat t_loop
    
    325 root=1
    
    330 FOR x=1 TO LEN(s$)
    
    340 IF s$(x)='_'
    
    350 IF x=3:IF s$(2) INSTR '1234567890':root=3
    
    360 IF x=5:IF s$(4) INSTR '1234567890':root=5
    
    370 IF x&gt;5:IF root=1:s$=PROGD$ &amp; s$:NEXT t_loop
    
    380 IF x=8:IF root=3:root=8
    
    390 END IF
    
    400 NEXT x
    
    410 IF root=1:s$=PROGD$ &amp; s$:NEXT t_loop
    
    415 as$=s$
    
    420 IF root=3:s$=s$(1 TO 3) &amp; PROGD$
    
    425 IF root=3:IF LEN(as$)&gt;3:s$=s$&amp;as$(4 TO):NEXT t_loop:ELSE EXIT t_loop
    
    430 END FOR x
    
    435 EXIT t_loop
    
    440 END REPeat t_loop
    
    445 as$=s$
    
    460 RETurn s$(1 to root)
    
    470 END DEFine<BR></SPAN>
    
<H3></H3>

<P>
    
<H3>NOTE 8:</H3>

<P>
    Do not try to <SPAN style="font-style: italic;">DEFine</SPAN> one <SPAN style="font-style: italic;">FuNction</SPAN> inside another - although
    this is actually allowed under most implementations, compilers
    presume that an <SPAN style="font-style: italic;">END DEFine</SPAN> should be placed before the start of
    the next <SPAN style="font-style: italic;">DEFine FuNction</SPAN> and it makes programs very difficult to
    follow. Under SMS the error 'Defines may not be within other
    clauses' will be reported when you try to <SPAN style="font-style: italic;">RUN</SPAN> the program.
    
    
<H3>NOTE 9:</H3>

<P>
    On Minerva pre v1.96, if you try to link in machine code
    procedures or functions from inside a <SPAN style="font-style: italic;">DEFine PROCedure</SPAN> or <SPAN style="font-style: italic;">DEFine FuNction<BR></SPAN> block, problems could occur after a <SPAN style="font-style: italic;">CLEAR</SPAN> command.
    
    
<H3>WARNING 1:</H3>

<P>
    On most ROMs (at least on JM, MGx, AH and Minerva up to
    v1.97), a single line recursive <SPAN style="font-style: italic;">FuNction</SPAN> will not respond to the
    break key. For example:
    <SPAN style="font-style: italic;">10 DEFine FuNction Root(a): a=2^Root(a)<BR></SPAN>
    The solution for all ROMs? - insert an additional colon (:)
    <SPAN style="font-style: italic;">10 DEFine FuNction Root(a)::a=2^Root(a)<BR></SPAN>
    This is fixed on SMS v2.59+.
    
    
<H3>WARNING 2:</H3>

<P>
    All ROMs also suffer from this problem on multiple line
    recursive FuNctions, where there is no active program line
    between the definition line and the line which calls the
    <SPAN style="font-style: italic;">FuNction</SPAN>. For example:
    <SPAN style="font-style: italic;">10 DEFine FuNction Root(a)
    20 a = 2^Root(a)
    30 END DEFine<BR></SPAN>
    The solution here is to insert another active program line
    at line 15 - for example:
    <SPAN style="font-style: italic;">15 :<BR></SPAN>
    or
    <SPAN style="font-style: italic;">15 PRINT<BR></SPAN>
    Do however note that a <SPAN style="font-style: italic;">REMark</SPAN>, <SPAN style="font-style: italic;">DATA</SPAN> or <SPAN style="font-style: italic;">LOCal</SPAN> line at line 15
    will not be sufficient as these are not active commands.
    
    Again, this is fixed under SMS v2.59.
    
    
<H3>WARNING 3:</H3>

<P>
    Except under SMS, if you assign the same name to a <SPAN style="font-style: italic;">FuNction<BR></SPAN> as a resident command, not only will you no longer be able to
    use the resident command, but it may crash the system!
    
    
<H3>SMS NOTES:</H3>

<P>
    In v2.59+, if you fail to create a SuperBASIC function
    correctly, the error <SPAN style="font-style: italic;">INCOMPLETE DEFine</SPAN> appears (for example if you
    omit the <SPAN style="font-style: italic;">END DEFine</SPAN>).
    
    Prior to v2.89 SMS would only allow a single line <SPAN style="font-style: italic;">DEFine
    FuNction</SPAN> if <SPAN style="font-style: italic;">END DEFine</SPAN> appeared on the same line. However, although
    v2.89 would allow a single-line <SPAN style="font-style: italic;">DEFine FuNction</SPAN> without an <SPAN style="font-style: italic;">END DEFine</SPAN> ,
    it would report an error if the <SPAN style="font-style: italic;">END DEFine</SPAN> existed!! Thankfully,
    v2.90+ fixes this problem, allowing both.
    
    
<H3>CROSS-REFERENCE:</H3>

<P>
    <A style="font-style: italic;" href="KeywordsE.html#END%20DEFine">END DEFine</A> tells the interpreter where the end of the definition block can be found.
    
    <A style="font-style: italic;" href="KeywordsR.html#RETurn">RETurn</A> allows you to return the result of the Function.
    
    <A style="font-style: italic;" href="KeywordsD.html#DEFine%20PROCedure">DEFine PROCedure</A> is very similar.
    
    <A style="font-style: italic;" href="KeywordsL.html#LOCal">LOCal</A> allows you to assign temporary variables with the same
    name as variables used outside the definition block.
    
    <A style="font-style: italic;" href="KeywordsP.html#PARUSE">PARUSE</A> and <A style="font-style: italic;" href="KeywordsP.html#PARTYP">PARTYP</A> allow you to examine the type of the
    parameters which are passed to the definition block.
    <HR style="width: 100%; height: 2px;">
    
<H1><A name="DEFine%20PROCedure" id="DEFine%20PROCedure"></A>DEFine PROCedure</H1>

<P>
    Syntax: <SPAN style="font-style: italic;">DEFine PROCedure name</SPAN> [<SPAN style="font-style: italic;">(item</SPAN> <SUP>*</SUP>[<SPAN style="font-style: italic;">,item</SPAN><SUP>i</SUP>]<SUP>*</SUP> <SPAN style="font-style: italic;">)</SPAN>] Location: <SPAN style="font-style: italic;">QL ROM<BR></SPAN>
    This command marks the beginning of the SuperBASIC
    structure which is used to surround lines of SuperBASIC code
    which forms an equivalent to a machine code SuperBASIC
    procedure, which can be called from within SuperBASIC as a
    sub-routine. This forms a powerful alternative to <SPAN style="font-style: italic;">GO SUB</SPAN> and
    helps to make SuperBASIC programs very easy to read and
    de-bug.
    
    The syntax of the SuperBASIC structure can take two forms:
    <SPAN style="font-style: italic;">DEFine PROCedure name</SPAN> [<SPAN style="font-style: italic;">(item</SPAN> <SUP>*</SUP>[<SPAN style="font-style: italic;">,item</SPAN><SUP>i</SUP>]<SUP>*</SUP> <SPAN style="font-style: italic;">)</SPAN>]<SPAN style="font-style: italic;">: statement</SPAN> <SUP>*</SUP>[<SPAN style="font-style: italic;">:statement</SPAN>]<SUP>*<BR></SUP>
    or
    <SPAN style="font-style: italic;">DEFine PROCedure name</SPAN> [<SPAN style="font-style: italic;">(item</SPAN> <SUP>*</SUP>[<SPAN style="font-style: italic;">,item</SPAN><SUP>i</SUP>]<SUP>*</SUP> <SPAN style="font-style: italic;">)</SPAN>]
    <SUP>*</SUP>[<SPAN style="font-style: italic;">LOCal var</SPAN> <SUP>*</SUP>[<SPAN style="font-style: italic;">,var</SPAN><SUP>i</SUP>]<SUP>*</SUP> ]<SUP>*<BR></SUP> <SUP>*</SUP>[<SPAN style="font-style: italic;">statements</SPAN>]<SUP>*<BR></SUP> [<SPAN style="font-style: italic;">RETurn</SPAN>]
    <SPAN style="font-style: italic;">END DEFine</SPAN> [<SPAN style="font-style: italic;">name</SPAN>]
    
    When the specified procedure name is called, the
    interpreter then searches the SuperBASIC program for the
    related <SPAN style="font-style: italic;">DEFine PROCedure</SPAN> statement. If this cannot be found, then
    the interpreter will look for a machine code procedure of that
    name. If the definition of name cannot be found, then the
    error 'Not Found' will be reported if name was defined in the
    past, but the definition line has since been deleted.
    
    If name has never been defined in the current SuperBASIC
    program, then the 'Bad Name' error will be reported.
    
    As with <SPAN style="font-style: italic;">FuNction</SPAN>s, the method of searching means that a
    machine code <SPAN style="font-style: italic;">PROCedure</SPAN> can be overwritten with a SuperBASIC
    definition and then later lost.
    
    Parameters and items are treated in the same manner as with
    <SPAN style="font-style: italic;">DEFine FuNction</SPAN>. However, please note that calling parameters
    should not appear in brackets after the name (unless you
    intend to pass them otherwise than by reference!).
    
    When called, all of the SuperBASIC code within the
    definition block will be executed until either an <SPAN style="font-style: italic;">END DEFine</SPAN> or
    <SPAN style="font-style: italic;">RETurn</SPAN> is found, in which case execution will return to the
    statement after the calling statement. In contrast however, to
    <SPAN style="font-style: italic;">DEFine FuNction</SPAN>, there is no need for a <SPAN style="font-style: italic;">PROCedure</SPAN> definition block to
    contain a <SPAN style="font-style: italic;">RETurn</SPAN> statement.
    
    Strictly a <SPAN style="font-style: italic;">PROCedure</SPAN> cannot return a value - however due to
    the nature of the parameters being passed by reference (see
    <SPAN style="font-style: italic;">DEFine FuNction</SPAN>), this is possible.
    
    
<H3>Example:</H3>

<P>
    A simple demonstration program which highlights the fact
    
    that a <SPAN style="font-style: italic;">PROCedure</SPAN> or <SPAN style="font-style: italic;">FuNction</SPAN> can actually be recursive (ie. call
    
    itself), and also highlights the effect of passing
    
    parameters by reference - keep an eye on the values in #0:
    <SPAN style="font-style: italic;">100 radius=50:height=125:CLS:CLS#0
    110 Rndom_circle radius,(height),100
    120 AT #0,0,0:PRINT#0,radius,height,100
    130 DEFine PROCedure Rndom_circle (x,y,z)
    140 INK RND(7):FILL RND(1)
    150 CIRCLE RND (y),RND(z),x
    160 FILL 0
    170 AT #0,0,0:PRINT#0,x,y,z:PAUSE
    180 x=x-RND(5):y=y-1:z=z+1
    190 IF x&lt;1:RETurn
    200 Rndom_circle (x),y,z
    210 END DEFine<BR></SPAN>
    
<H3>NOTE 1:</H3>

<P>
    On pre JS ROMs, you could not define new <SPAN style="font-style: italic;">PROCedure</SPAN>s with names
    which had already been used in the same program.
    
    
<H3>NOTE 2:</H3>

<P>
    On pre MG ROMs, any more than nine parameters may upset the
    program, corrupting it by replacing names with <SPAN style="font-style: italic;">PRINT</SPAN> towards the
    end of a program. This can however be circumvented by
    increasing the size of the Name Table by 8 bytes for each name
    (plus a little more for luck), using the line:
    
    <SPAN style="font-style: italic;">CALL PEEK_W(282)+36,N<BR></SPAN>
    
<H3>NOTE 3:</H3>

<P>
    Recursive <SPAN style="font-style: italic;">PROCedure</SPAN>s (ie. <SPAN style="font-style: italic;">PROCedure</SPAN>s which call themselves, or
    call another <SPAN style="font-style: italic;">PROCedure</SPAN> or <SPAN style="font-style: italic;">FuNction</SPAN> which in turn calls the original
    <SPAN style="font-style: italic;">PROCedure</SPAN>) are allowed (up to 32767 recursions on Minerva). They
    do however gobble up memory at an amazing rate and can cause
    problems in compiled SuperBASIC due to the fact that they need
    an ever-increasing amount of stack space. They should be
    avoided wherever possible. On SMS, if you try to use
    recursive functions too much, you may end up with the error
    'program structures nested too deeply, my brain hurts'! It is
    however, more likely that you will end up with an 'Out of
    Memory' error and not be able to do anything else (not even
    <SPAN style="font-style: italic;">NEW</SPAN>).
    
    
<H3>NOTE 4:</H3>

<P>
    The <SPAN style="font-style: italic;">LOCal</SPAN> statement (if used) must appear as the next
    statement following <SPAN style="font-style: italic;">DEFine PROCedure</SPAN>, otherwise an error will be
    reported. Under SMS if this is not the case, the error
    'Misplaced LOCal' will be reported.
    
    
<H3>NOTE 5:</H3>

<P>
    Do not try to <SPAN style="font-style: italic;">DEFine</SPAN> one <SPAN style="font-style: italic;">PROCedure</SPAN> inside another - although
    this is actually allowed under most implementations, compilers
    presume that an <SPAN style="font-style: italic;">END DEFine</SPAN> should be placed before the start of
    the next <SPAN style="font-style: italic;">DEFine PROCedure</SPAN> and it makes programs very difficult to
    follow. Under SMS the error 'Defines may not be within other
    clauses' will be reported when you try to <SPAN style="font-style: italic;">RUN</SPAN> the program.
    
    
<H3>WARNING 1:</H3>

<P>
    As with <SPAN style="font-style: italic;">DEFine FuNction</SPAN> problems do exist with recursive <SPAN style="font-style: italic;">PROCedure</SPAN>s
    which prevent the Break key from working.
    
    These problems are fixed by SMS v2.59+
    
    
<H3>WARNING 2:</H3>

<P>
    Except under SMS, if you assign the same name to a <SPAN style="font-style: italic;">PROCedure<BR></SPAN> as a resident command, not only will you no longer be able to
    use the resident command, but it may crash the system!
    
    
<H3>SMS NOTES:</H3>

<P>
    From v2.59, as with <SPAN style="font-style: italic;">DEFine FuNction</SPAN>, SMS insists that all
    <SPAN style="font-style: italic;">PROCedure</SPAN>s have an <SPAN style="font-style: italic;">END DEFine</SPAN> statement, even if they are on a single
    line. If this does not exist, or there is something else
    wrong with the syntax, then the error <SPAN style="font-style: italic;">'Incomplete DEFine</SPAN> is
    reported.
    
    The same problems exist in versions prior to v2.90 as with
    <SPAN style="font-style: italic;">DEFine FuNction</SPAN> for in-line code.
    
    
<H3>CROSS-REFERENCE:</H3>

<P>
    Please see <A style="font-style: italic;" href="KeywordsD.html#DEFine%20FuNction">DEFine FuNction</A>!
    
    Also see <A style="font-style: italic;" href="KeywordsE.html#END%20DEFine">END DEFine</A>.
    
    Look at the example for <A style="font-style: italic;" href="KeywordsS.html#SWAP">SWAP</A> which provides a more practical
    use of recursive <A style="font-style: italic;" href="KeywordsP.html#PROCedure">PROCedure</A>s.
    <HR style="width: 100%; height: 2px;">
    
<H1><A name="DEFINED" id="DEFINED"></A>DEFINED</H1>

<P>
    Syntax: <SPAN style="font-style: italic;">DEFINED (anything)<BR></SPAN> Location: <SPAN style="font-style: italic;">BTool<BR></SPAN>
    SuperBASIC is different from other BASIC dialects in that
    it does not assign a default value to newly introduced but
    still unset variables (except on SMS which assigns the value
    Zero to an unset numeric variable and an empty string to an
    unset string).
    
    This makes it possible for a program to detect if a
    variable has been properly initialised - an 'error in
    expression' (-17) is reported if you try to carry out
    operations on unset variables.
    
    The function <SPAN style="font-style: italic;">DEFINED</SPAN> takes any parameter, no matter what type
    it is, provided that it is a constant or a variable. <SPAN style="font-style: italic;">DEFINED<BR></SPAN> returns 0 if the parameter was a variable but unset and 1 for
    defined variables and constant expressions.
    
    
<H3>NOTE:</H3>

<P>
    This function does not work on SMS
    
    
<H3>CROSS-REFERENCE:</H3>

<P>
    <A style="font-style: italic;" href="KeywordsC.html#CLEAR">CLEAR</A> makes all variables undefined.
    <A href="KeywordsP.html#PRINT">PRINT</A> writes asterisks if unset variables are required to be printed.
    <A href="KeywordsT.html#TYPE">TYPE</A> returns 1, 2 or 3 for undefined variables.
    
    See also <A style="font-style: italic;" href="KeywordsU.html#UNSET">UNSET</A>.
    <HR style="width: 100%; height: 2px;">
    
<H1><A name="DEG" id="DEG"></A>DEG</H1>

<P>
    Syntax: <SPAN style="font-style: italic;">DEG (angle)<BR></SPAN> Location: <SPAN style="font-style: italic;">QL ROM<BR></SPAN>
    This function is used to convert an <SPAN style="font-style: italic;">angle</SPAN> in radians into an
    <SPAN style="font-style: italic;">angle</SPAN> in degrees (which is the system more readily used by
    humans).
    
    Although this will work for any value of <SPAN style="font-style: italic;">angle</SPAN>, due to the
    very nature of angles, <SPAN style="font-style: italic;">angle</SPAN> should be in the range 0...2,
    which will return a value in the range 0...360.
    
    
<H3>CROSS-REFERENCE:</H3>

<P>
    See <A style="font-style: italic;" href="KeywordsR.html#RAD">RAD</A> and the Mathematics section of the Appendix.
    <HR style="width: 100%; height: 2px;">
    
<H1><A name="DELETE" id="DELETE"></A>DELETE</H1>

<P>
    Syntax: <SPAN style="font-style: italic;">DELETE file<BR></SPAN>
    or <SPAN style="font-style: italic;">DELETE file</SPAN> <SUP>*</SUP>[<SPAN style="font-style: italic;">,file</SPAN><SUP>i</SUP>]<SUP>*</SUP> <SPAN style="font-style: italic;">(THOR XVI)<BR></SPAN> Location: <SPAN style="font-style: italic;">QL ROM, Toolkit II<BR></SPAN>
    The command <SPAN style="font-style: italic;">DELETE</SPAN> removes the stated <SPAN style="font-style: italic;">file</SPAN> from a medium (it
    actually only deletes its entry from the directory map, which
    thus allows these files to be recovered if necessary, with a
    utility such as the Public Domain RETTUNGE_exe, provided that
    nothing has been written to the disk since it was deleted).
    
    The filename must include the name of the medium, unless
    you have Toolkit II installed, which alters the command so
    that the default data device is recognised (see <SPAN style="font-style: italic;">DATAD$</SPAN>).
    
    The command does not report an error if a file was not
    found! However, if an invalid device is used and Toolkit II is
    not present, an error will be reported.
    
    The THOR XVI variant of this command follows the original
    proposal for this command, allowing you to delete several
    files at the same time by listing each filename, eg:
    <SPAN style="font-style: italic;">DELETE flp1_boot,flp1_main_bas<BR></SPAN>
    This latter syntax is accepted on non-Minerva systems, but
    only the first file will be deleted. If Toolkit II is present,
    error -15 (bad parameter) is reported.
    
    
<H3>Example:</H3>

<P>
    <SPAN style="font-style: italic;">DELETE mdv2_PROG_bak
    
    DELETE PROG_bak<BR></SPAN>
    
<H3>CROSS-REFERENCE:</H3>

<P>
    <A style="font-style: italic;" href="KeywordsW.html#WDEL">WDEL</A> deletes several files interactively.
    
    <A style="font-style: italic;" href="KeywordsW.html#WDEL_F">WDEL_F</A>, <A style="font-style: italic;" href="KeywordsW.html#WDIR">WDIR</A> and <A style="font-style: italic;" href="KeywordsT.html#TTEDELETE">TTEDELETE</A> are also worth a look.
    <HR style="width: 100%; height: 2px;">
    
<H1><A name="DEL_DEFB" id="DEL_DEFB"></A>DEL_DEFB</H1>

<P>
    Syntax: <SPAN style="font-style: italic;">DEL_DEFB<BR></SPAN> Location: <SPAN style="font-style: italic;">Toolkit II<BR></SPAN>
    QDOS stores information concerning devices and files (and
    in relation to files, even their contents) in areas of memory
    known as 'slave blocks' (memory permitting).
    
    These slave blocks can be very useful, since when the
    computer tries to access the same device (or file) again, the
    access is much quicker, since the relevent details can be
    loaded from memory, rather than the device - the computer only
    need look at the device to make certain that it is the same
    device (or disk) as was previously used.
    
    There are three problems with the use of these slave
    blocks:
    
    -The initial device access is slowed down as all
    of the information is effectively read twice -
    once into memory and once into the program.
    
    -Some disk drives do not support a means of
    checking if a disk has been amended on a second
    computer since the last access - meaning that the
    old version of the information stored in the
    slave blocks can be loaded instead
    
    -On some hard-disks, the hard-disk itself may not
    have been altered (you may need to use a command
    such as <SPAN style="font-style: italic;">WIN_FLUSH</SPAN>).
    
    The command <SPAN style="font-style: italic;">DEL_DEFB</SPAN> can assist with the second of these
    problems, by deleting all of the slave blocks from memory.
    
    Another problem which can be assisted by <SPAN style="font-style: italic;">DEL_DEFB</SPAN> is 'heap
    fragmentation'. To keep memory tidy, there is an internal
    list which says where to find which pieces of information.
    These lists reserve memory and can lead to the phenomenon
    known as heap fragmentation. The following example
    demonstrates this:
    <SPAN style="font-style: italic;">PRINT FREE_MEM
    a=ALCHP(10000)
    b=ALCHP(10000)
    PRINT FREE_MEM
    RECHP a
    PRINT FREE_MEM<BR></SPAN>
    First, we noted how much memory is free and then we
    reserved 20000 bytes of memory in two steps. So there are now
    20000 bytes of free memory less. Now, we release the first
    10000 bytes and look again at the free memory: it has not
    actually increased as much as you would have thought!
    Actually, the memory isn't lost. <SPAN style="font-style: italic;">FREE_MEM</SPAN> returns the largest
    piece of free memory in RAM. A further <SPAN style="font-style: italic;">ALCHP(10000)</SPAN> would not
    reduce <SPAN style="font-style: italic;">FREE_MEM</SPAN> in the above example.
    
    Maybe an illustration would make memory management clearer:
    
    free memory|-------------------------|
    
    <SPAN style="font-style: italic;">ALCHP(10000)</SPAN>|######|------------------|
    
    <SPAN style="font-style: italic;">ALCHP(10000)</SPAN>|######|######|-----------|
    
    release first block|======|######|-----------|
    
    -- : free memory (returned by <SPAN style="font-style: italic;">FREE_MEM</SPAN>)
    
    ## : reserved memory
    
    == : free memory (used for ramdisks)
    
    The above-mentioned internal list allocates a small piece
    of memory which may reduce the largest piece of free RAM
    available to certain operations which draw large chunks of
    memory at a time, causing them to fail (out of memory), even
    though there would be enough memory had the 'drive definition
    blocks' not fragmented it.
    
    The command <SPAN style="font-style: italic;">DEL_DEFB</SPAN> clears these blocks, thus helping to
    relieve the heap fragmentation.
    
    
<H3>NOTE:</H3>

<P>
    Because <SPAN style="font-style: italic;">DEL_DEFB</SPAN> deletes the slave blocks, future device
    accesses will be slowed!
    
    
<H3>WARNING:</H3>

<P>
    Do not use <SPAN style="font-style: italic;">DEL_DEFB</SPAN> if any channels are open to a file.
    
    
<H3>CROSS-REFERENCE:</H3>

<P>
    <A style="font-style: italic;" href="KeywordsR.html#RECHP">RECHP</A>, <A style="font-style: italic;" href="KeywordsC.html#CLCHP">CLCHP</A>, <A style="font-style: italic;" href="KeywordsR.html#RELEASE">RELEASE</A>, <A style="font-style: italic;" href="KeywordsF.html#FREE_MEM">FREE_MEM</A>, <A style="font-style: italic;" href="KeywordsF.html#FREE">FREE</A>.
    
    Dynamic RAM disks use effectively all of the free memory.
    
    <A style="font-style: italic;" href="KeywordsF.html#FORMAT">FORMAT</A> lists other ways of causing heap fragmentation.
    <HR style="width: 100%; height: 2px;">
    
<H1><A name="DESPR" id="DESPR"></A>DESPR</H1>

<P>
    Syntax: <SPAN style="font-style: italic;">DESPR (bytes)<BR></SPAN> Location: <SPAN style="font-style: italic;">DESPR<BR></SPAN>
    The function <SPAN style="font-style: italic;">DESPR</SPAN> uses an un-documented system call to try
    and release a given number of bytes from the resident
    procedure memory on the QL. It is unknown how the ROM tries to
    decide which bytes to release.
    
    
<H3>WARNING:</H3>

<P>
    The system call used only works properly on Minerva ROMs
    and can crash some versions of the QL. This function should
    not be used!!
    
    
<H3>CROSS-REFERENCE:</H3>

<P>
    Use <A style="font-style: italic;" href="KeywordsR.html#RESPR">RESPR</A> to allocate resident procedure memory, and do not
    try to release it at a later stage. Use <A style="font-style: italic;" href="KeywordsA.html#ALCHP">ALCHP</A> and <A style="font-style: italic;" href="KeywordsR.html#RECHP">RECHP</A> to
    allocate areas of memory which may be later released.
    <HR style="width: 100%; height: 2px;">
    
<H1><A name="DESTD$" id="DESTD$"></A>DESTD$</H1>

<P>
    Syntax: <SPAN style="font-style: italic;">DESTD$<BR></SPAN> Location: <SPAN style="font-style: italic;">Toolkit II<BR></SPAN>
    This function always contains the current default
    destination device, which is an unofficial QDOS standard and
    supported by the Toolkit II variants of <SPAN style="font-style: italic;">COPY</SPAN>, <SPAN style="font-style: italic;">WCOPY</SPAN>, <SPAN style="font-style: italic;">WREN</SPAN>, and <SPAN style="font-style: italic;">SPL</SPAN>.
    When Toolkit II is initiated, <SPAN style="font-style: italic;">DESTD$='SER'</SPAN>.
    
    The default device means that if no other device is stated
    for the destination file, this device will be used. The
    default destination device will also be consulted if a device
    name is supplied but the given file cannot be found on that
    device. For example, assuming that <SPAN style="font-style: italic;">DESTD$='flp2_'</SPAN> and <SPAN style="font-style: italic;">DATAD$='ram1_'</SPAN>, if
    you enter <SPAN style="font-style: italic;">COPY example_txt</SPAN>, then the file ram1_example_txt will be
    copied to flp2_example_txt.
    
    This idea can be extended to use prefixes as
    sub-directories. Sub-directories are separated by
    underscores, <SPAN style="font-style: italic;">DESTD$</SPAN> always ends with an underscore.
    
    
<H3>CROSS-REFERENCE:</H3>

<P>
    <A style="font-style: italic;" href="KeywordsD.html#DEST_USE">DEST_USE</A> and <A style="font-style: italic;" href="KeywordsS.html#SPL_USE">SPL_USE</A> both define the default destination device<A style="font-style: italic;" href="Keywords..html#.">.</A> <A href="KeywordsD.html#DUP">DUP</A>, <A style="font-style: italic;" href="KeywordsD.html#DDOWN">DDOWN</A> and <A style="font-style: italic;" href="KeywordsD.html#DNEXT">DNEXT</A> allow you to move around the sub-directory tree.
    
    <A style="font-style: italic;" href="KeywordsP.html#PROGD$">PROGD$</A> returns the default program device, <A style="font-style: italic;" href="KeywordsD.html#DATAD$">DATAD$</A> returns the default data device.
    
    <A style="font-style: italic;" href="KeywordsD.html#DLIST">DLIST</A> prints all default devices.
    <HR style="width: 100%; height: 2px;">
    
<H1><A name="DEST_USE" id="DEST_USE"></A>DEST_USE</H1>

<P>
    Syntax: <SPAN style="font-style: italic;">DEST_USE name<BR></SPAN> Location: <SPAN style="font-style: italic;">Toolkit II<BR></SPAN>
    This command sets the current default destination device to
    the named directory device. An underscore will be added to the
    end of the name if one is not supplied. If you supply name as
    an empty string, this will turn off the default destination
    directory.
    
    
<H3>Example:</H3>

<P>
    <SPAN style="font-style: italic;">DEST_USE win1_Quill<BR></SPAN>
    
<H3>NOTE 1:</H3>

<P>
    <SPAN style="font-style: italic;">DEST_USE</SPAN> will overwrite the default set with <SPAN style="font-style: italic;">SPL_USE</SPAN>.
    
    
<H3>NOTE 2:</H3>

<P>
    The default devices cannot exceed 32 characters (plus a
    final underscore) - any attempt to assign a longer string will
    result in the error 'Bad Parameter' (error -15).
    
    
<H3>CROSS-REFERENCE:</H3>

<P>
    Please see <A style="font-style: italic;" href="KeywordsD.html#DESTD$">DESTD$</A> and <A style="font-style: italic;" href="KeywordsS.html#SPL_USE">SPL_USE</A>.
    <HR style="width: 100%; height: 2px;">
    
<H1><A name="DEMO" id="DEMO"></A>DEMO</H1>

<P>
    Syntax: <SPAN style="font-style: italic;">DEMO n<BR></SPAN> Location: <SPAN style="font-style: italic;">Shape Toolkit<BR></SPAN>
    As the name suggests, this is only a demonstration. Try the
    command <SPAN style="font-style: italic;">DEMO 1</SPAN> and see what happens. Use only odd parameters if
    you want the screen to be restored to its previous status when
    the demonstration finishes.
    
    
<H3>CROSS-REFERENCE:</H3>

<P>
    The function <A style="font-style: italic;" href="KeywordsO.html#ODD">ODD</A> checks if a number is odd or even.
    <HR style="width: 100%; height: 2px;">
    
<H1><A name="DET" id="DET"></A>DET</H1>

<P>
    Syntax: <SPAN style="font-style: italic;">DET</SPAN> [<SPAN style="font-style: italic;">array</SPAN>] Location: <SPAN style="font-style: italic;">Math Package<BR></SPAN>
    The function <SPAN style="font-style: italic;">DET</SPAN> returns the determinant of a square matrix,
    meaning that the array (or the part passed) must have two
    dimensions of equal size, otherwise <SPAN style="font-style: italic;">DET</SPAN> breaks with error -15
    (bad parameter). The array needs to be a floating point array,
    any other type (including integer arrays) will also produce
    error -15.If no parameter is given, <SPAN style="font-style: italic;">DET</SPAN> will use the array that
    has been supplied to the previously executed <SPAN style="font-style: italic;">MATINV</SPAN> command as
    its source. If however, this command has not yet been used, <SPAN style="font-style: italic;">DET<BR></SPAN> without a parameter will stop with the error -7 (not found).
    
    You may ask what a determinant is? Briefly speaking, it
    represents a square matrix by a single number so that
    important characteristics of the matrix can be deduced from
    it, eg. the matrix cannot be inverted if the determinant is
    zero.
    
    
<H3>Example:</H3>

<P>
    We will try to approach the eigenvalues of a matrix and
    
    list them all (the so-called "spectrum" of a matrix). Due
    
    to approximation errors and the simple algorithm employed,
    
    there can be more output values than there should be. This
    
    can be improved by increasing estep in line 130, but at
    
    the cost of speed. The range of expected eigenvalues (eval1
    
    to eval2) is adapted to the chosen matrix whose random
    
    elements only range between 0 and 1. There is no limit for
    
    the positive size n of the matrix, n=0 is allowed but does
    
    not make sense because CHARPOLY becomes constant:
    <SPAN style="font-style: italic;">100 CLEAR: RANDOMISE 10: PRINT "Eigenvalues:"
    110 n=2: DIM matrix(n,n), one(n,n)
    120 MATRND matrix: MATIDN one
    130 :
    140 eval1=-1: eval2=1: esteps=200
    150 eprec&lt;(eval2-eval1)/estep)
    160 c1=CHARPOLY(matrix,eval1): count%=0
    170 FOR eval=eval1+eprec TO eval2 STEP eprec
    180 c2=CHARPOLY(matrix,eval)
    190 IF SGN(c1)&lt;&gt;SGN(c2) THEN PRINT eval
    200 c1=c2: count%=count%+1
    210 AT#0,0,0: PRINT#0,INT(100*count%/esteps);"%"
    220 END FOR eval
    230 PRINT "absolute fault:"!eprec
    240 :
    250 DEFine FuNction CHARPOLY(matrix,lambda)
    260 LOCal diff(n,n),i
    270 FOR i=1 TO n: one(i,i)=lambda
    280 MATSUB diff,matrix,one
    290 RETurn DET(diff)
    300 END DEFine CHARPOLY<BR></SPAN>
    In practice, a Newton iteration algorithm (or better) would
    
    be used.
    
    
<H3>CROSS-REFERENCE:</H3>

<P>
    <A style="font-style: italic;" href="KeywordsM.html#MATINV">MATINV</A> co-operates closely with <A style="font-style: italic;" href="KeywordsD.html#DET">DET</A>, so that for each of them
    a matrix parameter can be omitted if the other function has
    been called before; <A style="font-style: italic;" href="KeywordsM.html#MATINV">MATINV</A> calls <A style="font-style: italic;" href="KeywordsD.html#DET">DET</A> internally.
    
    In the example, we used the <A style="font-style: italic;" href="KeywordsM.html#MATRND">MATRND</A>, <A style="font-style: italic;" href="KeywordsM.html#MATIDN">MATIDN</A>, <A style="font-style: italic;" href="KeywordsS.html#SGN">SGN</A> and <A style="font-style: italic;" href="KeywordsM.html#MATSUB">MATSUB</A> keywords which are all part of the same Toolkit.
    <HR style="width: 100%; height: 2px;">
    
<H1><A name="DEVICE_SPACE" id="DEVICE_SPACE"></A>DEVICE_SPACE</H1>

<P>
    Syntax: <SPAN style="font-style: italic;">DEVICE_SPACE (</SPAN>[<SPAN style="font-style: italic;">#</SPAN>]<SPAN style="font-style: italic;">channel)<BR></SPAN> Location: <SPAN style="font-style: italic;">Turbo Toolkit<BR></SPAN>
    This function returns the number of unused bytes on the
    medium (disk, hard disk or microdrive) to which the specified
    channel is open.
    
    The channel must relate to an open file on a directory
    device (otherwise junk figures may be returned).
    
    
<H3>Example:</H3>

<P>
    A short routine which saves an area of memory to disk, with
    
    error checking.
    
    <SPAN style="font-style: italic;">100 OPEN #3,'CON_448X200A32X16'
    
    110 CLS #3
    
    120 FILE$='FLP1_MEMORY_BIN'
    
    130 FILE_SIZE=20000:ADDR=ALCHP(FILE_SIZE)
    
    140 REPEAT LOOP
    
    150 INPUT #3,'ENTER FILENAME TO SAVE MEMORY TO : [DEFAULT=';(FILE$);']';F$
    
    160 IF F$='':F$=FILE$:ELSE FILE$=F$
    
    170 OPEN_STATE=DEVICE_STATUS(2,FILE$)
    
    180 IF OPEN_STATE=-20:PRINT #3,'DEVICE IS READ ONLY':NEXT LOOP
    
    190 IF OPEN_STATE=-11:PRINT #3,'DEVICE IS FULL':NEXT LOOP
    
    200 IF OPEN_STATE=-8
    
    210 INPUT #3,'DO YOU WANT TO DELETE EXISTING FILE ? (Y/N)';A$
    
    220 IF A$=='Y'
    
    230 CH=FOP_IN(FILE$)
    
    240 ELSE
    
    250 PRINT #3;'ENTER NEW FILENAME':PAUSE 100
    
    260 NEXT LOOP
    
    270 END IF
    
    275 ELSE
    
    277 CH=FOP_NEW(FILE$)
    
    280 END IF
    
    300 IF CH&lt;0:REPORT #3:NEXT LOOP
    
    305 FREE_SPACE=DEVICE_SPACE(#CH)
    
    307 IF OPEN_STATE=-8:FREE_SPACE=FREE_SPACE+FLEN(#CH)
    
    310 IF FREE_SPACE&gt;=FILE_SIZE:PRINT#3,'SAVING FILE':EXIT LOOP
    
    320 PRINT #3;'NOT ENOUGH ROOM ON DEVICE'
    
    330 CLOSE #CH
    
    335 IF OPEN_STATE&lt;&gt;-8:DELETE FILE$
    
    340 END REPEAT LOOP
    
    350 CLOSE #CH
    
    355 DELETE FILE$
    
    360 SBYTES FILE$,ADDR,FILE_SIZE<BR></SPAN>
    
<H3></H3>

<P>
    
<H3>NOTE:</H3>

<P>
    Current versions of this fuction have difficulty returning
    the amount of space on large capacity drives, such as hard
    disks. It assumes that a sector contains 512 bytes and will
    only cope with a maximum of 65535 sectors.
    
    
<H3>CROSS-REFERENCE:</H3>

<P>
    See <A style="font-style: italic;" href="KeywordsF.html#FOPEN">FOPEN</A> and <A style="font-style: italic;" href="KeywordsD.html#DEVICE_STATUS">DEVICE_STATUS</A> for more details on accessing
    directory devices. <A style="font-style: italic;" href="KeywordsD.html#DEV_TYPE">DEV_TYPE</A> finds out what type of device a
    channel is looking at.
    <HR style="width: 100%; height: 2px;">
    
<H1><A name="DEVICE_STATUS" id="DEVICE_STATUS"></A>DEVICE_STATUS</H1>

<P>
    Syntax: <SPAN style="font-style: italic;">DEVICE_STATUS (</SPAN>[<SPAN style="font-style: italic;">open_type,</SPAN>] <SPAN style="font-style: italic;">filename$)<BR></SPAN> Location: <SPAN style="font-style: italic;">Turbo Toolkit<BR></SPAN>
    This function returns a value representing the current
    status of the device to which the specified <SPAN style="font-style: italic;">filename$</SPAN> points and
    can be used to check if an error will be generated when you
    try to access the given file.
    
    The <SPAN style="font-style: italic;">open_type</SPAN> defaults to 2 and can take the following values:
    
    -1Use for <SPAN style="font-style: italic;">OPEN</SPAN> or <SPAN style="font-style: italic;">OPEN_NEW<BR></SPAN>
    0Use for <SPAN style="font-style: italic;">OPEN<BR></SPAN>
    1Use for <SPAN style="font-style: italic;">OPEN_IN<BR></SPAN>
    2Use for <SPAN style="font-style: italic;">OPEN_NEW<BR></SPAN>
    If an <SPAN style="font-style: italic;">open_type</SPAN> of 2 is specified, then the function will try
    to create the file and return an error code if this is not
    possible. The temporary file is deleted in all cases. If an
    <SPAN style="font-style: italic;">open_type</SPAN> of 0 is specified then the function will try to open
    the file for exclusive two way access and report any errors.
    However, if an <SPAN style="font-style: italic;">open_type</SPAN> of 1 is specified the function opens the
    specified file for read only access, which means that it does
    not care if a channel is already open to the file from another
    program.
    
    Finally, if an <SPAN style="font-style: italic;">open_type</SPAN> of -1 is specified, the function will
    first of all try to open a channel to the file, returning -8
    if it already exists and can therefore be read. If it does
    not already exist, the function will tryo to create a
    temporary file and then read back from it to check that the
    device can be written to and read from, reporting any errors
    which are found. Any temporary file is then deleted by the
    function. This enables IN USE and bad or changed medium
    errors can be detected!
    
    If the open is successful the amount of free space on the
    drive is returned akin to <SPAN style="font-style: italic;">DEVICE_SPACE</SPAN>, otherwise a standard QDOS
    error code is returned.
    
    
<H3>NOTE 1:</H3>

<P>
    Current versions of this fuction have difficulty returning
    the amount of space on large capacity drives, such as hard
    disks. It assumes that a sector contains 512 bytes and will
    only cope with a maximum of 65535 sectors.
    
    
<H3>NOTE 2:</H3>

<P>
    Due to a bug in the QL's hardware, it is impossible to
    check if a microdrive is read only. In this instance, you
    will get a bad or changed medium error code (-16).
    
    
<H3>CROSS-REFERENCE:</H3>

<P>
    See <A style="font-style: italic;" href="KeywordsD.html#DEVICE_SPACE">DEVICE_SPACE</A> for an example.
    <HR style="width: 100%; height: 2px;">
    
<H1><A name="DEVLIST" id="DEVLIST"></A>DEVLIST</H1>

<P>
    Syntax: <SPAN style="font-style: italic;">DEVLIST</SPAN> [<SPAN style="font-style: italic;">#channel</SPAN>] Location: <SPAN style="font-style: italic;">TinyToolkit<BR></SPAN>
    This command lists all directory devices recognised by the
    system to the specified <SPAN style="font-style: italic;">channel</SPAN>. A directory device is one which
    contains files. The default list <SPAN style="font-style: italic;">channel</SPAN> is #1.
    
    
<H3>NOTE:</H3>

<P>
    If device names appear in the listing more than once, this
    means that more than one device driver is loaded. This
    normally happens with ramdisks ("RAM").
    
    
<H3>CROSS-REFERENCE:</H3>

<P>
    Directory devices may be renamed with <A style="font-style: italic;" href="KeywordsC.html#CHANGE">CHANGE</A> (this will have
    a corresponding effect on <A style="font-style: italic;" href="KeywordsD.html#DEVLIST">DEVLIST</A>), whilst any device can be
    renamed using <A style="font-style: italic;" href="KeywordsQ.html#QRD">QRD</A> (this will have no effect on <A style="font-style: italic;" href="KeywordsD.html#DEVLIST">DEVLIST</A>).
    
    Compare <A style="font-style: italic;" href="KeywordsD.html#DLIST">DLIST</A>.
    <HR style="width: 100%; height: 2px;">
    
<H1><A name="DEVTYPE" id="DEVTYPE"></A>DEVTYPE</H1>

<P>
    Syntax: <SPAN style="font-style: italic;">DEVTYPE</SPAN> [<SPAN style="font-style: italic;">(#channel)</SPAN>] Location: <SPAN style="font-style: italic;">SMS<BR></SPAN>
    This function returns a value to indicate the type of
    device the specified channel (default #0) is connected to.
    
    At present, you should only look at the first three bits of
    the return value, ie:
    
    <SPAN style="font-style: italic;">x%=DEVTYPE(#channel)
    
    x%=x% &amp;&amp; 3<BR></SPAN>
    The value returned is:
    
    0 - a purely serial device
    
    1 - a screen device
    
    2 - a file system device (ie. it supports file positioning)
    
    Any other values indicate that there is something wrong
    with the channel (if the value is &gt;2) otherwise, a negative
    value means that the channel is not open.
    
    
<H3>NOTE:</H3>

<P>
    Prior to v2.71, <SPAN style="font-style: italic;">DEVTYPE</SPAN> would return 'End of File' error if
    the specified channel was attached to a file and the file
    pointer was at the end of the file.
    
    
<H3>CROSS-REFERENCE:</H3>

<P>
    <A style="font-style: italic;" href="KeywordsO.html#OPEN">OPEN</A>, <A style="font-style: italic;" href="KeywordsO.html#OPEN_IN">OPEN_IN</A>, <A style="font-style: italic;" href="KeywordsO.html#OPEN_NEW">OPEN_NEW</A> and <A style="font-style: italic;" href="KeywordsO.html#OPEN_OVER">OPEN_OVER</A> allow you to open channels.
    <HR style="width: 100%; height: 2px;">
    
<H1><A name="DEV_LIST" id="DEV_LIST"></A>DEV_LIST</H1>

<P>
    Syntax: <SPAN style="font-style: italic;">DEV_LIST</SPAN> [<SPAN style="font-style: italic;">#channel</SPAN>] Location: <SPAN style="font-style: italic;">DEV device, GOLD CARD, ST/QL, SMS<BR></SPAN>
    This command lists all <SPAN style="font-style: italic;">DEV_USE</SPAN> definitions to the given
    <SPAN style="font-style: italic;">channel</SPAN>, default #1.
    
    You can also use a public domain utility, DEV Manager, to
    set and list DEV definitions on a per-program basis.
    
    
<H3>Example:</H3>

<P><SPAN style="font-style: italic;">DEV_LIST</SPAN> for example 4a of <SPAN style="font-style: italic;">DEV_USE</SPAN> prints:
    <SPAN style="font-style: italic;">DEV1_ FLP2_SOURCES_ -&gt; DEV4_DEV2_ FLP1_COMPILER_ -&gt; DEV3_DEV3_ FLP1_COMPILER_UTILS_ -&gt;
    DEV4_DEV4_ RAM1_ -&gt; DEV5_ DEV5_ FLP1_SOURCES_OTHER_ -&gt; DEV1_<BR></SPAN>
    
<H3>CROSS-REFERENCE:</H3>

<P>
    <A style="font-style: italic;" href="KeywordsD.html#DEV_USE">DEV_USE</A>, <A style="font-style: italic;" href="KeywordsD.html#DEV_USE$">DEV_USE$</A>, <A style="font-style: italic;" href="KeywordsD.html#DEV_NEXT">DEV_NEXT</A>
    Compare <A style="font-style: italic;" href="KeywordsD.html#DEVLIST">DEVLIST</A> and <A style="font-style: italic;" href="KeywordsD.html#DLIST">DLIST</A>.
    <HR style="width: 100%; height: 2px;">
    
<H1><A name="DEV_NEXT" id="DEV_NEXT"></A>DEV_NEXT</H1>

<P>
    Syntax: <SPAN style="font-style: italic;">DEV_NEXT (n)</SPAN> <SPAN style="font-style: italic;">n</SPAN>=1..8 Location: <SPAN style="font-style: italic;">DEV device, GOLD CARD, ST/QL, SMS<BR></SPAN>
    The function <SPAN style="font-style: italic;">DEV_NEXT</SPAN> returns the number of the next <SPAN style="font-style: italic;">DEV</SPAN>ice
    where a given <SPAN style="font-style: italic;">DEV</SPAN> will look on next if a file was not found. If
    a <SPAN style="font-style: italic;">DEV</SPAN> is not defined or has the search option disabled,
    <SPAN style="font-style: italic;">DEV_NEXT</SPAN> returns zero (0), otherwise an integer from 1 to 8 will
    be returned.
    
    
<H3>Example:</H3>

<P>
    A program which lists a search path:
    <SPAN style="font-style: italic;">100 INPUT "Which DEV device (1..8)?"!n
    110 IF n&lt;1 OR n&gt;8 THEN RUN
    120 DIM checked%(8)
    130 REPeat SPate
    140 IF NOT DEV_NEXT(n) OR checked%(n): EXIT SPate
    150 PRINT DEV_USE$(n)
    160 checked%(n)=1
    170 n=DEV_NEXT(n)
    180 END REPeat SPate<BR></SPAN>
    If you understood this example, then you will know exactly
    how the <SPAN style="font-style: italic;">DEV</SPAN> device works.
    
    
<H3>CROSS-REFERENCE:</H3>

<P>
    <A style="font-style: italic;" href="KeywordsD.html#DEV_USE$">DEV_USE$</A>, <A style="font-style: italic;" href="KeywordsD.html#DEV_LIST">DEV_LIST</A>, <A style="font-style: italic;" href="KeywordsD.html#DEV_USE">DEV_USE</A>
    
<H3></H3>

<P>
    <HR style="width: 100%; height: 2px;">
    
<H1><A name="DEV_USE" id="DEV_USE"></A>DEV_USE</H1>

<P>
    Syntax: <SPAN style="font-style: italic;">DEV_USE n,drive</SPAN> [<SPAN style="font-style: italic;">,next_dev</SPAN>] <SPAN style="font-style: italic;">n</SPAN>=1..8
    
    or <SPAN style="font-style: italic;">DEV_USE</SPAN> [<SPAN style="font-style: italic;">n</SPAN>](SMS v2.70+ only)
    
    or <SPAN style="font-style: italic;">DEV_USE</SPAN> [<SPAN style="font-style: italic;">drivetype</SPAN>] Location: <SPAN style="font-style: italic;">DEV device, GOLD CARD, ST/QL, SMS<BR></SPAN>
    The <SPAN style="font-style: italic;">DEV</SPAN> device is a universal method of driving devices
    (MDV, FLP, WIN, MOS, ROM), and thus allows old software to
    recognise default devices/ sub-directories as well as
    simplifying the use of them. It also introduces fully
    programmable search paths to QDOS.
    
    There are eight separate <SPAN style="font-style: italic;">DEV</SPAN> drives available, DEV1_ to
    DEV8_, each of which can point to a real drive and directory
    defined with <SPAN style="font-style: italic;">DEV_USE</SPAN>.
    
    The first parameter of the command is the number of the <SPAN style="font-style: italic;">DEV<BR></SPAN> device to be defined, the second specifies what DEVn_
    represents. There is no default and nothing is predefined, but
    <SPAN style="font-style: italic;">DEV_USE</SPAN> permits only valid drives and directories. Any default
    devices (<SPAN style="font-style: italic;">DATAD$</SPAN>, <SPAN style="font-style: italic;">PROGD$</SPAN> etc) are not recognised so the full
    directory name (including the drive name) must be stated.
    
    There is one special second parameter, the empty string,
    which removes the definition of the given <SPAN style="font-style: italic;">DEV</SPAN> device; there is
    no error reported if it was not defined.
    
    The second syntax also allows you to remove a definition by
    simply passing the number of the <SPAN style="font-style: italic;">DEV</SPAN> device to delete.
    
    
<H3>Example 1:</H3>

<P><SPAN style="font-style: italic;">DEV_USE 1,flp1_
    DEV_USE 2,flp1_SUBDIR_
    DEV_USE 3,flp1_SUBDIR
    DEV_USE 4<BR></SPAN>
    Each time that DEV1_ is accessed, the actual drive which
    will be accessed is FLP1_, eg. <SPAN style="font-style: italic;">DIR DEV1_</SPAN> lists a directory of
    FLP1_. However, <SPAN style="font-style: italic;">LOAD DEV2_BOOT</SPAN> will load FLP1_SUBDIR_BOOT but
    especially note that <SPAN style="font-style: italic;">LOAD DEV3_BOOT</SPAN> would try to load
    FLP1_SUBDIRBOOT (that's not a typing error). You can therefore
    see the importance of specifying the underscore!
    
    Whereas <SPAN style="font-style: italic;">DATA_USE</SPAN> always adds an underscore to the supplied
    parameter if there one was not specified, <SPAN style="font-style: italic;">DEV_USE</SPAN> does not.
    Please pay attention to this difference!
    
    <SPAN style="font-style: italic;">DEV_USE</SPAN>'s third parameter is optional and ranges from 0 to 8.
    This is used to specify another <SPAN style="font-style: italic;">DEV</SPAN> device which should be
    tried if DEVn_ was accessed for a given file, but the file was
    not present on that <SPAN style="font-style: italic;">DEV</SPAN> device. In all other cases: if the
    drive in general is currently inaccessible (eg. open for
    direct sector read/write), the file is damaged or already in
    use, the <SPAN style="font-style: italic;">DEV</SPAN> device will stop with the appropriate error
    message, and behave as normal in such situations.
    
    
<H3>Example 2:</H3>

<P><SPAN style="font-style: italic;">DEV_USE 1,flp1_,2
    DEV_USE 2,flp1_TEST_<BR></SPAN>
    <SPAN style="font-style: italic;">VIEW DEV1_Prog_bas</SPAN> will first try to show FLP1_Prog_bas and if it
    did not find that file, it will then try DEV2_Prog_bas which
    is actually FLP1_TEST_Prog_bas. If this also fails, <SPAN style="font-style: italic;">VIEW</SPAN> stops
    with a 'Not Found' error. You might notice that this could
    lead to an endless search if DEV2_ was told to jump back to
    DEV1_ if flp1_TEST_Prog_bas also did not exist:
    
    
<H3>Example 3:</H3>

<P><SPAN style="font-style: italic;">DEV_USE 1,flp1_,2
    DEV_USE 2,flp1_TEST_,1<BR></SPAN>
    Luckily, this is no problem - the <SPAN style="font-style: italic;">DEV</SPAN> device never circles
    back to a <SPAN style="font-style: italic;">DEV</SPAN> which has already been tried. So, using the
    definition given for example 3, <SPAN style="font-style: italic;">VIEW DEV1_Prog_bas</SPAN> looks for
    FLP1_Prog_bas, then FLP1_TEST_Prog_bas and breaks with 'Not
    Found' because DEV1_ has already been tested. That's why a <SPAN style="font-style: italic;">DEV<BR></SPAN> device cannot point to another <SPAN style="font-style: italic;">DEV</SPAN> device, <SPAN style="font-style: italic;">DEV_USE 1,DEV2_</SPAN> is
    illegal.
    
    It is advisable to give seldom used drives and directories
    a lower search priority because it naturally takes a little
    time to scan through a directory for a file. Preferred
    directories and fast RAM disks (which take next to no time to
    check for a file) should be checked before the less often-used
    directories are looked at.
    
    
<H3>Example 4a:</H3>

<P><SPAN style="font-style: italic;">DEV_USE 1,flp2_SOURCES_,4
    DEV_USE 2,flp1_COMPILER_,3
    DEV_USE 3,flp1_COMPILER_UTILS_,4
    DEV_USE 4,ram1_,5
    DEV_USE 5,flp2_SOURCES_OTHER_,1<BR></SPAN>
    The search path for DEV1_ is:-
    
    FLP2_SOURCES_ go to DEV4_
    
    RAM1_ go to DEV5_
    
    FLP2_SOURCES_OTHER_ go to DEV1_, we already
    tried that, so stop
    
    The search path for DEV2_ is:-
    
    FLP1_COMPILER_go to DEV3_
    
    FLP1_COMPILER_UTILS_ go to DEV4_
    
    RAM1_ go to DEV5_
    
    FLP2_SOURCES_OTHER_ go to DEV1_
    
    FLP2_SOURCES_ go to DEV4_ , already
    checked, so stop
    
    You see that the two search paths for DEV1_ and DEV2_ are
    connected in one way. This rather complicated example suggests
    that it would be useful to set the data and program device as
    follows:
    
    
<H3>Example 4b:</H3>

<P><SPAN style="font-style: italic;">DATA_USE DEV1_
    PROG_USE DEV2_<BR></SPAN>
    Taking into account that Toolkit II tries the program
    device after failing to find a file on the data device, a <SPAN style="font-style: italic;">VIEW
    TEXT</SPAN> will first search through the DEV1_ list and then DEV2_
    (thus looking through all <SPAN style="font-style: italic;">DEV</SPAN>s) while <SPAN style="font-style: italic;">EX PROG_exe</SPAN> stops after
    checking DEV2_ and its connected <SPAN style="font-style: italic;">DEV</SPAN>s.
    
    All operations creating or deleting files will only check
    for the original <SPAN style="font-style: italic;">DEV</SPAN> definition and ignore the optional paths.
    This prevents files from being unintentionally deleted or
    overwritten.
    
    Given the settings of examples 4a and 4b, <SPAN style="font-style: italic;">OPEN_IN #3,DEV1_TEXT<BR></SPAN> will act as <SPAN style="font-style: italic;">VIEW</SPAN> did before whereas <SPAN style="font-style: italic;">OPEN_NEW #3,DEV1_TEXT</SPAN> creates
    FLP2_SOURCES_TEXT or reports an error/asks if you want to
    overwrite (if necessary). <SPAN style="font-style: italic;">DELETE</SPAN> always behaves as an exception
    in that it does not report an error if a file was not found.
    
    You may have noticed that the third parameter allows a
    wider range than the <SPAN style="font-style: italic;">DEV</SPAN> number. A zero as the third parameter
    simply does the same as no third parameter.
    
    The third syntax of <SPAN style="font-style: italic;">DEV_USE</SPAN> is completely different from the
    first two. It is analogous to the <SPAN style="font-style: italic;">FLP_USE</SPAN>, <SPAN style="font-style: italic;">RAM_USE</SPAN> and <SPAN style="font-style: italic;">NFS_USE<BR></SPAN> commands and allows you to use a different three letter code
    for the <SPAN style="font-style: italic;">DEV</SPAN> device: <SPAN style="font-style: italic;">DEV_USE</SPAN> fry. DEV1_ is now called fry1_, DEV2_
    fry2_ and so on. However, you can also use existing devices:
    
    
<H3>Example 4c:</H3>

<P><SPAN style="font-style: italic;">DEV_USE FLP<BR></SPAN>
    Now, things become really complex. With examples 4a and 4b
    still being valid, FLP1_ actually refers to FLP1_SOURCES_,
    searching through all the other DEV definitions as well in
    order to find a file. The definitions of DEV1_ as
    FLP1_SOURCES_ and DEVs as FLP do not collide. However, if you
    issued <SPAN style="font-style: italic;">FLP_USE DEV</SPAN>, FLP1_ and DEV1_ are not known any more until
    <SPAN style="font-style: italic;">FLP_USE FLP</SPAN> restores the default name for disk drives. Equally,
    <SPAN style="font-style: italic;">DEV_USE DEV</SPAN> restores the DEV name (although this can be
    abbreviated by a <SPAN style="font-style: italic;">DEV_USE</SPAN> without any parameters).
    
    
<H3>Example 5:</H3>

<P><SPAN style="font-style: italic;">DEV_USE<BR></SPAN>
    DEV1_ refers to the true DEV1_ again, DEV2_, DEV3_, ...,
    too. Renaming DEV has been mainly implemented to convince
    existing software believing that a directory file always has
    five letters (eg. MDV1_) to accept sub-directories of level-2
    drivers as directory files, too.
    
    
<H3>NOTE:</H3>

<P>
    At least up to v2.01, the <SPAN style="font-style: italic;">DEV</SPAN> device does not work fully on
    any machine. For example <SPAN style="font-style: italic;">WSTAT</SPAN> lists the file names but not the
    other information:
    <SPAN style="font-style: italic;">DEV_USE 1,FLP1_TEST_
    WSTAT DEV1_<BR></SPAN>
    
<H3>CROSS-REFERENCE:</H3>

<P>
    <A style="font-style: italic;" href="KeywordsD.html#DATA_USE">DATA_USE</A>, <A style="font-style: italic;" href="KeywordsP.html#PROG_USE">PROG_USE</A>,<A style="font-style: italic;" href="KeywordsD.html#DEV_USE$">DEV_USE$</A>, <A style="font-style: italic;" href="KeywordsD.html#DEV_NEXT">DEV_NEXT</A>.
    
    <A style="font-style: italic;" href="KeywordsD.html#DEV_USEN">DEV_USEN</A> is the same as the third syntax on SMSQ/E.
    
    <A style="font-style: italic;" href="KeywordsD.html#DEV_LIST">DEV_LIST</A> lists all DEV definitions.
    
    <A style="font-style: italic;" href="KeywordsM.html#MAKE_DIR">MAKE_DIR</A> and the <A style="font-style: italic;" href="KeywordsD.html#DMEDIUM_">DMEDIUM_</A>xxx functions are also interesting.
    <HR style="width: 100%; height: 2px;">
    
<H1><A name="DEV_USEN" id="DEV_USEN"></A>DEV_USEN</H1>

<P>
    Syntax: <SPAN style="font-style: italic;">DEV_USE</SPAN>N [<SPAN style="font-style: italic;">drivetype</SPAN>] Location: <SPAN style="font-style: italic;">SMSQ/E<BR></SPAN>
    This command is provided on SMSQ/E to allow you to alter
    the three letter reference used to access the <SPAN style="font-style: italic;">DEV</SPAN> devices. If
    no parameter is specified, then the name reverts to <SPAN style="font-style: italic;">DEV</SPAN>.
    
    
<H3>Example:</H3>

<P><SPAN style="font-style: italic;">DEV_USE 2,'win1_progs_'
    DEV_USEN 'flp'
    DIR flp2_<BR></SPAN>
    This will provide a directory of win1_progs_ - this can be
    
    reset with:
    <SPAN style="font-style: italic;">DEV_USEN
    DIR dev2_<BR></SPAN>
    
<H3>CROSS-REFERENCE:</H3>

<P>
    <A style="font-style: italic;" href="KeywordsD.html#DEV_USE">DEV_USE</A> allows you to do the same thing.
    
    <A style="font-style: italic;" href="KeywordsF.html#FLP_USE">FLP_USE</A> allows you to alter the three letter description for
    floppy disks.
    <HR style="width: 100%; height: 2px;">
    
<H1><A name="DEV_USE$" id="DEV_USE$"></A>DEV_USE$</H1>

<P>
    Syntax: <SPAN style="font-style: italic;">DEV_USE$ (n)</SPAN> where <SPAN style="font-style: italic;">n</SPAN>=1..8 Location: <SPAN style="font-style: italic;">DEV device, GOLD CARD, ST/QL, SMS<BR></SPAN>
    The <SPAN style="font-style: italic;">DEV_USE$</SPAN> function returns the actual drive and directory
    for the number of a DEV device. If a device was not defined,
    <SPAN style="font-style: italic;">DEV_USE$</SPAN> will return an empty string "", <SPAN style="font-style: italic;">LEN(DEV_USE$(n))=0</SPAN>.
    
    
<H3>Example:</H3>

<P>
    A listing of all DEV definitions:
    <SPAN style="font-style: italic;">100 UNDER 1: PRINT "DEV";: UNDER 0
    110 PRINT " ";: UNDER 1: PRINT "definition": UNDER 0
    120 found=0
    130 FOR n=1 TO 8
    140 IF LEN(DEV_USE$(n)) THEN
    150 PRINT n TO 5;DEV_USE$(n)
    160 found=1
    170 END IF
    180 END FOR n
    190 IF NOT found: PRINT "no DEVs defined"<BR></SPAN>
    
<H3>CROSS-REFERENCE:</H3>

<P>
    <A style="font-style: italic;" href="KeywordsD.html#DEV_NEXT">DEV_NEXT</A>, <A style="font-style: italic;" href="KeywordsD.html#DEV_LIST">DEV_LIST</A>,<A style="font-style: italic;" href="KeywordsD.html#DEV_USE">DEV_USE</A>.
    <HR style="width: 100%; height: 2px;">
    
<H1><A name="DIM" id="DIM"></A>DIM</H1>

<P>
    Syntax: <SPAN style="font-style: italic;">DIM array (index1</SPAN> <SUP>*</SUP>[<SPAN style="font-style: italic;">index</SPAN><SUP>i</SUP>]<SUP>*</SUP> <SPAN style="font-style: italic;">)</SPAN> <SUP>*</SUP>[<SPAN style="font-style: italic;">,array</SPAN><SUP>j</SUP> <SPAN style="font-style: italic;">(index</SPAN> <SUP>*</SUP>[<SPAN style="font-style: italic;">index</SPAN><SUP>j</SUP>]<SUP>*</SUP> <SPAN style="font-style: italic;">)</SPAN>]<SUP>*<BR></SUP> Location: <SPAN style="font-style: italic;">QL ROM<BR></SPAN>
    The command <SPAN style="font-style: italic;">DIM</SPAN> allows you to set up one or more SuperBASIC
    <SPAN style="font-style: italic;">array</SPAN>s which may be of string, integer or floating point type.
    Each <SPAN style="font-style: italic;">index</SPAN> must be an integer in the range 0...32767.
    
    
<H3>Numeric Arrays</H3>

<P>
    Each <SPAN style="font-style: italic;">index</SPAN> defines the maximum number of elements (less one)
    in any one direction, which provides the following examples:
    <SPAN style="font-style: italic;">DIM a(10)<BR></SPAN>
    sets up a floating-point array a containing 11 elements,
    a(0) to a(10);
    <SPAN style="font-style: italic;">DIM z%(10,10)<BR></SPAN>
    sets up a two dimensional integer array z% containing 121
    elements, z%(0,0) to z%(10,10)
    
    Each element can hold a different number which can later be
    accessed by specific reference to each index. When the array
    is set up, each element is set to zero.
    
    
<H3>String Arrays</H3>

<P>
    String arrays are peculiar and have various differences to
    both un-dimensioned strings and number arrays. In a string
    array, the final index contains the maximum length of a
    string, rounded up to the next even number (an attempt to
    assign a longer string to one of the array elements will
    result in a truncated string). For example:
    <SPAN style="font-style: italic;">DIM a$(10)<BR></SPAN>
    sets up a one-dimensional string array <SPAN style="font-style: italic;">a$</SPAN> with a maximum of
    10 characters. This is similar to <SPAN style="font-style: italic;">a$=FILL$(" ",10)</SPAN>, except that a$
    now has a maximum length;
    <SPAN style="font-style: italic;">DIM z$(10,9)<BR></SPAN>
    sets up a two-dimensional string array, which can hold 11
    strings (z$(0) to z$(10)), each up to 9 characters long.
    
    When a string array is set up with <SPAN style="font-style: italic;">DIM</SPAN> each entry is set to
    a nul string (""). The zero'th element of each string array
    contains the actual length of that string, for example:
    <SPAN style="font-style: italic;">DIM a$(10,10): a$(1)='Hello': PRINT a$(1,0)<BR></SPAN>
    will return the value 5, as will <SPAN style="font-style: italic;">PRINT LEN(a$(1))</SPAN>.
    
    If <SPAN style="font-style: italic;">a$</SPAN> is undimensioned and <SPAN style="font-style: italic;">a$='Hello World'</SPAN>, <SPAN style="font-style: italic;">PRINT a$(0)</SPAN> does not
    generally work and will result in an 'Out of Range' error,
    except under SMS v2.60+ and Minerva where <SPAN style="font-style: italic;">PRINT a$(0)</SPAN> is the same
    as <SPAN style="font-style: italic;">PRINT LEN(a$)</SPAN>.
    
    
<H3>Sub-Sets of Arrays</H3>

<P>
    Sub-sets of arrays can also be accessed, for example
    <SPAN style="font-style: italic;">PRINT z$(0 TO 2)<BR></SPAN>
    will print the first three strings stored in the array z$.
    
    
<H3>Omitting Indices</H3>

<P>
    This can be one of the most difficult parts of SuperBasic
    from the point of view of making programs compatible on all
    implementations of SuperBASIC and also making programs work
    the same under the interpreter and when compiled. The ST/QL
    Emulators (with E-Init v1.27 or later) follow the same rules
    as SMS.
    
    If an index is omitted, SuperBASIC inserts a default index
    of:
    
    <SPAN style="font-style: italic;">0 TO DIMN (array,index_no)<BR></SPAN>
    For example, if array is a two-dimensional array, array(1)
    is the same as using the form <SPAN style="font-style: italic;">array (1,0 TO DIMN(array,2))</SPAN>.
    
    Unfortunately, string arrays are slightly different when
    using the last index. If the last index is omitted, this
    defaults to an index of:
    <SPAN style="font-style: italic;">1 TO LEN(array$(x))<BR></SPAN>
    However, except on SMS, if a start descriptor is specified,
    but not an end one, the last index defaults once again to:
    <SPAN style="font-style: italic;">start_descriptor TO DIMN(array$,index_no)<BR></SPAN>
    On SMS this defaults to <SPAN style="font-style: italic;">start_descriptor TO LEN(array$(x)<BR></SPAN>
    Even more oddly, except on SMS and Minerva, if a start
    descriptor is omitted, but an end descriptor specified, the
    index defaults to: <SPAN style="font-style: italic;">0 TO end_descriptor<BR></SPAN>
    normally resulting in an error.
    
    (On SMS and Minerva this defaults to <SPAN style="font-style: italic;">1 TO end_descriptor</SPAN>)
    
    However, except on SMS and Minerva, if neither a start nor
    end descriptor are specified, but the <SPAN style="font-style: italic;">TO</SPAN> itself is specified,
    this defaults to <SPAN style="font-style: italic;">0 TO DIMN (array$,index_no)</SPAN>, again normally causing an
    error.
    
    On SMS this defaults to <SPAN style="font-style: italic;">1 TO LEN (Array$ (x)<BR></SPAN>
    On Minerva this defaults to <SPAN style="font-style: italic;">1 TO DIMN (array$,index_no)<BR></SPAN>
    This creates the following result:
    <SPAN style="font-style: italic;">DIM a$(10):a$='Hello'
    INK 7:PAPER 0
    STRIP 2
    PRINT a$<BR></SPAN>
    Prints 'Hello' - a$ (1 TO LEN(a$)
    
    (On all implementations)
    <SPAN style="font-style: italic;">PRINT a$(1 TO)<BR></SPAN>
    Prints 'Hello ' - a$(1 TO DIMN(a$,1))
    
    (except on SMS, where it prints 'Hello', unless the program
    is compiled with Qliberator in which case the original system
    is adopted).
    <SPAN style="font-style: italic;">PRINT a$(TO)<BR></SPAN>
    Results in 'Out of Range' - a$(0 TO DIMN(a$,1))
    
    (except on SMS, where it prints 'Hello', and on Minerva
    where it prints 'Hello '
    
    In both cases, if the program is compiled with Qliberator
    it still reports an error).
    <SPAN style="font-style: italic;">PRINT a$( TO 5)<BR></SPAN>
    Results in 'Out of Range' - a$(0 TO 5)
    
    (again on SMS and Minerva it still prints 'Hello', unless
    the program is compiled with Qliberator, which reports an
    error).
    
    
<H3>Un-Dimensioned Strings</H3>

<P>
    You can use sub-sets of un-dimensioned strings, for
    example:
    
    <SPAN style="font-style: italic;">a$='Hello World':PRINT a$(1 TO 5)<BR></SPAN>
    However, such subsets are always treated as expressions,
    which means that if such a subset was passed as a parameter to
    a <SPAN style="font-style: italic;">FuNction</SPAN> or <SPAN style="font-style: italic;">PROCedure</SPAN> (see <SPAN style="font-style: italic;">DEFine FuNction</SPAN>), it cannot be passed by
    reference and the string will remain unaltered by the
    <SPAN style="font-style: italic;">FuNction</SPAN>/<SPAN style="font-style: italic;">PROCedure</SPAN>. Compare this with a sub-set of a string array,
    which will be altered (this sub-set exists as a sub-array).
    Please see Example 3 below.
    
    The handling of descriptors is also different with
    un-dimensioned strings. If neither a start nor an end
    descriptor are specified, this, like string arrays, defaults
    to:
    <SPAN style="font-style: italic;">1 TO LEN(string$)<BR></SPAN>
    However, if the start descriptor is specified, but not the
    end descriptor, this defaults to:
    <SPAN style="font-style: italic;">start_descriptor TO LEN(string$)<BR></SPAN>
    However, if the start descriptor is omitted (whether the
    end descriptor is specified or just TO is used), unless you
    have Minerva or SMS, this defaults to:
    <SPAN style="font-style: italic;">0 TO end_descriptor<BR></SPAN>
    and
    <SPAN style="font-style: italic;">0 TO LEN(string$)<BR></SPAN>
    respectively, both of which cause an 'out of range' error.
    
    On Minerva and SMS however, this defaults to:
    <SPAN style="font-style: italic;">1 TO end_descriptor<BR></SPAN>
    and
    <SPAN style="font-style: italic;">1 TO LEN(string$)<BR></SPAN>
    respectively, thus avoiding this error.
    
    This leads to the following result:
    
    <SPAN style="font-style: italic;">CLEAR: x$='Hello'<BR></SPAN>
    <SPAN style="font-style: italic;">INK 7: PAPER 0: STRIP 2 PRINT x$<BR></SPAN>
    This Prints 'Hello'
    <SPAN style="font-style: italic;">PRINT x$(1 TO)</SPAN>This prints 'Hello'
    <SPAN style="font-style: italic;">PRINT x$(TO)</SPAN> This results in 'Out of Range'
    or 'Hello' on Minerva and SMS.
    <SPAN style="font-style: italic;">PRINT x$( TO 10)</SPAN>This results in 'Out of Range'
    or 'Hello' on Minerva and SMS.
    
    
<H3>ERRORS</H3>

<P>
    Due to the complexity of <SPAN style="font-style: italic;">DIM</SPAN>, we felt that it would be
    useful to explain some of the various errors which may be
    reported. SMS has an improved Interpreter which reports more
    intelligible error codes, therefore those have been used:
    
    
<H3>'Only arrays may be dimensioned'</H3>

<P>
    This occurs when you try to <SPAN style="font-style: italic;">DIM</SPAN> the name of a procedure or
    function. It also occurs if you try to use <SPAN style="font-style: italic;">DIM</SPAN> on one of the
    parameters of a procedure or function and that parameter is
    not itself a dimensioned variable:
    <SPAN style="font-style: italic;">100 DIM x(10)
    110 c=1:test x,1
    130 DEFine PROCedure test (a,b)
    140 DIM b(10)
    150 END DEFine<BR></SPAN>
    On other implementations, 'Bad Name' is reported in both
    instances.
    
    
<H3>'Procedure and function parameters may not be dimensioned'</H3>

<P>
    This only happens as in the example above where you try to
    <SPAN style="font-style: italic;">DIM</SPAN>ension a variable which is in fact one of the parameters
    from the <SPAN style="font-style: italic;">DEFine PROCedure</SPAN> or <SPAN style="font-style: italic;">DEFine FuNction</SPAN> line (eg. line 140). Here,
    if you pass a dimensioned variable, eg: <SPAN style="font-style: italic;">TEST 1,x</SPAN>, you get this
    error under SMS. Also see note 7.
    
    On other implementations no error is reported and the
    problems listed in Note 7 occur.
    
    
<H3>'SBASIC cannot put up with negative dimensions'</H3>

<P>
    This occurs if you try to use a negative <SPAN style="font-style: italic;">index</SPAN>, for example:
    <SPAN style="font-style: italic;">DIM x(-10)<BR></SPAN>
    On other implementations 'Out of Range' is reported.
    
    
<H3>'Dimensional overflow - you cannot be serious!'</H3>

<P>
    Too many indices have been specified in the <SPAN style="font-style: italic;">DIM</SPAN> statement -
    refer to Appendix 8.
    
    
<H3>'Error in Expression'</H3>

<P>
    SMS has either been unable to make any sense of the <SPAN style="font-style: italic;">index</SPAN>,
    or else it exceeds 32767.
    
    On other ROMs you will get the error 'Overflow' if <SPAN style="font-style: italic;">index<BR></SPAN> exceeds 32767.
    
    
<H3>'Unknown function or array'</H3>

<P>
    This is generally reported of you try to use a Procedure
    name as the <SPAN style="font-style: italic;">index</SPAN>.
    
    Other implementations report 'Error in Expression'
    
<H3>
    Example 1:</H3>

<P>
    A program which acts as a simple quiz program, but shows
    
    off some of the best features of using arrays - it is
    
    simplicity itself to add new questions and answers to this
    
    quiz (just amend <SPAN style="font-style: italic;">quest</SPAN> and <SPAN style="font-style: italic;">target</SPAN> and add the new questions
    
    and answers as <SPAN style="font-style: italic;">DATA</SPAN> at the end of the program):
    <SPAN style="font-style: italic;">100 MODE 8:WINDOW 512,256,0,0:PAPER 0:CLS
    110 WINDOW 448,200,32,16
    120 quest=5:target=5
    130 DIM question$(quest,50),option$(quest,3,25),answer(quest)
    140 RESTORE
    150 FOR i=0 TO quest-1
    160 READ question$(i)
    170 FOR j=1 TO 3:READ option$(i,j)
    180 READ answer(i)
    190 END FOR i
    200 REPeat main_loop
    210 score=0
    220 FOR i=1 TO 7,1:BORDER 10,i:PAUSE 2
    230 PAPER 6:CLS:INK 2:AT 3,10:UNDER 1:CSIZE 2,1
    240 PRINT 'QUIZ EXAMPLE':CSIZE 2,0:UNDER 0
    250 INK 0:AT 0,20:PRINT 'SCORE = ';score
    260 DIM asked(quest)
    270 REPeat loop
    280 opt=RND(1 TO quest)
    290 IF asked(opt)=1 THEN
    300 FOR j=1 TO quest
    310 IF asked(j)=0:opt=j:EXIT j
    320 NEXT j
    330 DIM asked(quest):NEXT loop
    340 END FOR j
    350 END IF
    360 asked(opt)=1
    370 AT 4,0:CLS 2
    380 ask_question(opt)
    390 reply=get_answer
    400 AT 16,0:PAPER 2:INK 7
    410 IF reply=answer(opt-1)
    420 PRINT 'Correct':score=score+1
    430 ELSE
    440 PRINT 'Wrong!':score=score-1<BR></SPAN>
    
<H3></H3>

<P><SPAN style="font-style: italic;">450 END IF
    460 PAPER 6:INK 0
    470 AT 0,20:PRINT 'SCORE = ';score
    480 PAUSE
    490 IF score=target OR score&lt;0:EXIT loop
    500 END REPeat loop
    510 PAPER 0:CLS
    520 INK 2+2*(score=target):CSIZE 3,1
    530 IF score=target
    540 PRINT 'Congratulations'
    550 ELSE
    560 PRINT 'Oh Dear'
    570 END IF
    580 CSIZE 2,0:INK 7
    590 PRINT \\'Try again?? -----&gt; y/n'
    600 REPeat keys
    610 key$=INKEY$(-1):IF key$ INSTR 'yn':EXIT keys
    620 END REPeat keys
    630 IF key$=='n':STOP
    640 END REPeat main_loop
    645 :
    650 DEFine PROCedure ask_question(no)
    660 LOCal i
    670 AT 6,0:start_word=1:end_word=1
    680 no=no-1
    690 REPeat quest_loop
    700 FOR char=start_word TO question$(no,0)
    710 IF question$(no,char)=' ':EXIT char
    720 END FOR char
    730 end_word=char
    740 PRINT !question$(no,start_word TO end_word)!
    750 IF end_word=question$(no,0):EXIT quest_loop
    760 start_word=end_word+1
    770 END REPeat quest_loop
    780 REPeat opt_loop
    790 PRINT \\
    800 FOR i=1 TO 3
    810 PRINT TO 5;i;' = ';option$(no,i)
    820 END FOR i
    830 END DEFine
    835 :
    840 DEFine FuNction get_answer
    850 REPeat keys
    860 key$=INKEY$(-1)
    870 IF key$ INSTR '123':RETurn key$
    880 END REPeat keys
    890 END DEFine
    895 :
    900 DATA 'The standard Sinclair QL has how much memory?'
    910 DATA '16K','128K','640K',2
    920 DATA "What was the name of Sinclair's first computer?"
    930 DATA 'Z80','ZX81','ZX80',3
    940 DATA 'Who is the main person responsible for QDOS?'
    950 DATA 'T.Tebby','J.Jones','C.Sinclair',1
    960 DATA "Which company created the QL's Gold Card?"
    970 DATA 'Miracle Ltd.','Digital Precision Ltd.','Mercury',1
    980 DATA 'Who is the main person responsible for SuperBASIC?'
    990 DATA 'T.Tebby','J.Jones','C.Sinclair',2<BR></SPAN>
    
<H3></H3>

<P>
    Some of you may have noticed that we have used <SPAN style="font-style: italic;">DIM
    
    option$(quest,3,25)</SPAN> when we could have used <SPAN style="font-style: italic;">DIM option$(quest,2,25)</SPAN>. The
    
    reason for this is to make it easier to check the text -
    
    try <SPAN style="font-style: italic;">PRINT option$</SPAN> and you will see that each set of three
    
    options is separated by a blank string.
    
    
<H3>Example 2:</H3>

<P>
    Take the two arrays set up with <SPAN style="font-style: italic;">DIM x(2,3,4),x$(2,4,6)</SPAN>.
    
    The following sub-arrays produce the following equivalents:
    <SPAN style="font-style: italic;">x(TO, TO 2, 1 TO) =&gt; x(0 TO 2,0 TO 2,1 TO 4)
    x$(1 TO 2, TO 2) =&gt; x$(1 TO 2,0 TO 2,1 TO LEN(x$(..)))
    x$(TO 2, TO,1 TO) =&gt; x$(0 TO 2,0 TO 4,1 TO 6)<BR></SPAN>
    
<H3>Example 3:</H3>

<P>
    A short example of the use of sub-arrays and subsets of
    
    undimensioned strings:
    <SPAN style="font-style: italic;">100 DIM a$(11)
    110 a$='Hello World'
    120 b$='Great World'
    130 swap_array a$(1 TO 5),b$(1 TO 5)
    140 PRINT a$,b$
    150 :
    1000 DEFine PROCedure swap_array (a,b)
    1010 c$=b:b=a:a=c$
    1020 END DEFine<BR></SPAN>
    
<H3>NOTE 1:</H3>

<P>
    The Turbo compiler alters <SPAN style="font-style: italic;">DIM</SPAN> in compiled programs to enable
    you to re-dimension arrays without losing their original
    contents. You may therefore need to physically set the
    contents of arrays to zero (or nul strings) to ensure that a
    program works properly when compiled.
    
    
<H3>NOTE 2:</H3>

<P>
    On AH ROMs, a floating point array is limited to 384K size.
    
    
<H3>NOTE 3:</H3>

<P>
    A variable cannot be used as both a simple variable and an
    array variable. It is set to an array variable as soon as the
    line containing the relevant <SPAN style="font-style: italic;">DIM</SPAN> statement is parsed. This
    means that if a line containing <SPAN style="font-style: italic;">DIM var</SPAN> has been entered, the
    array <SPAN style="font-style: italic;">var</SPAN> cannot be used until such time as the program has <SPAN style="font-style: italic;">RUN<BR></SPAN> this line, and in any case, an attempt to use <SPAN style="font-style: italic;">var</SPAN> without array
    descriptors (eg. <SPAN style="font-style: italic;">var=1</SPAN>) is likely to fail, either resulting in a
    'Bad Name' error or 'Error in Expression'.
    
    
<H3>NOTE 4:</H3>

<P>
    You cannot assign one array to another. For example:
    
    <SPAN style="font-style: italic;">DIM a$ (3,10) , z$ (3,10) :z$=a$<BR></SPAN>
    will report a 'Not Implemented' error. Compare
    <SPAN style="font-style: italic;">
    z$ ( 1, 1 TO 10 )=a$ ( 1, 1 TO 10 )</SPAN>.
    
    
<H3>NOTE 5:</H3>

<P>
    The Turbo and Supercharge compilers insist that strings are
    all dimensioned as string arrays. They do however also alter
    the way in which string arrays work so that they operate more
    like un-dimensioned strings. Un-dimensioned strings may also
    upset Qliberated tasks!
    
    
<H3>NOTE 6:</H3>

<P>
    On pre JS ROMs you cannot use one array as the array
    sub-script of another in the <SPAN style="font-style: italic;">DIM</SPAN> statement (other than as the
    first sub-script), for example:
    
    <SPAN style="font-style: italic;">DIM a(10):a(3)=10
    
    DIM a$(10,a(3))<BR></SPAN>
    If you try this, you will find that previous array
    sub-scripts are set to the value 0, ie. using the above
    example, <SPAN style="font-style: italic;">a$(0)</SPAN> would be acceptable, whereas <SPAN style="font-style: italic;">a$(2)</SPAN> would cause an
    error. This will work okay provided that the array is used as
    the first sub-script, otherwise use a temporary variable.
    
    For example:
    
    <SPAN style="font-style: italic;">subs=a(3):DIM a$(10,subs)
    
    DIM a$(a(3),10)<BR></SPAN>
    would both work okay on all ROM versions.
    
    
<H3>NOTE 7:</H3>

<P>
    There is a bug in SMS (at least up to v2.88) if you try to
    <SPAN style="font-style: italic;">DIM</SPAN>ension a variable which has been used as a parameter for a
    <SPAN style="font-style: italic;">PROCedure</SPAN> or <SPAN style="font-style: italic;">FuNction</SPAN> call.
    
    Take the example given above to demonstrate the error
    'procedure and function parameters may not be dimensioned'.
    Now use <SPAN style="font-style: italic;">CLEAR : TEST a,b</SPAN> - no error is reported (although line 140
    has no effect). <SPAN style="font-style: italic;">PRINT a,b</SPAN> is equivalent to <SPAN style="font-style: italic;">PRINT a;</SPAN> and any attempt
    to use <SPAN style="font-style: italic;">b</SPAN> (eg. <SPAN style="font-style: italic;">x=b</SPAN>) reports error in expression, even after <SPAN style="font-style: italic;">CLEAR</SPAN>.
    
    On other ROMs no error is reported. However, the variable
    passed as a parameter is not re-dimensioned, but some of its
    elements will no longer be the original value, but very small
    numbers and any attempt to assign another value to those
    elements which have been changed may in fact fail!!
    
    
<H3>NOTE 8:</H3>

<P>
    Current versions of Qliberator treat all strings in the
    same way as on the original QL, therefore although a program
    may RUN fine under the SMS or Minerva intepreter, it may cause
    problems when compiled.
    
    The TURBO and SuperCHARGE compilers treat strings the same
    as SMS, except see Note 1 and Note 5.
    
    
<H3>MINERVA NOTE:</H3>

<P>
    Minerva alters the way in which both dimensioned and
    undimensioned strings are handled so that <SPAN style="font-style: italic;">PRINT a$( TO 10)</SPAN> is now
    acceptable! See above.
    
    Minerva also allows you to slice expressions and numbers.
    
    Lines such as <SPAN style="font-style: italic;">PRINT 'abcd' (2 TO 3)</SPAN> and <SPAN style="font-style: italic;">a$=101010 (3)</SPAN> will now work.
    
    Minerva v1.96+ allows multiple index lists (see SMS Notes).
    
    
<H3>SMS NOTES:</H3>

<P>
    SMS alters the way in which both undimensioned and
    dimensioned strings are handled to make them more sensible
    (see above). We now await a compiler which handles strings in
    the same way!
    
    SMS says that it no longer handles multiple index lists on
    assignments (which apparently were allowed on earlier ROM
    versions - did anyone ever use these?). An example is the
    line:
    <SPAN style="font-style: italic;">100 DIM a$(3,4,5)
    110 a$(3,4)='Hello'
    120 a$(3,4)(2 TO 5)='ELLO'<BR></SPAN>
    SMS will not let you type in line 120 reporting invalid
    syntax. To overcome this you have to replace the line with:
    <SPAN style="font-style: italic;">120 a$(3,4,2 TO 5)='ELLO'<BR></SPAN>
    In common with Minerva, SMS will now also allow you to
    slice expressions and numbers.
    
    There is a bug in current versions of SMS (at least up to
    v2.90) when passing string array sub-sets by reference, for
    example the following program:
    <SPAN style="font-style: italic;">5 DIM x$(11)
    10 x$='Hello World'
    15 PRINT x$
    20 change x$(1 TO 11)
    30 PRINT x$
    1000 DEFine PROCedure change (a$)
    1010 a$(1 TO 3)='EXT'
    1020 END DEFine<BR></SPAN>
    At line 30, <SPAN style="font-style: italic;">x$</SPAN> is shown to be 'HeEXT World'?? It should be
    
    'EXTlo World' - try making line 20 read: <SPAN style="font-style: italic;">20 change x$<BR></SPAN>
    Although v2.90 fixes this problem, if you pass a sub-set of
    an undimensioned string, a worse problem is created - try
    deleting line 5 and adding line: <SPAN style="font-style: italic;">1015 PRINT a$:PAUSE</SPAN> before <SPAN style="font-style: italic;">RUN</SPAN>ning
    the program (you may need to use <SPAN style="font-style: italic;">CLEAR</SPAN> beforehand).
    
    
<H3>WARNING:</H3>

<P>
    <SPAN style="font-style: italic;">DIM</SPAN> and dimensioned variables can crash the system in
    certain instances - refer to A8.4 for details of the possible
    problems and more error messages which can be generated.
    
    
<H3>CROSS-REFERENCE:</H3>

<P>
    <A style="font-style: italic;" href="KeywordsD.html#DIMN">DIMN</A> allows you to find out the maximum sizes of an array.
    
    Please see the Appendix on Compatability concerning String
    Lengths.
    
    <A style="font-style: italic;" href="KeywordsL.html#LEN">LEN</A> allows you to find the length of a string.
    <HR style="width: 100%; height: 2px;">
    
<H1><A name="DIMN" id="DIMN"></A>DIMN</H1>

<P>
    Syntax: <SPAN style="font-style: italic;">DIMN (array</SPAN> [<SPAN style="font-style: italic;">,dimension</SPAN>] <SPAN style="font-style: italic;">)<BR></SPAN>
    or <SPAN style="font-style: italic;">DIMN (array (dimension</SPAN><SUP>1</SUP> <SUP>*</SUP>[<SPAN style="font-style: italic;">,dimension</SPAN><SUP>i</SUP>]<SUP>*</SUP><SPAN style="font-style: italic;">)</SPAN> ) Location: <SPAN style="font-style: italic;">QL ROM<BR></SPAN>
    This function allows you to investigate the size of the
    given index of a specified array. The first syntax is the
    most common: it will return the specified <SPAN style="font-style: italic;">dimension</SPAN> (index) used
    in the original <SPAN style="font-style: italic;">DIM</SPAN> statement when the array was defined. If
    the index did not exist, then a result of zero is returned. If
    <SPAN style="font-style: italic;">dimension</SPAN> is not specified, then the size of the first index is
    returned.
    
    The second syntax is somewhat obscure and has no practical
    advantages. This second syntax will not allow you to access
    the size of the first index. It works by reference to the
    array itself, for example,
    <SPAN style="font-style: italic;">PRINT DIMN(a$(1))<BR></SPAN>
    will return the size of the second index, and
    <SPAN style="font-style: italic;">PRINT DIMN(a$(1,1))<BR></SPAN>
    will return the size of the third index and so forth. Once
    the number of dimensions used within the <SPAN style="font-style: italic;">DIMN</SPAN> statement has
    reached the number used by the array, then the value 1 will be
    returned. If any more are specified, then the error 'Out of
    Range' will result.
    
    
<H3>Examples:</H3>

<P>
    Take an array created with the statement:
    
    <SPAN style="font-style: italic;">DIM a$(10,12)<BR></SPAN>
    the following results will be returned:
    
    <SPAN style="font-style: italic;">PRINT DIMN(a$)</SPAN>Will return 10
    
    <SPAN style="font-style: italic;">PRINT DIMN(a$,1)</SPAN>Will return 10
    
    <SPAN style="font-style: italic;">PRINT DIMN(a$,2)</SPAN>Will return 12
    
    <SPAN style="font-style: italic;">PRINT DIMN(a$,3)</SPAN>Will return 0
    
    <SPAN style="font-style: italic;">PRINT DIMN(a$(1))</SPAN>Will return 12
    
    <SPAN style="font-style: italic;">PRINT DIMN(a$(1,1))</SPAN>Will return 1
    
    <SPAN style="font-style: italic;">PRINT DIMN(a$(1,1,1))</SPAN> Will cause 'Out of Range'
    error.
    
    
<H3>CROSS-REFERENCE:</H3>

<P>
    <A style="font-style: italic;" href="KeywordsL.html#LEN">LEN</A> will return the actual length of characters held within
    a string.
    
    <A style="font-style: italic;" href="KeywordsD.html#DIM">DIM</A> initialises an array.
    <HR style="width: 100%; height: 2px;">
    
<H1><A name="DIR" id="DIR"></A>DIR</H1>

<P>
    Syntax: <SPAN style="font-style: italic;">DIR</SPAN> [<SPAN style="font-style: italic;">#channel,</SPAN>] <SPAN style="font-style: italic;">device<BR></SPAN>
    or <SPAN style="font-style: italic;">DIR</SPAN> [<SPAN style="font-style: italic;">#channel,</SPAN>] [<SPAN style="font-style: italic;">device</SPAN>] <SPAN style="font-style: italic;">(Toolkit II)<BR></SPAN>
    or <SPAN style="font-style: italic;">DIR \file</SPAN> [<SPAN style="font-style: italic;">,device</SPAN>] <SPAN style="font-style: italic;">(Toolkit II)<BR></SPAN> Location: <SPAN style="font-style: italic;">QL ROM, Toolkit II<BR></SPAN>
    This command produces a listing to the specified <SPAN style="font-style: italic;">channel<BR></SPAN> (default #1) of all of the files contained on the given
    device. The listing gives the name of the <SPAN style="font-style: italic;">device</SPAN> (specified with
    <SPAN style="font-style: italic;">FORMAT</SPAN>) followed by the number of available sectors/the number
    of usable sectors; followed by a list of the files in the
    order they appear on the disk.
    
    If you try to get a directory of a ram disk, eg. <SPAN style="font-style: italic;">DIR RAM1_<BR></SPAN> then the name of the device shown on screen will be RAM1.
    
    If Toolkit II is present, and <SPAN style="font-style: italic;">#channel</SPAN> is a window, a
    &lt;CTRL&gt;&lt;F5&gt; keystroke (pausing output) is generated at the end
    of each screen full of the listing. You can however also use
    the third syntax to output the directory to the specified
    file. If <SPAN style="font-style: italic;">file</SPAN> already exists, you will be given the option of
    overwriting it. If <SPAN style="font-style: italic;">file</SPAN> doesn't include a device name, the data
    default directory is used.
    
    The Toolkit II variant also supports the default data
    directory, which will be used if no device name is given in
    <SPAN style="font-style: italic;">device</SPAN>, or if the specified device name would result in the
    error 'Not Found'.
    
    If you have Level-2 or Level-3 device drivers, and there
    are any sub-directories (created with <SPAN style="font-style: italic;">MAKE_DIR</SPAN>) in the given
    directory, then if you have Toolkit II present, the names of
    these sub-directories will appear with the suffix -&gt;. You can
    then list the contents of these sub-directories by using <SPAN style="font-style: italic;">DIR<BR></SPAN> with the original device name plus the name of the
    sub-directory.
    
    Level-3 drivers take this one step further in that after
    the name of the disk in the specified <SPAN style="font-style: italic;">device</SPAN>, appears details of
    the type of disk being read, ie. MS-DOS or QDOS followed by
    SD, DD, HD or ED to confirm whether the disk is Single
    Density, Double Density, High Density or Extra Density. RAM
    disks are listed as QDOS SD.
    
    
<H3>Example 1:</H3>

<P>
    With a cartridge in the left hand microdrive slot, <SPAN style="font-style: italic;">DIR mdv1_<BR></SPAN>
    might produce the following listing in window #1:
    
    QUILL
    
    102/220 sectors
    
    boot
    
    QUILL
    
    install_exe
    
    printer_dat
    
    
<H3>Example 2:</H3>

<P>
    If Level-2 device drivers are present, <SPAN style="font-style: italic;">DIR flp1_</SPAN> might produce
    
    the following:
    
    PSION DISK
    
    1000/2880 sectors
    
    QUILL -&gt;
    
    ARCHIVE -&gt;
    
    With Level-3 drivers, you would get the same output except
    
    the first line would become:
    
    PSION DISK QDOS HD
    
    <SPAN style="font-style: italic;">DIR 'flp1_QUILL'</SPAN> would on both Level-2 and Level-3 drivers, then
    produce the following output:
    
    PSION DISK
    
    1000/2880 sectors
    
    QUILL_boot
    
    QUILL_QUILL
    
    QUILL_install_exe
    
    QUILL_printer_dat
    
    
<H3>NOTE 1:</H3>

<P>
    With the Toolkit II variant, the &lt;CTRL&gt;&lt;F5&gt; will be
    generated even where the channel is a window which has been
    opened over the network (eg. n1_scr_200x200), which can cause
    problems as the slave machine will wait for a key to be
    pressed! This can be avoided if you have the command <SPAN style="font-style: italic;">FIXPF<BR></SPAN> (provided as part of the QPTR documentation), which will
    enable you to re-install the ROM variant of <SPAN style="font-style: italic;">DIR</SPAN>. Alternatively
    write the directory to a file and copy the file to the host
    machine, eg.
    <SPAN style="font-style: italic;">
    DIR \ram1_tmp, flp1_SPL ram1_tmp TO n1_scr_200x200<BR></SPAN>
    It is even more sophisticated to use a named pipe instead
    of the temporary file ram1_tmp for the same job:
    
    <SPAN style="font-style: italic;">SPL pipe_dir TO n1_scr_200x200
    
    DIR \pipe_dir_1000, flp1_<BR></SPAN>
    
<H3>NOTE 2:</H3>

<P>
    The THOR XVI retains the original QL ROM variant of this
    command, which does not support the default device, nor does
    it show sub-directory names.
    
    
<H3>NOTE 3:</H3>

<P>
    Unless you have Toolkit II present, the Break key will not
    have any effect on <SPAN style="font-style: italic;">DIR</SPAN>. Press Break when the listing pauses at
    the end of a page under Toolkit II (Minerva v1.78+ is supposed
    to recognise the Break key, but it does not appear to work).
    The Break key is however recognised in Minerva v1.97 (at
    least!).
    
    
<H3>NOTE 4:</H3>

<P>
    Prior to Toolkit II v2.25, <SPAN style="font-style: italic;">DIR</SPAN> of a Level-2 device driver
    could cause problems when used inside a TURBO compiled
    program.
    
    
<H3>NOTE 5:</H3>

<P>
    If a directory contains a file with a null string as a name
    (eg. <SPAN style="font-style: italic;">SAVE flp1_</SPAN>), this file will not be listed on the directory
    listing. This was used as a form of copy protection on some
    early QL software, but stops the program from working on a QL
    with Level-2 or Level-3 Device Drivers as they use this file
    to store the main directory!
    
    
<H3>NOTE 6:</H3>

<P>
    On some versions of Toolkit II, the third variant could
    cause problems if you supply the name of an existing file to
    store the directory in, for example:
    
    <SPAN style="font-style: italic;">DIR \ram1_XDIR<BR></SPAN>
    - if you said 'N' when asked if it was OK to Overwrite the
    existing file - the display would be sent to #0 and #0 would
    then be <SPAN style="font-style: italic;">CLOSE</SPAN>d!! v2.49 of Toolkit II (and possibly earlier)
    does not cause any problems but does not report an error.
    v2.85 of SMSQ/E (and possibly earlier) also has no problems
    but reports the error 'Already Exists'.
    
    
<H3>NOTE 7:</H3>

<P>
    Some people try to divide up <SPAN style="font-style: italic;">DIR</SPAN>ectory listings by creating
    files such as : <SPAN style="font-style: italic;">SAVE 'flp1_----------------'</SPAN>. However, <SPAN style="font-style: italic;">DIR</SPAN> will only
    list the files in the order in which they were created if you
    are using a virgin disk which has not had other files deleted
    from it already.
    
    
<H3>CROSS-REFERENCE:</H3>

<P>
    <A style="font-style: italic;" href="KeywordsD.html#DATA_USE">DATA_USE</A> sets the current data default directory, <A style="font-style: italic;" href="KeywordsM.html#MAKE_DIR">MAKE_DIR</A> creates sub-directories, <A style="font-style: italic;" href="KeywordsW.html#WDIR">WDIR</A> allows wildcard names.
    <HR style="width: 100%; height: 2px;">
    
<H1><A name="DISCARD" id="DISCARD"></A>DISCARD</H1>

<P>
    Syntax: <SPAN style="font-style: italic;">DISCARD</SPAN> [<SPAN style="font-style: italic;">adr</SPAN>] Location: <SPAN style="font-style: italic;">Memory Toolkit (DIY Toolkit Vol H)<BR></SPAN>
    This command removes memory which has been allocated with
    <SPAN style="font-style: italic;">RESERVE</SPAN> fairly safely, ensuring that the memory had been
    allocated with <SPAN style="font-style: italic;">RESERVE</SPAN> and has not already been <SPAN style="font-style: italic;">DISCARD</SPAN>ed.
    
    If the <SPAN style="font-style: italic;">adr</SPAN> does not point to memory set aside with <SPAN style="font-style: italic;">RESERVE</SPAN> the
    error 'not found' is returned.
    
    
<H3>CROSS-REFERENCE:</H3>

<P>
    See <A style="font-style: italic;" href="KeywordsR.html#RESERVE">RESERVE</A> and <A style="font-style: italic;" href="KeywordsL.html#LINKUP">LINKUP</A>.
    
    Also see <A style="font-style: italic;" href="KeywordsC.html#CLCHP">CLCHP</A>, <A style="font-style: italic;" href="KeywordsR.html#RECHP">RECHP</A> and <A style="font-style: italic;" href="KeywordsD.html#DESPR">DESPR</A>.
    <HR style="width: 100%; height: 2px;">
    
<H1><A name="DISP_BLANK" id="DISP_BLANK"></A>DISP_BLANK</H1>

<P>
    Syntax: <SPAN style="font-style: italic;">DISP_BLANK</SPAN> [<SPAN style="font-style: italic;">xblank</SPAN>][<SPAN style="font-style: italic;">,yblank</SPAN>] Location: <SPAN style="font-style: italic;">QVME (Level E-19 Drivers onwards), SMSQ/E for
    Atari ST &amp; TT (QVME cards only)<BR></SPAN>
    The Atari range of computers can be attached to a wide
    range of monitors, some of which are able to display higher
    resolutions than others. A 17" multi-sync monitor, for
    example, can display resolutions of up to 1024x1024 (depending
    on make).
    
    The QVME card is unable to detect the various parameters
    related to monitors and therefore allows you to set your own
    parameters either from SuperBASIC or by configuring SMSQ/E.
    
    This command is used for setting the margins between the
    currently displayed QL screen and the edges of the monitor.
    This difference is known as the overscan (pixels available on
    the monitor which are currently unused).
    
    <SPAN style="font-style: italic;">xblank</SPAN> sets the number of horizontal pixels x2 from the edge
    of the monitor to the left hand side of the QL screen. The
    standard value for a 512x256 screen is 128 pixels (a standard
    QL monitor linked to an Atari can display a screen 640x480)
    (640-512)/2=64 pixels from the left hand side of the monitor.
    If <SPAN style="font-style: italic;">xblank</SPAN> is omitted or 0, then the original value is left
    unaltered.
    
    <SPAN style="font-style: italic;">yblank</SPAN> sets the number of lines x 0.5 from the top of the
    monitor to the top edge of the QL screen. The standard value
    is 56, which gives a top margin of (480-256)/2=112 pixels from
    the top of the screen. If <SPAN style="font-style: italic;">yblank</SPAN> is omitted or 0, then the
    original value is left unaltered.
    
    
<H3>NOTE 1:</H3>

<P>
    If you use <SPAN style="font-style: italic;">DISP_SIZE</SPAN> to alter the size of the displayed QL
    screen, it will automatically adjust the parameters for the
    overscan.
    
    
<H3>NOTE 2:</H3>

<P>
    If the <SPAN style="font-style: italic;">y</SPAN> parameter is used to alter the number of blank
    lines, this will override any setting of the line scan rate
    with <SPAN style="font-style: italic;">DISP_RATE</SPAN>.
    
    
<H3>CROSS-REFERENCE:</H3>

<P>
    <A style="font-style: italic;" href="KeywordsD.html#DISP_SIZE">DISP_SIZE</A> allows you to pass these parameters at the same time
    as amending the size of the displayed QL screen.
    
    <A style="font-style: italic;" href="KeywordsD.html#DISP_RATE">DISP_RATE</A> sets the frame and line scan rates for the display -
    if this command is used to adjust the line scan rate, this
    will alter the totoal number of lines.
    
    Both SMSQ/E and QVME include programs to allow you to try
    out the various settings for the <A style="font-style: italic;" href="KeywordsD.html#DISP_">DISP_</A>... commands.
    
    
<H3></H3>

<P>
    <HR style="width: 100%; height: 2px;">
    
<H3>DISP_INVERSE</H3>

<P>
    Syntax: <SPAN style="font-style: italic;">DISP_INVERSE status<BR></SPAN> Location: <SPAN style="font-style: italic;">SMSQ/E for Atari ST &amp; TT<BR></SPAN>
    The Atari range of computers support a high resolution
    (640x400) monochrome display mode which can be supported under
    SMSQ/E and SMS2. If SMSQ/E or SMS2 is running on an Atari ST
    connected to a monochrome monitor (or running on an Atari TT
    conected to such a monitor, without QVME), then it will
    automatically start up by loading the monochrome display
    driver (if available) and set the QL into the monochrome
    640x400 display mode.
    
    The QL screen can then appear either as white ink on a
    black background or black ink on a white background.
    
    <SPAN style="font-style: italic;">DISP_INVERSE</SPAN> allows you to invert the QL display, with <SPAN style="font-style: italic;">status=0<BR></SPAN> giving the default white on black and <SPAN style="font-style: italic;">status=1</SPAN> the black on white
    display.
    
    
<H3>NOTE:</H3>

<P>
    This command is not available on SMS2.
    
    
<H3>CROSS-REFERENCE:</H3>

<P>
    <A style="font-style: italic;" href="KeywordsD.html#DISP_TYPE">DISP_TYPE</A> allows you to find out if the monochrome display
    driver is running.
    
    <A style="font-style: italic;" href="KeywordsI.html#INVERSE">INVERSE</A> allows you to print in inverse colours.
    <HR style="width: 100%; height: 2px;">
    
<H1><A name="DISP_RATE" id="DISP_RATE"></A>DISP_RATE</H1>

<P>
    Syntax: <SPAN style="font-style: italic;">DISP_RATE</SPAN> [<SPAN style="font-style: italic;">frame_scan</SPAN>][<SPAN style="font-style: italic;">,line_scan</SPAN>] Location: <SPAN style="font-style: italic;">QVME (Level E-19 Drivers onwards), SMSQ/E for
    Atari ST &amp; TT (QVME cards only)<BR></SPAN>
    Due to the multitude of monitors which are available for
    the Atari ST range, it is necessary to be able to alter the
    horizontal and vertical scan rates (default = 50Hz, the
    setting on standard QL monitors).
    
    The first parameter specifies the frame rate (the
    horizontal scan rate), a setting of 70 (or more) will reduce
    flicker on most Atari monitors. If omitted or 0, the original
    value is unchanged.
    
    The second parameter specifies the line rate (the vertical
    scan rate), although this is normally not required as it is
    equal to the frame rate multiplied by the total number of
    lines. If this parameter is omitted or zero, the original is
    recalculated by reference to the number of lines and the frame
    rate.
    
    The total number of lines and line rate can be calculated
    by reference to the following program:
    <SPAN style="font-style: italic;">100 INPUT #0,'Enter y size of QL screen (DISP_SIZE) ';QLy
    110 INPUT #0,'Enter horizontal frame rate (DISP_RATE) ';Frate
    120 INPUT #0,'Enter vertical blank pixels setting (DISP_BLANK) ';Blanky
    130 Total_y=QLy+Blanky
    140 total_lines=Total_y*(Qly/QLy)
    150 PRINT 'The total number of displayed lines will be ';total_lines
    160 PRINT 'Line scan rate will be ';total_lines*Frate<BR></SPAN>
    If you use <SPAN style="font-style: italic;">DISP_RATE</SPAN> to set the line scan rate, then using the
    total number of lines (and hence the blank lines) are
    recalculated, using the following routine:
    <SPAN style="font-style: italic;">100 INPUT #0,'Enter y size of QL screen (DISP_SIZE) ';QLy
    110 INPUT #0,'Enter horizontal frame rate (DISP_RATE) ';Frate
    120 INPUT #0,'Enter vertical line scan rate (DISP_RATE) ';Lrate
    130 Total_y=INT(Lrate/Frate)
    140 PRINT 'Blank Lines for DISP_BLANK will be ';Total_y-QLy<BR></SPAN>
    
<H3>CROSS-REFERENCE:</H3>

<P>
    <A style="font-style: italic;" href="KeywordsD.html#DISP_SIZE">DISP_SIZE</A> allows you to pass these parameters at the same time
    as amending the size of the displayed QL screen.
    
    <A style="font-style: italic;" href="KeywordsD.html#DISP_BLANK">DISP_BLANK</A> sets the number of horizontal and vertical blank
    pixels on the edge of the display.
    
    Both SMSQ/E and QVME include programs to allow you to try
    out the various settings for the <A style="font-style: italic;" href="KeywordsD.html#DISP_">DISP_</A>... commands.
    <HR style="width: 100%; height: 2px;">
    
<H1><A name="DISP_SIZE" id="DISP_SIZE"></A>DISP_SIZE</H1>

<P>
    Syntax: <SPAN style="font-style: italic;">DISP_SIZE</SPAN> [<SPAN style="font-style: italic;">width</SPAN>][<SPAN style="font-style: italic;">,height</SPAN>][<SPAN style="font-style: italic;">,frame_scan</SPAN>][<SPAN style="font-style: italic;">,line_scan</SPAN>][<SPAN style="font-style: italic;">,xblank</SPAN>][<SPAN style="font-style: italic;">,yblank</SPAN>] Location: <SPAN style="font-style: italic;">QVME (Level E-19 Drivers onwards), SMSQ/E<BR></SPAN>
    This command lets you alter the size of the QL screen being
    displayed. The first two parameters allow you to specify the
    display width in pixels and the height in lines (the normal QL
    display is <SPAN style="font-style: italic;">DISP_SIZE 512,256</SPAN>). The remaining four parameters are
    those which can be set using the <SPAN style="font-style: italic;">DISP_RATE</SPAN> and <SPAN style="font-style: italic;">DISP_BLANK</SPAN> commands
    respectively.
    
    The effect of the first two parameters depends upon the
    system it is being used on:
    
    
<H3>Extended Mode4 Emulator:</H3>

<P>
    Any <SPAN style="font-style: italic;">width</SPAN> up to 512 will select the standard QL resolution.
    
    Any <SPAN style="font-style: italic;">width</SPAN> over 512 will select the extended resolution
    (768x280).
    
    
<H3>QVME, QXL and QPC:</H3>

<P>
    The <SPAN style="font-style: italic;">width</SPAN> and <SPAN style="font-style: italic;">height</SPAN> of the display can only be altered in
    increments of 32 pixels and 8 lines respectively. If <SPAN style="font-style: italic;">width</SPAN> is
    not a multiple of 32 or <SPAN style="font-style: italic;">height</SPAN> is not a multiple of 8, they are
    made into the nearest feasible size.
    
    The minimum size is 512x256 pixels.
    
    
<H3>NOTE 1:</H3>

<P>
    If you try to use <SPAN style="font-style: italic;">DISP_SIZE</SPAN> to specify both the line rate and
    the number of blank lines, the line rate is ignored and
    calculated according to the internal formula (see <SPAN style="font-style: italic;">DISP_RATE</SPAN>).
    
    
<H3>NOTE 2:</H3>

<P>
    <SPAN style="font-style: italic;">DISP_SIZE</SPAN> will not work if you have already used the <SPAN style="font-style: italic;">A_OLDSCR<BR></SPAN> command.
    
    
<H3>NOTE 3:</H3>

<P>
    Some combinations of Super Gold Card and AURORA may cause
    the internal QL clock to run too quickly unless you follow
    <SPAN style="font-style: italic;">DISP_SIZE</SPAN> by <SPAN style="font-style: italic;">PROT_DATE 0</SPAN>.
    
    
<H3>NOTE 4:</H3>

<P>
    This command has no effect if your implementation of the QL
    does not support higher resolution displays.
    
    
<H3>NOTE 5:</H3>

<P>
    Using higher resolution displays will affect the location
    of the start of the screen (see <SPAN style="font-style: italic;">SCR_BASE</SPAN>) - using <SPAN style="font-style: italic;">DISP_SIZE 512,256</SPAN> to
    set the display size back to the normal QL resolution will not
    set the base of the screen back to 131072 (the normal screen
    base on a standard QL). See <SPAN style="font-style: italic;">A_OLDSCR</SPAN>.
    
    
<H3>NOTE 6:</H3>

<P>
    Be careful when reducing screen resolution size - windows
    are not resized and therefore you may not be able to see all
    of a program's windows, or the SuperBASIC cursor!!
    
    
<H3>CROSS-REFERENCE:</H3>

<P>
    All of these parameters can be configured in SMSQ/E so that
    they are available immediately on start-up. See <A style="font-style: italic;" href="KeywordsD.html#DISP_RATE">DISP_RATE</A> and
    <A style="font-style: italic;" href="KeywordsD.html#DISP_BLANK">DISP_BLANK</A>.
    <HR style="width: 100%; height: 2px;">
    
<H1><A name="DISP_TYPE" id="DISP_TYPE"></A>DISP_TYPE</H1>

<P>
    Syntax: <SPAN style="font-style: italic;">DISP_TYPE<BR></SPAN> Location: <SPAN style="font-style: italic;">SMSQ/E<BR></SPAN>
    This function returns a number which allows you to find out
    the type of display driver which is currently being used.
    
    The values returned are:
    
    0Original ST QL Emulator, QL Hardware (either of these
    two may support MODE 8) plus QXL and QPC. All of these
    (except the original ST QL emulator) may support higher
    resolutions.
    
    1Extended Mode 4 Emulator (either 512x256 or 768x280
    pixel screen)
    
    2QVME Mode 4 Emulator
    
    4Monochrome display (only two colours)
    
    
<H3>CROSS-REFERENCE:</H3>

<P>
    See <A style="font-style: italic;" href="KeywordsD.html#DISP_INVERSE">DISP_INVERSE</A>.
    
    <A style="font-style: italic;" href="KeywordsM.html#MACHINE">MACHINE</A> and <A style="font-style: italic;" href="KeywordsP.html#PROCESSOR">PROCESSOR</A> allow you to find out more about the
    hardware which a program is being run on.
    <HR style="width: 100%; height: 2px;">
    
<H1><A name="DISP_UPDATE" id="DISP_UPDATE"></A>DISP_UPDATE</H1>

<P>
    Syntax: <SPAN style="font-style: italic;">DISP_UDPATE x,y<BR></SPAN>
    Location <SPAN style="font-style: italic;">QXL (SMSQ only)<BR></SPAN>
    This is an undocumented command and it is uncertain what
    its parameters do - it affects the rate at which the screen is
    updated on the QXL. The higher <SPAN style="font-style: italic;">x</SPAN> and <SPAN style="font-style: italic;">y</SPAN>, the faster that the
    screen is updated (and hence the smoother the graphics),
    although this also slows down the other parts of the QXL.
    
    If <SPAN style="font-style: italic;">x</SPAN> and <SPAN style="font-style: italic;">y</SPAN> are equal to 0, the screen is only updated when
    you press a key - this allows the QXL to perform complex maths
    routines very quickly (so long as they do not access the
    screen).
    
    
<H3>NOTE 1:</H3>

<P>
    Prior to SMSQ/E v2.65 if you used <SPAN style="font-style: italic;">DISP_UPDATE</SPAN> with a parameter
    larger than 1 in <SPAN style="font-style: italic;">MODE 8</SPAN>, this could cause problems on screen.
    
    
<H3>NOTE 2:</H3>

<P>
    Using parameters smaller than 0 could lock up some versions
    of QXL.
    
    <SPAN style="font-style: italic;">SCR_PRIORITY</SPAN> is similar under Amiga QDOS.
    <HR style="width: 100%; height: 2px;">
    
<H1><A name="DIV" id="DIV"></A>DIV</H1>

<P>
    Syntax: <SPAN style="font-style: italic;">x DIV y<BR></SPAN> Location: <SPAN style="font-style: italic;">QL ROM<BR></SPAN>
    This operator returns the integer part of <SPAN style="font-style: italic;">x</SPAN> divided by <SPAN style="font-style: italic;">y</SPAN>.
    If <SPAN style="font-style: italic;">x</SPAN> or <SPAN style="font-style: italic;">y</SPAN> is not an integer, then the given value is rounded to
    the nearest integer (compare <SPAN style="font-style: italic;">INT</SPAN>).
    
    On non-SMS implementations the answer and both parameters
    must lie within the range -32768...32767. On SMS, the answer
    and both parameters can lie anywhere within roughly -2e9...2e9
    (32-bit numbers).
    
    The result of the operation is always rounded down to the
    next integer ie. <SPAN style="font-style: italic;">x DIV y=INT(x/y)</SPAN>. Although this leads to some
    unexpected results with negative numbers this is so that the
    formula:
    <SPAN style="font-style: italic;">x=y*(x DIV y)+(x MOD y)<BR></SPAN>
    is always true
    
    If you wish to use 32-bit numbers on non SMS systems, you
    will need to use the formula:
    
    <SPAN style="font-style: italic;">PRINT INT(x/y)</SPAN> instead of
    
    <SPAN style="font-style: italic;">PRINT x DIV y<BR></SPAN>
    if either <SPAN style="font-style: italic;">x</SPAN> or <SPAN style="font-style: italic;">y</SPAN> is outside of the specified range.
    
    
<H3>Examples:</H3>

<P><SPAN style="font-style: italic;">PRINT 13 DIV 5<BR></SPAN>
    gives the result 2 (13 divided by 5 is 2.6)
    <SPAN style="font-style: italic;">PRINT 13.4 DIV 1.5<BR></SPAN>
    gives the result 6 (<SPAN style="font-style: italic;">13 DIV 2</SPAN>).
    <SPAN style="font-style: italic;">PRINT -13 DIV 5<BR></SPAN>
    gives the result -3
    
    
<H3>NOTE:</H3>

<P>
    <SPAN style="font-style: italic;">DIV</SPAN> has problems with the value -32768:
    
    <SPAN style="font-style: italic;">PRINT -32768 DIV -1<BR></SPAN>
    gives the result -32768 on most implementations. On Minerva
    v1.76 (or later) it gives the correct result, being an
    overflow error (the answer is +32768 which cannot be stored as
    a short integer variable).
    
    On SMS v2.75+, it returns the value +32768 as <SPAN style="font-style: italic;">DIV</SPAN> can handle
    the larger numbers!!
    
    
<H3>CROSS-REFERENCE:</H3>

<P>
    <A style="font-style: italic;" href="KeywordsM.html#MOD">MOD</A> returns the modulus of x divided by y.
    
    Also please see the alternative version of <A style="font-style: italic;" href="KeywordsD.html#DIV">DIV</A>.
    <HR style="width: 100%; height: 2px;">
    
<H1><A name="DIV" id="DIV"></A>DIV</H1>

<P>
    Syntax: <SPAN style="font-style: italic;">DIV (x,y)<BR></SPAN> Location: <SPAN style="font-style: italic;">Math Package<BR></SPAN>
    This function returns x/y as an integer in the same way as
    the ROM based <SPAN style="font-style: italic;">DIV</SPAN> operator. However, this version is not
    limited to 16-bit integers (-32768..32767). It will happily
    handle 32-bit integer numbers (<SPAN style="font-style: italic;">-INTMAX..INTMAX</SPAN>, roughly -1E9..1E9).
    Division by zero is not defined and will produce an overflow
    message.
    
    
<H3>Example:</H3>

<P><SPAN style="font-style: italic;">PRINT -40000 DIV 3<BR></SPAN>
    will produce an error on a standard QL ROM. Instead, you
    
    can now use:
    <SPAN style="font-style: italic;">PRINT DIV(-40000,3)<BR></SPAN>
    which gives the correct result.
    
    
<H3>NOTE 1:</H3>

<P>
    Both variants of <SPAN style="font-style: italic;">DIV</SPAN> can be used in the same program,
    although the Turbo and Supercharge compilers will not accept
    this version.
    
    
<H3>NOTE 2:</H3>

<P>
    If you try to use a program compiled under Turbo or
    Supercharge after loading the Math Package, if the program
    uses the normal SuperBASIC operator <SPAN style="font-style: italic;">MOD</SPAN> or <SPAN style="font-style: italic;">DIV</SPAN>, an error will be
    generated and the program will refuse to work!
    
    
<H3>CROSS-REFERENCE:</H3>

<P>
    <A style="font-style: italic;" href="KeywordsM.html#MOD">MOD</A> (as an operator or a function) returns the remainder of
    a division.
    
    Compare the other version of <A style="font-style: italic;" href="KeywordsD.html#DIV">DIV</A>.
    <HR style="width: 100%; height: 2px;">
    
<H1><A name="DLINE" id="DLINE"></A>DLINE</H1>

<P>
    Syntax: <SPAN style="font-style: italic;">DLINE</SPAN> [<SPAN style="font-style: italic;">#ch,</SPAN>] [<SPAN style="font-style: italic;">range</SPAN> <SUP>*</SUP>[<SPAN style="font-style: italic;">,range</SPAN><SUP>i</SUP>]<SUP>*</SUP>]<SPAN style="font-style: italic;">(Not SMS)<BR></SPAN>
    Syntax: <SPAN style="font-style: italic;">DLINE</SPAN> [<SPAN style="font-style: italic;">range</SPAN> <SUP>*</SUP>[<SPAN style="font-style: italic;">,range</SPAN><SUP>i</SUP>]<SUP>*</SUP>]<SPAN style="font-style: italic;">(SMS Only)<BR></SPAN> Location: <SPAN style="font-style: italic;">QL ROM<BR></SPAN>
    This command deletes a given range of lines from the
    current SuperBASIC program. The range of lines is as per the
    <SPAN style="font-style: italic;">LIST</SPAN> command. If an empty range (for example <SPAN style="font-style: italic;">DLINE</SPAN>) is specified,
    no action is taken.
    
    When the lines have been deleted, except under SMS, the
    current listed lines are re-shown in the given channel
    (default #2), although we cannot see any reason why you would
    wish this to happen on another channel!
    
    On SMS this command has no effect on the display.
    
    
<H3>NOTE 1:</H3>

<P>
    <SPAN style="font-style: italic;">DLINE TO</SPAN> is expanded to <SPAN style="font-style: italic;">DLINE 1 TO 32767</SPAN>.
    
    
<H3>NOTE 2:</H3>

<P>
    Only Minerva v1.96+ rejects invalid channel parameters.
    
    
<H3>NOTE 3:</H3>

<P>
    On Minerva pre v1.98, <SPAN style="font-style: italic;">DLINE</SPAN> to the last line could crash the
    QL!
    
    
<H3>CROSS-REFERENCE:</H3>

<P>
    <A style="font-style: italic;" href="KeywordsE.html#EDIT">EDIT</A> and <A style="font-style: italic;" href="KeywordsA.html#AUTO">AUTO</A> allow you to enter lines.
    
    <A style="font-style: italic;" href="KeywordsL.html#LIST">LIST</A> allows you to view program lines.
    <HR style="width: 100%; height: 2px;">
    
<H1><A name="DLIST" id="DLIST"></A>DLIST</H1>

<P>
    Syntax: <SPAN style="font-style: italic;">DLIST</SPAN> [<SPAN style="font-style: italic;">#channel</SPAN>] Location: <SPAN style="font-style: italic;">Toolkit II<BR></SPAN>
    This command lists all three current default directories
    (otherwise returned by the <SPAN style="font-style: italic;">DATAD$</SPAN>, <SPAN style="font-style: italic;">PROGD$</SPAN> and <SPAN style="font-style: italic;">DESTD$</SPAN> functions) to
    the specified channel (default #1).
    
    
<H3>Example:</H3>

<P><SPAN style="font-style: italic;">DLIST<BR></SPAN>
    possible Output:
    
    flp1_Quill_letters_
    
    ram1_
    
    par
    
    
<H3>NOTE:</H3>

<P>
    Some Toolkit II manuals mention a second syntax:
    <SPAN style="font-style: italic;">DLIST \file<BR></SPAN>
    but it seems as though this was never implemented. This
    should not be a problem since programs can read the same
    information from the <SPAN style="font-style: italic;">DATAD$</SPAN>, <SPAN style="font-style: italic;">PROGD$</SPAN> and <SPAN style="font-style: italic;">DESTD$</SPAN> functions.
    
    
<H3>CROSS-REFERENCE:</H3>

<P>
    <A style="font-style: italic;" href="KeywordsD.html#DATAD$">DATAD$</A> (<A style="font-style: italic;" href="KeywordsD.html#DATA_USE">DATA_USE</A>), <A style="font-style: italic;" href="KeywordsP.html#PROGD$">PROGD$</A> (<A style="font-style: italic;" href="KeywordsP.html#PROG_USE">PROG_USE</A>), <A style="font-style: italic;" href="KeywordsD.html#DESTD$">DESTD$</A> (<A style="font-style: italic;" href="KeywordsS.html#SPL_USE">SPL_USE</A> or <A style="font-style: italic;" href="KeywordsD.html#DEST_USE">DEST_USE</A>), <A style="font-style: italic;" href="KeywordsD.html#DDOWN">DDOWN</A>, <A style="font-style: italic;" href="KeywordsD.html#DUP">DUP</A>
    Compare <A style="font-style: italic;" href="KeywordsD.html#DEVLIST">DEVLIST</A> and <A style="font-style: italic;" href="KeywordsD.html#DEV_LIST">DEV_LIST</A>.
    <HR style="width: 100%; height: 2px;">
    
<H1><A name="DMEDIUM_DENSITY" id="DMEDIUM_DENSITY"></A>DMEDIUM_DENSITY</H1>

<P>
    Syntax: <SPAN style="font-style: italic;">DMEDIUM_DENSITY</SPAN> [<SPAN style="font-style: italic;">(#channel)</SPAN>]
    
    or <SPAN style="font-style: italic;">DMEDIUM_DENSITY (\file)<BR></SPAN> Location: <SPAN style="font-style: italic;">SMSQ/E v2.73+<BR></SPAN>
    This function returns a number representing the density of
    the medium on which the specified <SPAN style="font-style: italic;">file</SPAN> or directory is located,
    or to which the specified channel is open. If no parameter is
    specified, it looks to channel #3 (or #1 if #3 is not open).
    
    An error will occur if the specified channel is not open or
    the given file does not exist.
    
    The value returned is:
    
    0Non-directory device
    
    1Double Density
    
    2High Density
    
    3Extra Density
    
    255Hard disk or ram disk as they have no density.
    
    
<H3>Example:</H3>

<P><SPAN style="font-style: italic;">PRINT DMEDIUM_DENSITY(\flp1_)<BR></SPAN>
    
<H3>CROSS-REFERENCE:</H3>

<P>
    <A style="font-style: italic;" href="KeywordsD.html#DMEDIUM_NAME$">DMEDIUM_NAME$</A> gives the name of the disk attached to the
    specified channel.
    
    <A style="font-style: italic;" href="KeywordsD.html#DMEDIUM_RDONLY">DMEDIUM_RDONLY</A> and <A style="font-style: italic;" href="KeywordsD.html#DMEDIUM_FORMAT">DMEDIUM_FORMAT</A> are also useful.
    <HR style="width: 100%; height: 2px;">
    
<H1><A name="DMEDIUM_DRIVE$" id="DMEDIUM_DRIVE$"></A>DMEDIUM_DRIVE$</H1>

<P>
    Syntax: <SPAN style="font-style: italic;">DMEDIUM_DRIVE$</SPAN> [<SPAN style="font-style: italic;">(#channel)</SPAN>]
    
    or <SPAN style="font-style: italic;">DMEDIUM_DRIVE$ (\file)<BR></SPAN> Location: <SPAN style="font-style: italic;">SMSQ/E v2.73+<BR></SPAN>
    This function returns the three letter code representing
    the device connected to the specified channel or file. If no
    parameter is specified then it tries #1, unless channel #3 is
    open in which case it will access #3.
    
    If an error occurs, for example you specify a channel which
    is not open or a file which does not exist, then an error will
    occur. Luckily due to the fact that directories are stored in
    files under Level-2 and Level-3 drivers, this means that you
    can use <SPAN style="font-style: italic;">PRINT DMEDIUM_DRIVE$(\flp2_)</SPAN> if you wish.
    
    If the specified channel is not open to a directory device
    then an empty string will be returned.
    
<H3>
    NOTE 1:</H3>

<P>
    This function does not appear to work 100%, for example on
    Falkenberg hard disk interfaces it returns 'WINq' - however
    you can get around this by copying the returned string to
    another variable and only looking at the first three letters,
    for example:
    <SPAN style="font-style: italic;">DRV$=DMEDIUM_DRIVE$
    IF DRV$&lt;&gt;"":PRINT DRV$( TO 3)<BR></SPAN>
    
<H3>NOTE 2:
    </H3>

<P>This function will ignore the dev_ device, returning the
    three letter name of the device to which dev points, for
    example:
    
    <SPAN style="font-style: italic;">DEV_USE 1,'flp1_quill_'
    
    drv$=DMEDIUM_DRIVE$(\DEV1_)
    
    IF drv$&lt;&gt;'':PRINT drv$(to 3)<BR></SPAN>
    compare:
    
    <SPAN style="font-style: italic;">PRINT DMEDIUM_DRIVE$(\DEV1_)
    <BR></SPAN>
    
<H3>CROSS-REFERENCE:
    </H3>

<P><A style="font-style: italic;" href="KeywordsD.html#DMEDIUM_NAME$">DMEDIUM_NAME$</A> allows you to find out the name of the disk in
    the specified drive.
    <HR style="width: 100%; height: 2px;">
    
<H1><A name="DMEDIUM_FORMAT" id="DMEDIUM_FORMAT"></A>DMEDIUM_FORMAT</H1>

<P>
    Syntax: <SPAN style="font-style: italic;">DMEDIUM_FORMAT</SPAN> [<SPAN style="font-style: italic;">(#channel)</SPAN>]
    
    or <SPAN style="font-style: italic;">DMEDIUM_FORMAT (\file)<BR></SPAN> Location: <SPAN style="font-style: italic;">SMSQ/E v2.73+<BR></SPAN>
    This function returns a number representing the operating
    system under which the medium (or hard disk partition) on
    which the specified <SPAN style="font-style: italic;">file</SPAN> or directory is located (or to which
    the specified channel is open) was created. If no parameter
    is specified, it looks to channel #3 (or #1 if #3 is not
    open).
    
    The values returned currently are:
    
    1QDOS / SMSQ / SMSQ/E
    
    2DOS / TOS
    
    
<H3>NOTE:</H3>

<P>
    This function does not appear to work on Falkenberg hard
    disk interfaces where it always returns 255.
    
    
<H3>CROSS-REFERENCE:</H3>

<P>
    <A style="font-style: italic;" href="KeywordsD.html#DIR">DIR</A> will provide this imformation also on Level-3 device
    drivers.
    
    <A style="font-style: italic;" href="KeywordsD.html#DMEDIUM_DENSITY">DMEDIUM_DENSITY</A> allows you to check the medium's density.
    
    There is currently no way to format a disk in a format
    other than QDOS or SMSQ/E without the ATARI_rext commands
    which were available with the ST/QL emulators from Jochen
    Merz, or without specialist software (some of which is public
    domain).
    <HR style="width: 100%; height: 2px;">
    
<H1><A name="DMEDIUM_FREE" id="DMEDIUM_FREE"></A>DMEDIUM_FREE</H1>

<P>
    Syntax: <SPAN style="font-style: italic;">DMEDIUM_FREE</SPAN> [<SPAN style="font-style: italic;">(#channel)</SPAN>]
    
    or <SPAN style="font-style: italic;">DMEDIUM_FREE (\file)<BR></SPAN> Location: <SPAN style="font-style: italic;">SMSQ/E v2.73+<BR></SPAN>
    This function returns the number of free sectors available
    on the medium on which the specified <SPAN style="font-style: italic;">file</SPAN> or directory is
    located, or to which the specified channel is open. If no
    parameter is specified, it looks to channel #3 (or #1 if #3 is
    not open).
    
    
<H3>CROSS-REFERENCE:
    </H3>

<P><A style="font-style: italic;" href="KeywordsD.html#DMEDIUM_TOTAL">DMEDIUM_TOTAL</A>allows you to find out the total number of
    sectors available on the related medium. <A style="font-style: italic;" href="KeywordsD.html#DIR">DIR</A>can also be used to obtain this information.
    
    
<H3></H3>

<P>
    <HR style="width: 100%; height: 2px;">
    
<H3>DMEDIUM_NAME$</H3>

<P>
    Syntax: <SPAN style="font-style: italic;">DMEDIUM_NAME$</SPAN> [<SPAN style="font-style: italic;">(#channel)</SPAN>]
    
    or <SPAN style="font-style: italic;">DMEDIUM_NAME$ (\file)<BR></SPAN> Location: <SPAN style="font-style: italic;">SMSQ/E v2.73+<BR></SPAN>
    This function returns the name which was given to the
    medium on which the specified <SPAN style="font-style: italic;">file</SPAN> or directory is located (or
    to which the specified channel is open), when that medium was
    <SPAN style="font-style: italic;">FORMAT</SPAN>ted. If no parameter is specified, it looks to channel #3
    (or #1 if #3 is not open).
    
    
<H3>Example:</H3>

<P>
    A routine to re-format a floppy disk with the same details
    
    as previously allocated to that disk (except for the
    
    files). The drive to format (eg. flp1_) can be passed with
    
    or without quotes, due to the use of line 120:-
    <SPAN style="font-style: italic;">100 DEFine PROCedure RE_FORMAT(drv)
    110 v$=VER$:IF v$&lt;&gt;'HBA':PRINT #0,'NOT SUPPORTED':PAUSE:RETurn
    120 drv$=PARSTR$(drv,1)
    130 CH=FOPEN(drv$)
    140 IF CH&lt;0:PRINT #0,'File Error - cannot access drive':PAUSE:RETurn
    150 IF DMEDIUM_RDONLY(#CH)
    160 PRINT #0,'Disk Write Protected, cannot proceed':PAUSE
    170 CLOSE #CH:RETurn
    180 END IF
    190 dname$=DMEDIUM_NAME$(#CH)
    200 drv_density=DMEDIUM_DENSITY(#CH)
    210 IF DMEDIUM_FORMAT(#CH)&lt;&gt;1
    220 PRINT #0,'Not QDOS / SMSQE disk, cannot proceed':PAUSE
    230 CLOSE #CH:RETurn
    240 END IF
    250 IF DMEDIUM_TYPE(#CH)&lt;&gt;1
    260 PRINT #0,'This routine only supports floppy disks!!':PAUSE
    270 CLOSE #CH:RETurn
    280 END IF
    290 CLOSE #CH
    300 IF LEN(dname$)&gt;10:dname$=dname$(1 TO 10)
    310 SELect ON drv_density
    320 =1:dname$=dname$&amp;'*D'
    330 =2:dname$=dname$&amp;'*H'
    340 =3:dname$=dname$&amp;'*E'
    350 END SELect
    360 FORMAT drv$&amp;dname$
    370 END DEFine<BR></SPAN>
    <SPAN style="font-style: italic;">RE_FORMAT flp1_</SPAN>or
    
    <SPAN style="font-style: italic;">RE_FORMAT 'flp2_'<BR></SPAN>
    
<H3>CROSS-REFERENCE:</H3>

<P>
    The name of a medium is set with <A style="font-style: italic;" href="KeywordsF.html#FORMAT">FORMAT</A>. You can read it
    with <A style="font-style: italic;" href="KeywordsD.html#DIR">DIR</A> also.
    
    
<H3></H3>

<P>
    <HR style="width: 100%; height: 2px;">
    
<H3>DMEDIUM_RDONLY</H3>

<P>
    Syntax: <SPAN style="font-style: italic;">DMEDIUM_RDONLY</SPAN> [<SPAN style="font-style: italic;">(#channel)</SPAN>]
    
    or <SPAN style="font-style: italic;">DMEDIUM_RDONLY (\file)<BR></SPAN> Location: <SPAN style="font-style: italic;">SMSQ/E v2.73+<BR></SPAN>
    This function returns the value 1 (true) if the the medium
    on which the specified <SPAN style="font-style: italic;">file</SPAN> or directory is located (or to which
    the specified channel is open) is write-protected either
    through hardware or software control. If no parameter is
    specified, it looks to channel #3 (or #1 if #3 is not open).
    
    If the medium can be written to, the value returned is
    zero.
    
    
<H3>NOTE:</H3>

<P>
    This function does not appear to work on Falkenberg hard
    disk interfaces where it always returns 1.
    
    
<H3>CROSS-REFERENCE:</H3>

<P>
    See <A style="font-style: italic;" href="KeywordsD.html#DMEDIUM_NAME$">DMEDIUM_NAME$</A> for an example.
    <HR style="width: 100%; height: 2px;">
    
<H1><A name="DMEDIUM_REMOVE" id="DMEDIUM_REMOVE"></A>DMEDIUM_REMOVE</H1>

<P>
    Syntax: <SPAN style="font-style: italic;">DMEDIUM_REMOVE</SPAN> [<SPAN style="font-style: italic;">(#channel)</SPAN>]
    
    or <SPAN style="font-style: italic;">DMEDIUM_REMOVE (\file)<BR></SPAN> Location: <SPAN style="font-style: italic;">SMSQ/E v2.73+<BR></SPAN>
    This function returns the value 1 (true) if the medium on
    which the specified <SPAN style="font-style: italic;">file</SPAN> or directory is located (or to which
    the specified channel is open) is a removeable hard disk.
    Otherwise it returns 0 (false). If no parameter is specified,
    it looks to channel #3 (or #1 if #3 is not open).
    
    
<H3>NOTE:</H3>

<P>
    This function does not appear to work on Falkenberg hard
    disk interfaces where it always returns 1.
    
    
<H3>CROSS-REFERENCE:</H3>

<P>
    <A style="font-style: italic;" href="KeywordsD.html#DMEDIUM_RDONLY">DMEDIUM_RDONLY</A> allows you to check if a disk is write-
    protected.
    
    There do not appear to be any ways in which you can check
    if any channels are currently open to the medium (ie. whether
    it is safe to remove the disk), except for listing all
    currently open channels, see <A style="font-style: italic;" href="KeywordsC.html#CHANNELS">CHANNELS</A>.
    
    
<H3></H3>

<P>
    <HR style="width: 100%; height: 2px;">
    
<H3>DMEDIUM_TOTAL</H3>

<P>
    Syntax: <SPAN style="font-style: italic;">DMEDIUM_TOTAL</SPAN> [<SPAN style="font-style: italic;">(#channel)</SPAN>]
    
    or <SPAN style="font-style: italic;">DMEDIUM_TOTAL (\file)<BR></SPAN> Location: <SPAN style="font-style: italic;">SMSQ/E v2.73+<BR></SPAN>
    This function returns the number of total sectors available
    on the medium on which the specified <SPAN style="font-style: italic;">file</SPAN> or directory is
    located, or to which the specified channel is open. If no
    parameter is specified, it looks to channel #3 (or #1 if #3 is
    not open).
    
    
<H3>CROSS-REFERENCE:
    </H3>

<P><A style="font-style: italic;" href="KeywordsD.html#DMEDIUM_FREE">DMEDIUM_FREE</A>allows you to find out the number of sectors which
    currently do not contain any data on the related medium. <A style="font-style: italic;" href="KeywordsD.html#DIR">DIR</A>can also be used to obtain this information.
    
    <A style="font-style: italic;" href="KeywordsF.html#FORMAT">FORMAT</A> releases all sectors on a disk, marking any which may
    be corrupt as unavailable.
    <HR style="width: 100%; height: 2px;">
    
<H3>DMEDIUM_TYPE</H3>

<P>
    Syntax: <SPAN style="font-style: italic;">DMEDIUM_TYPE</SPAN> [<SPAN style="font-style: italic;">(#channel)</SPAN>]
    
    or <SPAN style="font-style: italic;">DMEDIUM_TYPE (\file)<BR></SPAN> Location: <SPAN style="font-style: italic;">SMSQ/E v2.73+<BR></SPAN>
    This function returns a number representing the type of
    drive on which the specified <SPAN style="font-style: italic;">file</SPAN> or directory is located (or to
    which the specified channel is open). If no parameter is
    specified, it looks to channel #3 (or #1 if #3 is not open).
    
    The values currently returned are:
    
    0RAM disk
    
    1Floppy disk drive
    
    2Hard disk drive
    
    3CD-ROM drive
    
    
<H3>NOTE:</H3>

<P>
    This function does not appear to work on Falkenberg hard
    disk interfaces where it always returns 255.
    
    
<H3>CROSS-REFERENCE:</H3>

<P>
    See <A style="font-style: italic;" href="KeywordsD.html#DMEDIUM_NAME$">DMEDIUM_NAME$</A> for an example.
    <HR style="width: 100%; height: 2px;">
    
<H1><A name="DNEXT" id="DNEXT"></A>DNEXT</H1>

<P>
    Syntax: <SPAN style="font-style: italic;">DNEXT subdirectory<BR></SPAN> Location: <SPAN style="font-style: italic;">Toolkit II<BR></SPAN>
    This command allows you to move across a directory tree by
    replacing the current sub-directory with the specified
    <SPAN style="font-style: italic;">subdirectory</SPAN> in the default data device.
    
    If the default program device is the same as the default
    data device, then this will also be altered by <SPAN style="font-style: italic;">DNEXT</SPAN>.
    
    If the default destination device is a directory device
    (ie. if it ends with an underscore), <SPAN style="font-style: italic;">DNEXT</SPAN> also alters the last
    sub-directory in this (whether or not it points to another
    drive, or is further down the directory tree).
    
    win1_
    
    |
    
    +--------+-------+
    
    | | |
    
    C BASIC Quill
    
    | |
    
    +---+---+ +-----+-----+
    
    | | | |
    
    include objects letters translations
    
    |
    
    secret
    
    The above could be a directory tree on a hard disk.
    <SPAN style="font-style: italic;">DATA_USE win1_C_</SPAN> defines win1_C_ as the default directory device, so
    <SPAN style="font-style: italic;">WDIR</SPAN> will list all of the files in win1_C_. Assuming that
    <SPAN style="font-style: italic;">PROGD$='win1_BASIC_'</SPAN> and <SPAN style="font-style: italic;">DESTD$='flp2_C_Include_'</SPAN>, entering <SPAN style="font-style: italic;">DNEXT Quill</SPAN> will
    result in the following:
    
    <SPAN style="font-style: italic;">DATAD$='win1_Quill_'
    
    PROGD$='win1_BASIC_'
    
    DESTD$='flp2_C_Quill_'<BR></SPAN>
    
<H3>NOTE 1:</H3>

<P><SPAN style="font-style: italic;">
    DNEXT</SPAN> does not check if there are any files with the given
    prefix which exist.
    
    
<H3>NOTE 2:</H3>

<P>
    <SPAN style="font-style: italic;">DNEXT</SPAN> breaks with error -17 (error in expression) if the
    parameter is a resident keyword. So append an underscore to
    the directory name, eg. <SPAN style="font-style: italic;">DNEXT NEW_</SPAN>, or specify the parameter
    between quote marks (eg. <SPAN style="font-style: italic;">DNEXT 'NEW'</SPAN>).
    
    
<H3>NOTE 3:</H3>

<P>
    The default devices cannot exceed 32 characters (plus a
    final underscore) - any attempt to extend them beyond this
    will result in the error 'Bad Parameter' (error -15).
    
    
<H3>CROSS-REFERENCE:</H3>

<P>
    <A style="font-style: italic;" href="KeywordsD.html#DUP">DUP</A> moves up the tree, <A style="font-style: italic;" href="KeywordsD.html#DDOWN">DDOWN</A> moves down the tree.
    
    <A style="font-style: italic;" href="KeywordsD.html#DATAD$">DATAD$</A> and <A style="font-style: italic;" href="KeywordsD.html#DLIST">DLIST</A> can be used to find out about the current
    sub-directory and default devices respectively.
    <HR style="width: 100%; height: 2px;">
    
<H1><A name="DO" id="DO"></A>DO</H1>

<P>
    Syntax: <SPAN style="font-style: italic;">DO</SPAN> [<SPAN style="font-style: italic;">device_</SPAN>] <SPAN style="font-style: italic;">filename<BR></SPAN> Location: <SPAN style="font-style: italic;">Toolkit II<BR></SPAN>
    This command allows you to execute a set of commands stored
    in a file (acting as an overlay). It is intended to perform
    tasks dictated by a numberless file, which enables you to do
    many things whilst releasing memory once the tasks have been
    performed.
    
    <SPAN style="font-style: italic;">DO</SPAN> is actually very similar to the Toolkit II variant <SPAN style="font-style: italic;">MERGE<BR></SPAN> and will ensure that if the given file only contains
    numberless lines, the channel is closed afterwards. It does
    however work just as well as <SPAN style="font-style: italic;">MERGE</SPAN> on numbered files!
    
    A numberless program is basically a set of SuperBASIC lines
    which do not have any line numbers. These can therefore best
    be entered with the aid of an editor program. Each line is
    loaded into the QL with the relevant command, and then
    executed (one line at a time), as if they had been entered
    from the command line (#0).
    
    This therefore means that although they can call resident
    SuperBASIC <SPAN style="font-style: italic;">PROCedure</SPAN>s and <SPAN style="font-style: italic;">FuNction</SPAN>s, you can only have in-line
    structures, such as <SPAN style="font-style: italic;">IF...END IF</SPAN> and <SPAN style="font-style: italic;">SELect ON...END SELect</SPAN>. Once each
    line has been executed, it is lost and the memory occupied by
    that line released.
    
    One advantage for pre JS ROMs is that if you use a
    numberless file to link resident keywords, such keywords can
    then be used in the same program which <SPAN style="font-style: italic;">MERGE</SPAN>d the numberless
    file. For example, if you have a numberless file
    flp1_resident_bas such as:
    
    <SPAN style="font-style: italic;">a=RESPR(12000)
    
    LBYTES flp1_Toolkit,a: CALL a<BR></SPAN>
    you can then link and use the Toolkit commands in the same
    program by including a line such as:
    
    <SPAN style="font-style: italic;">110 DO flp1_resident_bas<BR></SPAN>
    
<H3>NOTE:</H3>

<P>
    On at least v2.28-v2.49 of Toolkit II, <SPAN style="font-style: italic;">MERGE</SPAN> appears to work
    much better than <SPAN style="font-style: italic;">DO</SPAN> at executing numberless files. If <SPAN style="font-style: italic;">DO</SPAN> is
    entered as a direct command, none of the numberless lines are
    executed (compare <SPAN style="font-style: italic;">MERGE</SPAN> which executes the first line), and if <SPAN style="font-style: italic;">DO<BR></SPAN> is part of a program, only the first line is executed (compare
    <SPAN style="font-style: italic;">MERGE</SPAN> which executes all of the commands in the numberless
    file).
    
    This is fixed under SMS.
    
    
<H3>CROSS-REFERENCE:</H3>

<P>
    Please refer to <A style="font-style: italic;" href="KeywordsM.html#MERGE">MERGE</A>. SMS allows you to <A style="font-style: italic;" href="KeywordsE.html#EXEC">EXEC</A>ute a SuperBASIC
    program, letting it run in the background and perform
    functions on supplied data using pipes or channels (see <A style="font-style: italic;" href="KeywordsE.html#EX">EX</A>).
    <HR style="width: 100%; height: 2px;">
    
<H1><A name="DOTLIN" id="DOTLIN"></A>DOTLIN</H1>

<P>
    Syntax: <SPAN style="font-style: italic;">DOTLIN p1, p2, p3, col, x1, y1, x2, y2<BR></SPAN> Location: <SPAN style="font-style: italic;">HCO<BR></SPAN>
    The command <SPAN style="font-style: italic;">DOTLIN</SPAN> is a variant of <SPAN style="font-style: italic;">LDRAW</SPAN> - it draws a dotted
    line in the specified colour <SPAN style="font-style: italic;">col</SPAN> from the absolute co-ordinates
    <SPAN style="font-style: italic;">(x1,y1)</SPAN> to <SPAN style="font-style: italic;">(x2,y2)</SPAN>. The three first parameters are small
    non-negative integers which specify after how many pixels the
    line is to be broken (they are known as the periods).
    
    The line is drawn by plotting the first <SPAN style="font-style: italic;">p1</SPAN> pixels, then
    leaving a gap of <SPAN style="font-style: italic;">p2</SPAN> pixels, plotting the next <SPAN style="font-style: italic;">p3</SPAN> pixels and once
    again leaving a gap of <SPAN style="font-style: italic;">p2</SPAN> pixels before recommencing the
    pattern.
    
    
<H3>Examples:</H3>

<P><SPAN style="font-style: italic;">DOTLIN 10,10,10,3,40,40,200,60<BR></SPAN>
    draws a white line from the point (40,40) to the point
    (200,60) but only for periods of ten pixels. If a pixel is
    represented by an asterisk, this would look like this:
    
    ********** ********** ...
    
    |-- 10 --||-- 10 --||-- 10 --| ...
    
    <SPAN style="font-style: italic;">DOTLIN</SPAN> with the periods 3, 5 and 10:
    
    *** ********** *** **********
    
    |3||-5-||---10---||-5-||3||-5-||---10---|
    
    
<H3>CROSS-REFERENCES:</H3>

<P>
    All the warnings relevant to <SPAN style="font-style: italic;">SET</SPAN> apply.
    <HR style="width: 100%; height: 2px;">
    
<H1><A name="DRAW" id="DRAW"></A>DRAW</H1>

<P>
    Syntax: <SPAN style="font-style: italic;">DRAW x1,y1 TO x2,y2 ,colour<BR></SPAN> Location: <SPAN style="font-style: italic;">Fast PLOT/DRAW Toolkit<BR></SPAN>
    This command draws a line in absolute co-ordinates on the
    screen. Any windows and window attributes are ignored. <SPAN style="font-style: italic;">x1</SPAN> and
    <SPAN style="font-style: italic;">x2</SPAN> range from 0 to 511, <SPAN style="font-style: italic;">y1</SPAN> and <SPAN style="font-style: italic;">y2</SPAN> from 0 to 255. <SPAN style="font-style: italic;">DRAW</SPAN> uses the
    screen base address defined with <SPAN style="font-style: italic;">SCRBASE</SPAN> (which enables it to
    draw on a screen stored in memory as well as the currently
    visible screen. It is therefore compatible with QL emulators
    and Minerva's dual screen mode, although it cannot support
    higher resolutions).
    
    The range for the colour parameter is 0..7, other values
    give odd results without being dangerous.
    
    
<H3>Example:</H3>

<P>
    Here is a procedure which draws a line given in polar
    
    co-ordinates. A point in a polar system is specified by a
    
    radius and angle.
    <SPAN style="font-style: italic;">170 DEFine PROCedure POLAR_DRAW (r1,phi1,r2,phi2,col)
    180 REMark less precise but fast version
    190 LOCal r,phi,r_old,phi_old,dr,dphi
    200 LOCal x1,x2,y1,y2,dist
    210 r_old=r1: phi_old=phi1
    220 r=r1: phi=phi1
    230 x1=1.35*r_old*SIN(phi_old+PI/2)+255
    240 y1=r_old*COS(phi_old+PI/2)+127
    250 dist=(r1+r2)/2 * (phi1+phi2)/PI
    260 IF dist==0 THEN RETurn
    270 dr=(r2-r1)/dist: dphi=(phi2-phi1)/dist
    280 REPeat Drawing
    290 IF r&gt;=r2 AND phi&gt;=phi2 THEN EXIT Drawing
    300 r=r_old+dr: phi=phi_old+dphi
    310 x2=1.35*r*SIN(phi+PI/2)+255
    320 y2=r*COS(phi+PI/2)+127
    330 DRAW x1,y1 TO x2,y2 ,col
    340 r_old=r: phi_old=phi
    350 x1=x2: y1=y2
    360 END REPeat Drawing
    370 END DEFine POLAR_DRAW<BR></SPAN>
    <SPAN style="font-style: italic;">POLAR 0,0 TO 100,8*PI ,7</SPAN> draws an archimedic spiral and these few
    
    lines create a polar pattern:
    <SPAN style="font-style: italic;">10 SCLR 0
    20 FOR a=0 TO 50 STEP 10
    30 POLAR_DRAW a,0 TO a,2*PI ,7
    40 POLAR_DRAW 0,PI*a/25 TO 50,PI*a/25 ,7
    50 END FOR a
    60 REFRESH<BR></SPAN>
    
<H3></H3>

<P>
    
<H3>NOTE:</H3>

<P>
    <SPAN style="font-style: italic;">DRAW</SPAN> is specific to the resolution of 512x256 pixels. It can
    however be used to draw on Minerva's second screen by using
    the command <SPAN style="font-style: italic;">SCRBASE SCREEN(#3)</SPAN> (assuming that #3 is open on the
    second screen).
    
    
<H3>CROSS-REFERENCE:</H3>

<P>
    <A style="font-style: italic;" href="KeywordsP.html#PLOT">PLOT</A> plots a pixel, <A style="font-style: italic;" href="KeywordsS.html#SCLR">SCLR</A> clears the screen and <A style="font-style: italic;" href="KeywordsR.html#REFRESH">REFRESH</A> makes the
    screen pointed to by <A style="font-style: italic;" href="KeywordsS.html#SCRBASE">SCRBASE</A> visible.
    
    See also <A style="font-style: italic;" href="KeywordsD.html#DOTLIN">DOTLIN</A> and the other variant of <A style="font-style: italic;" href="KeywordsD.html#DRAW">DRAW</A>.
    <HR style="width: 100%; height: 2px;">
    
<H1><A name="DRAW" id="DRAW"></A>DRAW</H1>

<P>
    Syntax: <SPAN style="font-style: italic;">DRAW</SPAN> [<SPAN style="font-style: italic;">#ch,</SPAN>] <SPAN style="font-style: italic;">x2,y2<BR></SPAN> Location: <SPAN style="font-style: italic;">DRAW (DIY Toolkit - Vol G)<BR></SPAN>
    This command draws a line in absolute co-ordinates on the
    screen with reference to the specified window channel (if any
    - default #1).
    
    The line is drawn from the last point plotted with the <SPAN style="font-style: italic;">PLOT<BR></SPAN> command from the same toolkit, to the point specified by
    <SPAN style="font-style: italic;">x2,y2</SPAN>.
    
    This is quicker than using the SuperBASIC <SPAN style="font-style: italic;">LINE</SPAN> command and
    unlike other similar commands, it will support the current <SPAN style="font-style: italic;">INK<BR></SPAN> colour and <SPAN style="font-style: italic;">OVER</SPAN> mode. &lt;CTRL&gt;&lt;F5&gt; will pause the line drawing
    and it will even work in <SPAN style="font-style: italic;">MODE 4</SPAN>, <SPAN style="font-style: italic;">8</SPAN> and <SPAN style="font-style: italic;">12</SPAN> (on the THOR XVI,
    provided that you have v1.6+).
    
    The main limitation on this command is that the line must
    appear fully within the specified window, so <SPAN style="font-style: italic;">x2</SPAN> and <SPAN style="font-style: italic;">y2</SPAN> cannot
    exceed the width or height of the specified window (in pixels)
    nor be less than zero.
    
    
<H3>NOTE:</H3>

<P>
    Although <SPAN style="font-style: italic;">DRAW</SPAN> will work wherever the screen base is located,
    it assumes that a line of pixels takes 128 bytes - it will not
    therefore currently work on higher resolutions.
    
    
<H3>CROSS-REFERENCE:</H3>

<P>
    See the other variant of<A style="font-style: italic;" href="KeywordsD.html#DRAW">DRAW</A>.
    
    See also <A style="font-style: italic;" href="KeywordsP.html#PLOT">PLOT</A>.
    
    <A style="font-style: italic;" href="KeywordsL.html#LINE">LINE</A> is much more flexible.
    <HR style="width: 100%; height: 2px;">
    
<H1><A name="DROUND" id="DROUND"></A>DROUND</H1>

<P>
    Syntax: <SPAN style="font-style: italic;">DROUND (d, x)<BR></SPAN> Location: <SPAN style="font-style: italic;">TRIPRODRO<BR></SPAN>
    The function <SPAN style="font-style: italic;">DROUND</SPAN> will return the floating point number <SPAN style="font-style: italic;">x<BR></SPAN> rounded to <SPAN style="font-style: italic;">d</SPAN> decimal digits, counted from the left of the
    number. <SPAN style="font-style: italic;">DROUND</SPAN> rounds the last digit up or down depending on
    the next digit (ignoring any others).
    
    
<H3>Example:</H3>

<P><SPAN style="font-style: italic;">DROUND(3, 1234.56) = 1230
    DROUND(4, 1234.56) = 1235<BR></SPAN>
    
<H3>CROSS-REFERENCE:</H3>

<P>
    <A style="font-style: italic;" href="KeywordsP.html#PROUND">PROUND</A> rounds to a given precision.
    <HR style="width: 100%; height: 2px;">
    
<H1><A name="DUP" id="DUP"></A>DUP</H1>

<P>
    Syntax: <SPAN style="font-style: italic;">DUP<BR></SPAN> Location: <SPAN style="font-style: italic;">Toolkit II<BR></SPAN>
    This command strips off the last part of the default data
    device, thus moving up the directory tree. If the default
    program device is the same as the default data device, then
    this will also be altered by <SPAN style="font-style: italic;">DUP</SPAN>. If the default destination
    device is a directory device (ie. if it ends with an
    underscore), <SPAN style="font-style: italic;">DUP</SPAN> also alters this (whether or not it points to
    another drive).
    
    win1_
    
    |
    
    +--------+-------+
    
    | | |
    
    C BASIC Quill
    
    | |
    
    +---+---+ +-----+-----+
    
    | | | |
    
    include objects letters translations
    
    |
    
    secret
    
    If <SPAN style="font-style: italic;">DATAD$</SPAN> is win1_, <SPAN style="font-style: italic;">DDOWN Quill</SPAN> moves down to win1_Quill_,
    whilst <SPAN style="font-style: italic;">DUP</SPAN> will move <SPAN style="font-style: italic;">DATAD$</SPAN> back up to win1_. If <SPAN style="font-style: italic;">DATAD$</SPAN> is
    win1_Quill_letters_secret_, three <SPAN style="font-style: italic;">DUP</SPAN>s will change it back to
    win1_.
    
    
<H3>NOTE:</H3>

<P>
    It is not possible to move beyond the name specifying the
    actual device to be used. In the above example, this is the
    named root, win1_.
    
    
<H3>CROSS-REFERENCE:</H3>

<P>
    <A style="font-style: italic;" href="KeywordsD.html#DATA_USE">DATA_USE</A> allows you to set the absolute directory root, <A style="font-style: italic;" href="KeywordsD.html#DDOWN">DDOWN</A> goes down the tree, and <A style="font-style: italic;" href="KeywordsD.html#DNEXT">DNEXT</A> skips from branch to branch.
    
    <A style="font-style: italic;" href="KeywordsD.html#DATAD$">DATAD$</A> returns the current default data device ie. the device
    name plus the current sub-directory.
</BODY>
</HTML>
